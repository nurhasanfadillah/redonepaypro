(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function s(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=s(u);fetch(u.href,d)}})();function _h(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function Gp(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var r=a.default;if(typeof r=="function"){var s=function o(){return this instanceof o?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};s.prototype=r.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(a).forEach(function(o){var u=Object.getOwnPropertyDescriptor(a,o);Object.defineProperty(s,o,u.get?u:{enumerable:!0,get:function(){return a[o]}})}),s}var hl={exports:{}},Ws={},fl={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Od;function Jp(){if(Od)return Ne;Od=1;var a=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.iterator;function j(v){return v===null||typeof v!="object"?null:(v=_&&v[_]||v["@@iterator"],typeof v=="function"?v:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,E={};function O(v,I,R){this.props=v,this.context=I,this.refs=E,this.updater=R||C}O.prototype.isReactComponent={},O.prototype.setState=function(v,I){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,I,"setState")},O.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function $(){}$.prototype=O.prototype;function z(v,I,R){this.props=v,this.context=I,this.refs=E,this.updater=R||C}var M=z.prototype=new $;M.constructor=z,P(M,O.prototype),M.isPureReactComponent=!0;var V=Array.isArray,ne=Object.prototype.hasOwnProperty,B={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function re(v,I,R){var J,ee={},he=null,je=null;if(I!=null)for(J in I.ref!==void 0&&(je=I.ref),I.key!==void 0&&(he=""+I.key),I)ne.call(I,J)&&!X.hasOwnProperty(J)&&(ee[J]=I[J]);var ke=arguments.length-2;if(ke===1)ee.children=R;else if(1<ke){for(var Te=Array(ke),ze=0;ze<ke;ze++)Te[ze]=arguments[ze+2];ee.children=Te}if(v&&v.defaultProps)for(J in ke=v.defaultProps,ke)ee[J]===void 0&&(ee[J]=ke[J]);return{$$typeof:a,type:v,key:he,ref:je,props:ee,_owner:B.current}}function ve(v,I){return{$$typeof:a,type:v.type,key:I,ref:v.ref,props:v.props,_owner:v._owner}}function be(v){return typeof v=="object"&&v!==null&&v.$$typeof===a}function ae(v){var I={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(R){return I[R]})}var Ee=/\/+/g;function ce(v,I){return typeof v=="object"&&v!==null&&v.key!=null?ae(""+v.key):I.toString(36)}function G(v,I,R,J,ee){var he=typeof v;(he==="undefined"||he==="boolean")&&(v=null);var je=!1;if(v===null)je=!0;else switch(he){case"string":case"number":je=!0;break;case"object":switch(v.$$typeof){case a:case r:je=!0}}if(je)return je=v,ee=ee(je),v=J===""?"."+ce(je,0):J,V(ee)?(R="",v!=null&&(R=v.replace(Ee,"$&/")+"/"),G(ee,I,R,"",function(ze){return ze})):ee!=null&&(be(ee)&&(ee=ve(ee,R+(!ee.key||je&&je.key===ee.key?"":(""+ee.key).replace(Ee,"$&/")+"/")+v)),I.push(ee)),1;if(je=0,J=J===""?".":J+":",V(v))for(var ke=0;ke<v.length;ke++){he=v[ke];var Te=J+ce(he,ke);je+=G(he,I,R,Te,ee)}else if(Te=j(v),typeof Te=="function")for(v=Te.call(v),ke=0;!(he=v.next()).done;)he=he.value,Te=J+ce(he,ke++),je+=G(he,I,R,Te,ee);else if(he==="object")throw I=String(v),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return je}function ye(v,I,R){if(v==null)return v;var J=[],ee=0;return G(v,J,"","",function(he){return I.call(R,he,ee++)}),J}function L(v){if(v._status===-1){var I=v._result;I=I(),I.then(function(R){(v._status===0||v._status===-1)&&(v._status=1,v._result=R)},function(R){(v._status===0||v._status===-1)&&(v._status=2,v._result=R)}),v._status===-1&&(v._status=0,v._result=I)}if(v._status===1)return v._result.default;throw v._result}var fe={current:null},q={transition:null},D={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:q,ReactCurrentOwner:B};function U(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:ye,forEach:function(v,I,R){ye(v,function(){I.apply(this,arguments)},R)},count:function(v){var I=0;return ye(v,function(){I++}),I},toArray:function(v){return ye(v,function(I){return I})||[]},only:function(v){if(!be(v))throw Error("React.Children.only expected to receive a single React element child.");return v}},Ne.Component=O,Ne.Fragment=s,Ne.Profiler=u,Ne.PureComponent=z,Ne.StrictMode=o,Ne.Suspense=g,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,Ne.act=U,Ne.cloneElement=function(v,I,R){if(v==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+v+".");var J=P({},v.props),ee=v.key,he=v.ref,je=v._owner;if(I!=null){if(I.ref!==void 0&&(he=I.ref,je=B.current),I.key!==void 0&&(ee=""+I.key),v.type&&v.type.defaultProps)var ke=v.type.defaultProps;for(Te in I)ne.call(I,Te)&&!X.hasOwnProperty(Te)&&(J[Te]=I[Te]===void 0&&ke!==void 0?ke[Te]:I[Te])}var Te=arguments.length-2;if(Te===1)J.children=R;else if(1<Te){ke=Array(Te);for(var ze=0;ze<Te;ze++)ke[ze]=arguments[ze+2];J.children=ke}return{$$typeof:a,type:v.type,key:ee,ref:he,props:J,_owner:je}},Ne.createContext=function(v){return v={$$typeof:f,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},v.Provider={$$typeof:d,_context:v},v.Consumer=v},Ne.createElement=re,Ne.createFactory=function(v){var I=re.bind(null,v);return I.type=v,I},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(v){return{$$typeof:p,render:v}},Ne.isValidElement=be,Ne.lazy=function(v){return{$$typeof:w,_payload:{_status:-1,_result:v},_init:L}},Ne.memo=function(v,I){return{$$typeof:y,type:v,compare:I===void 0?null:I}},Ne.startTransition=function(v){var I=q.transition;q.transition={};try{v()}finally{q.transition=I}},Ne.unstable_act=U,Ne.useCallback=function(v,I){return fe.current.useCallback(v,I)},Ne.useContext=function(v){return fe.current.useContext(v)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(v){return fe.current.useDeferredValue(v)},Ne.useEffect=function(v,I){return fe.current.useEffect(v,I)},Ne.useId=function(){return fe.current.useId()},Ne.useImperativeHandle=function(v,I,R){return fe.current.useImperativeHandle(v,I,R)},Ne.useInsertionEffect=function(v,I){return fe.current.useInsertionEffect(v,I)},Ne.useLayoutEffect=function(v,I){return fe.current.useLayoutEffect(v,I)},Ne.useMemo=function(v,I){return fe.current.useMemo(v,I)},Ne.useReducer=function(v,I,R){return fe.current.useReducer(v,I,R)},Ne.useRef=function(v){return fe.current.useRef(v)},Ne.useState=function(v){return fe.current.useState(v)},Ne.useSyncExternalStore=function(v,I,R){return fe.current.useSyncExternalStore(v,I,R)},Ne.useTransition=function(){return fe.current.useTransition()},Ne.version="18.3.1",Ne}var Id;function zl(){return Id||(Id=1,fl.exports=Jp()),fl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rd;function Yp(){if(Rd)return Ws;Rd=1;var a=zl(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function f(p,g,y){var w,_={},j=null,C=null;y!==void 0&&(j=""+y),g.key!==void 0&&(j=""+g.key),g.ref!==void 0&&(C=g.ref);for(w in g)o.call(g,w)&&!d.hasOwnProperty(w)&&(_[w]=g[w]);if(p&&p.defaultProps)for(w in g=p.defaultProps,g)_[w]===void 0&&(_[w]=g[w]);return{$$typeof:r,type:p,key:j,ref:C,props:_,_owner:u.current}}return Ws.Fragment=s,Ws.jsx=f,Ws.jsxs=f,Ws}var Ad;function Qp(){return Ad||(Ad=1,hl.exports=Yp()),hl.exports}var l=Qp(),A=zl();const Xp=_h(A);var ci={},pl={exports:{}},Tt={},ml={exports:{}},gl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dd;function Zp(){return Dd||(Dd=1,(function(a){function r(q,D){var U=q.length;q.push(D);e:for(;0<U;){var v=U-1>>>1,I=q[v];if(0<u(I,D))q[v]=D,q[U]=I,U=v;else break e}}function s(q){return q.length===0?null:q[0]}function o(q){if(q.length===0)return null;var D=q[0],U=q.pop();if(U!==D){q[0]=U;e:for(var v=0,I=q.length,R=I>>>1;v<R;){var J=2*(v+1)-1,ee=q[J],he=J+1,je=q[he];if(0>u(ee,U))he<I&&0>u(je,ee)?(q[v]=je,q[he]=U,v=he):(q[v]=ee,q[J]=U,v=J);else if(he<I&&0>u(je,U))q[v]=je,q[he]=U,v=he;else break e}}return D}function u(q,D){var U=q.sortIndex-D.sortIndex;return U!==0?U:q.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var f=Date,p=f.now();a.unstable_now=function(){return f.now()-p}}var g=[],y=[],w=1,_=null,j=3,C=!1,P=!1,E=!1,O=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(q){for(var D=s(y);D!==null;){if(D.callback===null)o(y);else if(D.startTime<=q)o(y),D.sortIndex=D.expirationTime,r(g,D);else break;D=s(y)}}function V(q){if(E=!1,M(q),!P)if(s(g)!==null)P=!0,L(ne);else{var D=s(y);D!==null&&fe(V,D.startTime-q)}}function ne(q,D){P=!1,E&&(E=!1,$(re),re=-1),C=!0;var U=j;try{for(M(D),_=s(g);_!==null&&(!(_.expirationTime>D)||q&&!ae());){var v=_.callback;if(typeof v=="function"){_.callback=null,j=_.priorityLevel;var I=v(_.expirationTime<=D);D=a.unstable_now(),typeof I=="function"?_.callback=I:_===s(g)&&o(g),M(D)}else o(g);_=s(g)}if(_!==null)var R=!0;else{var J=s(y);J!==null&&fe(V,J.startTime-D),R=!1}return R}finally{_=null,j=U,C=!1}}var B=!1,X=null,re=-1,ve=5,be=-1;function ae(){return!(a.unstable_now()-be<ve)}function Ee(){if(X!==null){var q=a.unstable_now();be=q;var D=!0;try{D=X(!0,q)}finally{D?ce():(B=!1,X=null)}}else B=!1}var ce;if(typeof z=="function")ce=function(){z(Ee)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ye=G.port2;G.port1.onmessage=Ee,ce=function(){ye.postMessage(null)}}else ce=function(){O(Ee,0)};function L(q){X=q,B||(B=!0,ce())}function fe(q,D){re=O(function(){q(a.unstable_now())},D)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(q){q.callback=null},a.unstable_continueExecution=function(){P||C||(P=!0,L(ne))},a.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<q?Math.floor(1e3/q):5},a.unstable_getCurrentPriorityLevel=function(){return j},a.unstable_getFirstCallbackNode=function(){return s(g)},a.unstable_next=function(q){switch(j){case 1:case 2:case 3:var D=3;break;default:D=j}var U=j;j=D;try{return q()}finally{j=U}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(q,D){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var U=j;j=q;try{return D()}finally{j=U}},a.unstable_scheduleCallback=function(q,D,U){var v=a.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?v+U:v):U=v,q){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=U+I,q={id:w++,callback:D,priorityLevel:q,startTime:U,expirationTime:I,sortIndex:-1},U>v?(q.sortIndex=U,r(y,q),s(g)===null&&q===s(y)&&(E?($(re),re=-1):E=!0,fe(V,U-v))):(q.sortIndex=I,r(g,q),P||C||(P=!0,L(ne))),q},a.unstable_shouldYield=ae,a.unstable_wrapCallback=function(q){var D=j;return function(){var U=j;j=D;try{return q.apply(this,arguments)}finally{j=U}}}})(gl)),gl}var Ld;function e0(){return Ld||(Ld=1,ml.exports=Zp()),ml.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d;function t0(){if($d)return Tt;$d=1;var a=zl(),r=e0();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function d(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},_={};function j(e){return g.call(_,e)?!0:g.call(w,e)?!1:y.test(e)?_[e]=!0:(w[e]=!0,!1)}function C(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function P(e,t,n,i){if(t===null||typeof t>"u"||C(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function E(e,t,n,i,c,h,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=m}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){O[e]=new E(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];O[t]=new E(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){O[e]=new E(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){O[e]=new E(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){O[e]=new E(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){O[e]=new E(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){O[e]=new E(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){O[e]=new E(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){O[e]=new E(e,5,!1,e.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function z(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($,z);O[t]=new E(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($,z);O[t]=new E(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($,z);O[t]=new E(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){O[e]=new E(e,1,!1,e.toLowerCase(),null,!1,!1)}),O.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){O[e]=new E(e,1,!1,e.toLowerCase(),null,!0,!0)});function M(e,t,n,i){var c=O.hasOwnProperty(t)?O[t]:null;(c!==null?c.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(P(t,n,c,i)&&(n=null),i||c===null?j(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,i=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var V=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),B=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),ve=Symbol.for("react.profiler"),be=Symbol.for("react.provider"),ae=Symbol.for("react.context"),Ee=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),ye=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),q=Symbol.iterator;function D(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var U=Object.assign,v;function I(e){if(v===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);v=t&&t[1]||""}return`
`+v+e}var R=!1;function J(e,t){if(!e||R)return"";R=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(T){var i=T}Reflect.construct(e,[],t)}else{try{t.call()}catch(T){i=T}e.call(t.prototype)}else{try{throw Error()}catch(T){i=T}e()}}catch(T){if(T&&i&&typeof T.stack=="string"){for(var c=T.stack.split(`
`),h=i.stack.split(`
`),m=c.length-1,x=h.length-1;1<=m&&0<=x&&c[m]!==h[x];)x--;for(;1<=m&&0<=x;m--,x--)if(c[m]!==h[x]){if(m!==1||x!==1)do if(m--,x--,0>x||c[m]!==h[x]){var b=`
`+c[m].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=m&&0<=x);break}}}finally{R=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?I(e):""}function ee(e){switch(e.tag){case 5:return I(e.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return e=J(e.type,!1),e;case 11:return e=J(e.type.render,!1),e;case 1:return e=J(e.type,!0),e;default:return""}}function he(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case X:return"Fragment";case B:return"Portal";case ve:return"Profiler";case re:return"StrictMode";case ce:return"Suspense";case G:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ae:return(e.displayName||"Context")+".Consumer";case be:return(e._context.displayName||"Context")+".Provider";case Ee:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ye:return t=e.displayName||null,t!==null?t:he(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return he(e(t))}catch{}}return null}function je(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(t);case 8:return t===re?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ke(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Te(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ze(e){var t=Te(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,h=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){i=""+m,h.call(this,m)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(m){i=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _t(e){e._valueTracker||(e._valueTracker=ze(e))}function hr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Te(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Wt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Q(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function De(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=ke(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function we(e,t){t=t.checked,t!=null&&M(e,"checked",t,!1)}function Ie(e,t){we(e,t);var n=ke(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ir(e,t.type,n):t.hasOwnProperty("defaultValue")&&ir(e,t.type,ke(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ht(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ir(e,t,n){(t!=="number"||Wt(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var fr=Array.isArray;function Pt(e,t,n,i){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ke(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Gr(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function F(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(s(92));if(fr(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ke(n)}}function Pe(e,t){var n=ke(t.value),i=ke(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Ke(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Z(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Z(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ot,Vt=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,c)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ot=Ot||document.createElement("div"),Ot.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ot.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function lt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},os=["Webkit","ms","Moz","O"];Object.keys(ft).forEach(function(e){os.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ft[t]=ft[e]})});function Gt(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ft.hasOwnProperty(e)&&ft[e]?(""+t).trim():t+"px"}function Jr(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,c=Gt(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,c):e[n]=c}}var ls=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Me(e,t){if(t){if(ls[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function pt(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _r=null;function jr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qe=null,vt=null,vn=null;function Gl(e){if(e=Ps(e)){if(typeof Qe!="function")throw Error(s(280));var t=e.stateNode;t&&(t=Sa(t),Qe(e.stateNode,e.type,t))}}function Jl(e){vt?vn?vn.push(e):vn=[e]:vt=e}function Yl(){if(vt){var e=vt,t=vn;if(vn=vt=null,Gl(e),t)for(e=0;e<t.length;e++)Gl(t[e])}}function Ql(e,t){return e(t)}function Xl(){}var Ci=!1;function Zl(e,t,n){if(Ci)return e(t,n);Ci=!0;try{return Ql(e,t,n)}finally{Ci=!1,(vt!==null||vn!==null)&&(Xl(),Yl())}}function us(e,t){var n=e.stateNode;if(n===null)return null;var i=Sa(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var Ti=!1;if(p)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){Ti=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{Ti=!1}function Zh(e,t,n,i,c,h,m,x,b){var T=Array.prototype.slice.call(arguments,3);try{t.apply(n,T)}catch(W){this.onError(W)}}var ds=!1,na=null,sa=!1,Pi=null,ef={onError:function(e){ds=!0,na=e}};function tf(e,t,n,i,c,h,m,x,b){ds=!1,na=null,Zh.apply(ef,arguments)}function rf(e,t,n,i,c,h,m,x,b){if(tf.apply(this,arguments),ds){if(ds){var T=na;ds=!1,na=null}else throw Error(s(198));sa||(sa=!0,Pi=T)}}function Yr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function eu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tu(e){if(Yr(e)!==e)throw Error(s(188))}function nf(e){var t=e.alternate;if(!t){if(t=Yr(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var c=n.return;if(c===null)break;var h=c.alternate;if(h===null){if(i=c.return,i!==null){n=i;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===n)return tu(c),e;if(h===i)return tu(c),t;h=h.sibling}throw Error(s(188))}if(n.return!==i.return)n=c,i=h;else{for(var m=!1,x=c.child;x;){if(x===n){m=!0,n=c,i=h;break}if(x===i){m=!0,i=c,n=h;break}x=x.sibling}if(!m){for(x=h.child;x;){if(x===n){m=!0,n=h,i=c;break}if(x===i){m=!0,i=h,n=c;break}x=x.sibling}if(!m)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function ru(e){return e=nf(e),e!==null?nu(e):null}function nu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nu(e);if(t!==null)return t;e=e.sibling}return null}var su=r.unstable_scheduleCallback,au=r.unstable_cancelCallback,sf=r.unstable_shouldYield,af=r.unstable_requestPaint,Je=r.unstable_now,of=r.unstable_getCurrentPriorityLevel,Oi=r.unstable_ImmediatePriority,iu=r.unstable_UserBlockingPriority,aa=r.unstable_NormalPriority,lf=r.unstable_LowPriority,ou=r.unstable_IdlePriority,ia=null,or=null;function uf(e){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(ia,e,void 0,(e.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:hf,cf=Math.log,df=Math.LN2;function hf(e){return e>>>=0,e===0?32:31-(cf(e)/df|0)|0}var oa=64,la=4194304;function hs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ua(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,c=e.suspendedLanes,h=e.pingedLanes,m=n&268435455;if(m!==0){var x=m&~c;x!==0?i=hs(x):(h&=m,h!==0&&(i=hs(h)))}else m=n&~c,m!==0?i=hs(m):h!==0&&(i=hs(h));if(i===0)return 0;if(t!==0&&t!==i&&(t&c)===0&&(c=i&-i,h=t&-t,c>=h||c===16&&(h&4194240)!==0))return t;if((i&4)!==0&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Jt(t),c=1<<n,i|=e[n],t&=~c;return i}function ff(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pf(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes;0<h;){var m=31-Jt(h),x=1<<m,b=c[m];b===-1?((x&n)===0||(x&i)!==0)&&(c[m]=ff(x,t)):b<=t&&(e.expiredLanes|=x),h&=~x}}function Ii(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lu(){var e=oa;return oa<<=1,(oa&4194240)===0&&(oa=64),e}function Ri(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function fs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jt(t),e[t]=n}function mf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var c=31-Jt(n),h=1<<c;t[c]=0,i[c]=-1,e[c]=-1,n&=~h}}function Ai(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Jt(n),c=1<<i;c&t|e[i]&t&&(e[i]|=t),n&=~c}}var Re=0;function uu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var cu,Di,du,hu,fu,Li=!1,ca=[],Sr=null,Nr=null,Er=null,ps=new Map,ms=new Map,Cr=[],gf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pu(e,t){switch(e){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":ps.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ms.delete(t.pointerId)}}function gs(e,t,n,i,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:h,targetContainers:[c]},t!==null&&(t=Ps(t),t!==null&&Di(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function yf(e,t,n,i,c){switch(t){case"focusin":return Sr=gs(Sr,e,t,n,i,c),!0;case"dragenter":return Nr=gs(Nr,e,t,n,i,c),!0;case"mouseover":return Er=gs(Er,e,t,n,i,c),!0;case"pointerover":var h=c.pointerId;return ps.set(h,gs(ps.get(h)||null,e,t,n,i,c)),!0;case"gotpointercapture":return h=c.pointerId,ms.set(h,gs(ms.get(h)||null,e,t,n,i,c)),!0}return!1}function mu(e){var t=Qr(e.target);if(t!==null){var n=Yr(t);if(n!==null){if(t=n.tag,t===13){if(t=eu(n),t!==null){e.blockedOn=t,fu(e.priority,function(){du(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function da(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ui(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);_r=i,n.target.dispatchEvent(i),_r=null}else return t=Ps(n),t!==null&&Di(t),e.blockedOn=n,!1;t.shift()}return!0}function gu(e,t,n){da(e)&&n.delete(t)}function xf(){Li=!1,Sr!==null&&da(Sr)&&(Sr=null),Nr!==null&&da(Nr)&&(Nr=null),Er!==null&&da(Er)&&(Er=null),ps.forEach(gu),ms.forEach(gu)}function ys(e,t){e.blockedOn===t&&(e.blockedOn=null,Li||(Li=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,xf)))}function xs(e){function t(c){return ys(c,e)}if(0<ca.length){ys(ca[0],e);for(var n=1;n<ca.length;n++){var i=ca[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Sr!==null&&ys(Sr,e),Nr!==null&&ys(Nr,e),Er!==null&&ys(Er,e),ps.forEach(t),ms.forEach(t),n=0;n<Cr.length;n++)i=Cr[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Cr.length&&(n=Cr[0],n.blockedOn===null);)mu(n),n.blockedOn===null&&Cr.shift()}var wn=V.ReactCurrentBatchConfig,ha=!0;function vf(e,t,n,i){var c=Re,h=wn.transition;wn.transition=null;try{Re=1,$i(e,t,n,i)}finally{Re=c,wn.transition=h}}function wf(e,t,n,i){var c=Re,h=wn.transition;wn.transition=null;try{Re=4,$i(e,t,n,i)}finally{Re=c,wn.transition=h}}function $i(e,t,n,i){if(ha){var c=Ui(e,t,n,i);if(c===null)to(e,t,i,fa,n),pu(e,i);else if(yf(c,e,t,n,i))i.stopPropagation();else if(pu(e,i),t&4&&-1<gf.indexOf(e)){for(;c!==null;){var h=Ps(c);if(h!==null&&cu(h),h=Ui(e,t,n,i),h===null&&to(e,t,i,fa,n),h===c)break;c=h}c!==null&&i.stopPropagation()}else to(e,t,i,null,n)}}var fa=null;function Ui(e,t,n,i){if(fa=null,e=jr(i),e=Qr(e),e!==null)if(t=Yr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=eu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fa=e,null}function yu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(of()){case Oi:return 1;case iu:return 4;case aa:case lf:return 16;case ou:return 536870912;default:return 16}default:return 16}}var Tr=null,zi=null,pa=null;function xu(){if(pa)return pa;var e,t=zi,n=t.length,i,c="value"in Tr?Tr.value:Tr.textContent,h=c.length;for(e=0;e<n&&t[e]===c[e];e++);var m=n-e;for(i=1;i<=m&&t[n-i]===c[h-i];i++);return pa=c.slice(e,1<i?1-i:void 0)}function ma(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ga(){return!0}function vu(){return!1}function It(e){function t(n,i,c,h,m){this._reactName=n,this._targetInst=c,this.type=i,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(n=e[x],this[x]=n?n(h):h[x]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ga:vu,this.isPropagationStopped=vu,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),t}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=It(bn),vs=U({},bn,{view:0,detail:0}),bf=It(vs),Bi,Fi,ws,ya=U({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ws&&(ws&&e.type==="mousemove"?(Bi=e.screenX-ws.screenX,Fi=e.screenY-ws.screenY):Fi=Bi=0,ws=e),Bi)},movementY:function(e){return"movementY"in e?e.movementY:Fi}}),wu=It(ya),kf=U({},ya,{dataTransfer:0}),_f=It(kf),jf=U({},vs,{relatedTarget:0}),Ki=It(jf),Sf=U({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Nf=It(Sf),Ef=U({},bn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cf=It(Ef),Tf=U({},bn,{data:0}),bu=It(Tf),Pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Of={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},If={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=If[e])?!!t[e]:!1}function qi(){return Rf}var Af=U({},vs,{key:function(e){if(e.key){var t=Pf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ma(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Of[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qi,charCode:function(e){return e.type==="keypress"?ma(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ma(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Df=It(Af),Lf=U({},ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ku=It(Lf),$f=U({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qi}),Uf=It($f),zf=U({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mf=It(zf),Bf=U({},ya,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ff=It(Bf),Kf=[9,13,27,32],Wi=p&&"CompositionEvent"in window,bs=null;p&&"documentMode"in document&&(bs=document.documentMode);var qf=p&&"TextEvent"in window&&!bs,_u=p&&(!Wi||bs&&8<bs&&11>=bs),ju=" ",Su=!1;function Nu(e,t){switch(e){case"keyup":return Kf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kn=!1;function Wf(e,t){switch(e){case"compositionend":return Eu(t);case"keypress":return t.which!==32?null:(Su=!0,ju);case"textInput":return e=t.data,e===ju&&Su?null:e;default:return null}}function Hf(e,t){if(kn)return e==="compositionend"||!Wi&&Nu(e,t)?(e=xu(),pa=zi=Tr=null,kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _u&&t.locale!=="ko"?null:t.data;default:return null}}var Vf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vf[e.type]:t==="textarea"}function Tu(e,t,n,i){Jl(i),t=ka(t,"onChange"),0<t.length&&(n=new Mi("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var ks=null,_s=null;function Gf(e){Vu(e,0)}function xa(e){var t=En(e);if(hr(t))return e}function Jf(e,t){if(e==="change")return t}var Pu=!1;if(p){var Hi;if(p){var Vi="oninput"in document;if(!Vi){var Ou=document.createElement("div");Ou.setAttribute("oninput","return;"),Vi=typeof Ou.oninput=="function"}Hi=Vi}else Hi=!1;Pu=Hi&&(!document.documentMode||9<document.documentMode)}function Iu(){ks&&(ks.detachEvent("onpropertychange",Ru),_s=ks=null)}function Ru(e){if(e.propertyName==="value"&&xa(_s)){var t=[];Tu(t,_s,e,jr(e)),Zl(Gf,t)}}function Yf(e,t,n){e==="focusin"?(Iu(),ks=t,_s=n,ks.attachEvent("onpropertychange",Ru)):e==="focusout"&&Iu()}function Qf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xa(_s)}function Xf(e,t){if(e==="click")return xa(t)}function Zf(e,t){if(e==="input"||e==="change")return xa(t)}function ep(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yt=typeof Object.is=="function"?Object.is:ep;function js(e,t){if(Yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var c=n[i];if(!g.call(t,c)||!Yt(e[c],t[c]))return!1}return!0}function Au(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Du(e,t){var n=Au(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Au(n)}}function Lu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Lu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $u(){for(var e=window,t=Wt();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wt(e.document)}return t}function Gi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tp(e){var t=$u(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Lu(n.ownerDocument.documentElement,n)){if(i!==null&&Gi(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=n.textContent.length,h=Math.min(i.start,c);i=i.end===void 0?h:Math.min(i.end,c),!e.extend&&h>i&&(c=i,i=h,h=c),c=Du(n,h);var m=Du(n,i);c&&m&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),h>i?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rp=p&&"documentMode"in document&&11>=document.documentMode,_n=null,Ji=null,Ss=null,Yi=!1;function Uu(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yi||_n==null||_n!==Wt(i)||(i=_n,"selectionStart"in i&&Gi(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ss&&js(Ss,i)||(Ss=i,i=ka(Ji,"onSelect"),0<i.length&&(t=new Mi("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=_n)))}function va(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jn={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionend:va("Transition","TransitionEnd")},Qi={},zu={};p&&(zu=document.createElement("div").style,"AnimationEvent"in window||(delete jn.animationend.animation,delete jn.animationiteration.animation,delete jn.animationstart.animation),"TransitionEvent"in window||delete jn.transitionend.transition);function wa(e){if(Qi[e])return Qi[e];if(!jn[e])return e;var t=jn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zu)return Qi[e]=t[n];return e}var Mu=wa("animationend"),Bu=wa("animationiteration"),Fu=wa("animationstart"),Ku=wa("transitionend"),qu=new Map,Wu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){qu.set(e,t),d(t,[e])}for(var Xi=0;Xi<Wu.length;Xi++){var Zi=Wu[Xi],np=Zi.toLowerCase(),sp=Zi[0].toUpperCase()+Zi.slice(1);Pr(np,"on"+sp)}Pr(Mu,"onAnimationEnd"),Pr(Bu,"onAnimationIteration"),Pr(Fu,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ku,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ap=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ns));function Hu(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,rf(i,t,void 0,e),e.currentTarget=null}function Vu(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],c=i.event;i=i.listeners;e:{var h=void 0;if(t)for(var m=i.length-1;0<=m;m--){var x=i[m],b=x.instance,T=x.currentTarget;if(x=x.listener,b!==h&&c.isPropagationStopped())break e;Hu(c,x,T),h=b}else for(m=0;m<i.length;m++){if(x=i[m],b=x.instance,T=x.currentTarget,x=x.listener,b!==h&&c.isPropagationStopped())break e;Hu(c,x,T),h=b}}}if(sa)throw e=Pi,sa=!1,Pi=null,e}function Be(e,t){var n=t[oo];n===void 0&&(n=t[oo]=new Set);var i=e+"__bubble";n.has(i)||(Gu(t,e,2,!1),n.add(i))}function eo(e,t,n){var i=0;t&&(i|=4),Gu(n,e,i,t)}var ba="_reactListening"+Math.random().toString(36).slice(2);function Es(e){if(!e[ba]){e[ba]=!0,o.forEach(function(n){n!=="selectionchange"&&(ap.has(n)||eo(n,!1,e),eo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ba]||(t[ba]=!0,eo("selectionchange",!1,t))}}function Gu(e,t,n,i){switch(yu(t)){case 1:var c=vf;break;case 4:c=wf;break;default:c=$i}n=c.bind(null,t,n,e),c=void 0,!Ti||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function to(e,t,n,i,c){var h=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var x=i.stateNode.containerInfo;if(x===c||x.nodeType===8&&x.parentNode===c)break;if(m===4)for(m=i.return;m!==null;){var b=m.tag;if((b===3||b===4)&&(b=m.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;m=m.return}for(;x!==null;){if(m=Qr(x),m===null)return;if(b=m.tag,b===5||b===6){i=h=m;continue e}x=x.parentNode}}i=i.return}Zl(function(){var T=h,W=jr(n),H=[];e:{var K=qu.get(e);if(K!==void 0){var te=Mi,ie=e;switch(e){case"keypress":if(ma(n)===0)break e;case"keydown":case"keyup":te=Df;break;case"focusin":ie="focus",te=Ki;break;case"focusout":ie="blur",te=Ki;break;case"beforeblur":case"afterblur":te=Ki;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=wu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=_f;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Uf;break;case Mu:case Bu:case Fu:te=Nf;break;case Ku:te=Mf;break;case"scroll":te=bf;break;case"wheel":te=Ff;break;case"copy":case"cut":case"paste":te=Cf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=ku}var le=(t&4)!==0,Ye=!le&&e==="scroll",S=le?K!==null?K+"Capture":null:K;le=[];for(var k=T,N;k!==null;){N=k;var Y=N.stateNode;if(N.tag===5&&Y!==null&&(N=Y,S!==null&&(Y=us(k,S),Y!=null&&le.push(Cs(k,Y,N)))),Ye)break;k=k.return}0<le.length&&(K=new te(K,ie,null,n,W),H.push({event:K,listeners:le}))}}if((t&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",te=e==="mouseout"||e==="pointerout",K&&n!==_r&&(ie=n.relatedTarget||n.fromElement)&&(Qr(ie)||ie[pr]))break e;if((te||K)&&(K=W.window===W?W:(K=W.ownerDocument)?K.defaultView||K.parentWindow:window,te?(ie=n.relatedTarget||n.toElement,te=T,ie=ie?Qr(ie):null,ie!==null&&(Ye=Yr(ie),ie!==Ye||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(te=null,ie=T),te!==ie)){if(le=wu,Y="onMouseLeave",S="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(le=ku,Y="onPointerLeave",S="onPointerEnter",k="pointer"),Ye=te==null?K:En(te),N=ie==null?K:En(ie),K=new le(Y,k+"leave",te,n,W),K.target=Ye,K.relatedTarget=N,Y=null,Qr(W)===T&&(le=new le(S,k+"enter",ie,n,W),le.target=N,le.relatedTarget=Ye,Y=le),Ye=Y,te&&ie)t:{for(le=te,S=ie,k=0,N=le;N;N=Sn(N))k++;for(N=0,Y=S;Y;Y=Sn(Y))N++;for(;0<k-N;)le=Sn(le),k--;for(;0<N-k;)S=Sn(S),N--;for(;k--;){if(le===S||S!==null&&le===S.alternate)break t;le=Sn(le),S=Sn(S)}le=null}else le=null;te!==null&&Ju(H,K,te,le,!1),ie!==null&&Ye!==null&&Ju(H,Ye,ie,le,!0)}}e:{if(K=T?En(T):window,te=K.nodeName&&K.nodeName.toLowerCase(),te==="select"||te==="input"&&K.type==="file")var ue=Jf;else if(Cu(K))if(Pu)ue=Zf;else{ue=Qf;var pe=Yf}else(te=K.nodeName)&&te.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(ue=Xf);if(ue&&(ue=ue(e,T))){Tu(H,ue,n,W);break e}pe&&pe(e,K,T),e==="focusout"&&(pe=K._wrapperState)&&pe.controlled&&K.type==="number"&&ir(K,"number",K.value)}switch(pe=T?En(T):window,e){case"focusin":(Cu(pe)||pe.contentEditable==="true")&&(_n=pe,Ji=T,Ss=null);break;case"focusout":Ss=Ji=_n=null;break;case"mousedown":Yi=!0;break;case"contextmenu":case"mouseup":case"dragend":Yi=!1,Uu(H,n,W);break;case"selectionchange":if(rp)break;case"keydown":case"keyup":Uu(H,n,W)}var me;if(Wi)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else kn?Nu(e,n)&&(xe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(xe="onCompositionStart");xe&&(_u&&n.locale!=="ko"&&(kn||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&kn&&(me=xu()):(Tr=W,zi="value"in Tr?Tr.value:Tr.textContent,kn=!0)),pe=ka(T,xe),0<pe.length&&(xe=new bu(xe,e,null,n,W),H.push({event:xe,listeners:pe}),me?xe.data=me:(me=Eu(n),me!==null&&(xe.data=me)))),(me=qf?Wf(e,n):Hf(e,n))&&(T=ka(T,"onBeforeInput"),0<T.length&&(W=new bu("onBeforeInput","beforeinput",null,n,W),H.push({event:W,listeners:T}),W.data=me))}Vu(H,t)})}function Cs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ka(e,t){for(var n=t+"Capture",i=[];e!==null;){var c=e,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=us(e,n),h!=null&&i.unshift(Cs(e,h,c)),h=us(e,t),h!=null&&i.push(Cs(e,h,c))),e=e.return}return i}function Sn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ju(e,t,n,i,c){for(var h=t._reactName,m=[];n!==null&&n!==i;){var x=n,b=x.alternate,T=x.stateNode;if(b!==null&&b===i)break;x.tag===5&&T!==null&&(x=T,c?(b=us(n,h),b!=null&&m.unshift(Cs(n,b,x))):c||(b=us(n,h),b!=null&&m.push(Cs(n,b,x)))),n=n.return}m.length!==0&&e.push({event:t,listeners:m})}var ip=/\r\n?/g,op=/\u0000|\uFFFD/g;function Yu(e){return(typeof e=="string"?e:""+e).replace(ip,`
`).replace(op,"")}function _a(e,t,n){if(t=Yu(t),Yu(e)!==t&&n)throw Error(s(425))}function ja(){}var ro=null,no=null;function so(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ao=typeof setTimeout=="function"?setTimeout:void 0,lp=typeof clearTimeout=="function"?clearTimeout:void 0,Qu=typeof Promise=="function"?Promise:void 0,up=typeof queueMicrotask=="function"?queueMicrotask:typeof Qu<"u"?function(e){return Qu.resolve(null).then(e).catch(cp)}:ao;function cp(e){setTimeout(function(){throw e})}function io(e,t){var n=t,i=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(i===0){e.removeChild(c),xs(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=c}while(n);xs(t)}function Or(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Nn=Math.random().toString(36).slice(2),lr="__reactFiber$"+Nn,Ts="__reactProps$"+Nn,pr="__reactContainer$"+Nn,oo="__reactEvents$"+Nn,dp="__reactListeners$"+Nn,hp="__reactHandles$"+Nn;function Qr(e){var t=e[lr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[lr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Xu(e);e!==null;){if(n=e[lr])return n;e=Xu(e)}return t}e=n,n=e.parentNode}return null}function Ps(e){return e=e[lr]||e[pr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function En(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Sa(e){return e[Ts]||null}var lo=[],Cn=-1;function Ir(e){return{current:e}}function Fe(e){0>Cn||(e.current=lo[Cn],lo[Cn]=null,Cn--)}function $e(e,t){Cn++,lo[Cn]=e.current,e.current=t}var Rr={},mt=Ir(Rr),jt=Ir(!1),Xr=Rr;function Tn(e,t){var n=e.type.contextTypes;if(!n)return Rr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in n)c[h]=t[h];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function St(e){return e=e.childContextTypes,e!=null}function Na(){Fe(jt),Fe(mt)}function Zu(e,t,n){if(mt.current!==Rr)throw Error(s(168));$e(mt,t),$e(jt,n)}function ec(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var c in i)if(!(c in t))throw Error(s(108,je(e)||"Unknown",c));return U({},n,i)}function Ea(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rr,Xr=mt.current,$e(mt,e),$e(jt,jt.current),!0}function tc(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=ec(e,t,Xr),i.__reactInternalMemoizedMergedChildContext=e,Fe(jt),Fe(mt),$e(mt,e)):Fe(jt),$e(jt,n)}var mr=null,Ca=!1,uo=!1;function rc(e){mr===null?mr=[e]:mr.push(e)}function fp(e){Ca=!0,rc(e)}function Ar(){if(!uo&&mr!==null){uo=!0;var e=0,t=Re;try{var n=mr;for(Re=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}mr=null,Ca=!1}catch(c){throw mr!==null&&(mr=mr.slice(e+1)),su(Oi,Ar),c}finally{Re=t,uo=!1}}return null}var Pn=[],On=0,Ta=null,Pa=0,zt=[],Mt=0,Zr=null,gr=1,yr="";function en(e,t){Pn[On++]=Pa,Pn[On++]=Ta,Ta=e,Pa=t}function nc(e,t,n){zt[Mt++]=gr,zt[Mt++]=yr,zt[Mt++]=Zr,Zr=e;var i=gr;e=yr;var c=32-Jt(i)-1;i&=~(1<<c),n+=1;var h=32-Jt(t)+c;if(30<h){var m=c-c%5;h=(i&(1<<m)-1).toString(32),i>>=m,c-=m,gr=1<<32-Jt(t)+c|n<<c|i,yr=h+e}else gr=1<<h|n<<c|i,yr=e}function co(e){e.return!==null&&(en(e,1),nc(e,1,0))}function ho(e){for(;e===Ta;)Ta=Pn[--On],Pn[On]=null,Pa=Pn[--On],Pn[On]=null;for(;e===Zr;)Zr=zt[--Mt],zt[Mt]=null,yr=zt[--Mt],zt[Mt]=null,gr=zt[--Mt],zt[Mt]=null}var Rt=null,At=null,qe=!1,Qt=null;function sc(e,t){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ac(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rt=e,At=Or(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rt=e,At=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Zr!==null?{id:gr,overflow:yr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Rt=e,At=null,!0):!1;default:return!1}}function fo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function po(e){if(qe){var t=At;if(t){var n=t;if(!ac(e,t)){if(fo(e))throw Error(s(418));t=Or(n.nextSibling);var i=Rt;t&&ac(e,t)?sc(i,n):(e.flags=e.flags&-4097|2,qe=!1,Rt=e)}}else{if(fo(e))throw Error(s(418));e.flags=e.flags&-4097|2,qe=!1,Rt=e}}}function ic(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rt=e}function Oa(e){if(e!==Rt)return!1;if(!qe)return ic(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!so(e.type,e.memoizedProps)),t&&(t=At)){if(fo(e))throw oc(),Error(s(418));for(;t;)sc(e,t),t=Or(t.nextSibling)}if(ic(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){At=Or(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}At=null}}else At=Rt?Or(e.stateNode.nextSibling):null;return!0}function oc(){for(var e=At;e;)e=Or(e.nextSibling)}function In(){At=Rt=null,qe=!1}function mo(e){Qt===null?Qt=[e]:Qt.push(e)}var pp=V.ReactCurrentBatchConfig;function Os(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var c=i,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(m){var x=c.refs;m===null?delete x[h]:x[h]=m},t._stringRef=h,t)}if(typeof e!="string")throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ia(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lc(e){var t=e._init;return t(e._payload)}function uc(e){function t(S,k){if(e){var N=S.deletions;N===null?(S.deletions=[k],S.flags|=16):N.push(k)}}function n(S,k){if(!e)return null;for(;k!==null;)t(S,k),k=k.sibling;return null}function i(S,k){for(S=new Map;k!==null;)k.key!==null?S.set(k.key,k):S.set(k.index,k),k=k.sibling;return S}function c(S,k){return S=Fr(S,k),S.index=0,S.sibling=null,S}function h(S,k,N){return S.index=N,e?(N=S.alternate,N!==null?(N=N.index,N<k?(S.flags|=2,k):N):(S.flags|=2,k)):(S.flags|=1048576,k)}function m(S){return e&&S.alternate===null&&(S.flags|=2),S}function x(S,k,N,Y){return k===null||k.tag!==6?(k=il(N,S.mode,Y),k.return=S,k):(k=c(k,N),k.return=S,k)}function b(S,k,N,Y){var ue=N.type;return ue===X?W(S,k,N.props.children,Y,N.key):k!==null&&(k.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===L&&lc(ue)===k.type)?(Y=c(k,N.props),Y.ref=Os(S,k,N),Y.return=S,Y):(Y=ri(N.type,N.key,N.props,null,S.mode,Y),Y.ref=Os(S,k,N),Y.return=S,Y)}function T(S,k,N,Y){return k===null||k.tag!==4||k.stateNode.containerInfo!==N.containerInfo||k.stateNode.implementation!==N.implementation?(k=ol(N,S.mode,Y),k.return=S,k):(k=c(k,N.children||[]),k.return=S,k)}function W(S,k,N,Y,ue){return k===null||k.tag!==7?(k=un(N,S.mode,Y,ue),k.return=S,k):(k=c(k,N),k.return=S,k)}function H(S,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return k=il(""+k,S.mode,N),k.return=S,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ne:return N=ri(k.type,k.key,k.props,null,S.mode,N),N.ref=Os(S,null,k),N.return=S,N;case B:return k=ol(k,S.mode,N),k.return=S,k;case L:var Y=k._init;return H(S,Y(k._payload),N)}if(fr(k)||D(k))return k=un(k,S.mode,N,null),k.return=S,k;Ia(S,k)}return null}function K(S,k,N,Y){var ue=k!==null?k.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return ue!==null?null:x(S,k,""+N,Y);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ne:return N.key===ue?b(S,k,N,Y):null;case B:return N.key===ue?T(S,k,N,Y):null;case L:return ue=N._init,K(S,k,ue(N._payload),Y)}if(fr(N)||D(N))return ue!==null?null:W(S,k,N,Y,null);Ia(S,N)}return null}function te(S,k,N,Y,ue){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return S=S.get(N)||null,x(k,S,""+Y,ue);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case ne:return S=S.get(Y.key===null?N:Y.key)||null,b(k,S,Y,ue);case B:return S=S.get(Y.key===null?N:Y.key)||null,T(k,S,Y,ue);case L:var pe=Y._init;return te(S,k,N,pe(Y._payload),ue)}if(fr(Y)||D(Y))return S=S.get(N)||null,W(k,S,Y,ue,null);Ia(k,Y)}return null}function ie(S,k,N,Y){for(var ue=null,pe=null,me=k,xe=k=0,it=null;me!==null&&xe<N.length;xe++){me.index>xe?(it=me,me=null):it=me.sibling;var Oe=K(S,me,N[xe],Y);if(Oe===null){me===null&&(me=it);break}e&&me&&Oe.alternate===null&&t(S,me),k=h(Oe,k,xe),pe===null?ue=Oe:pe.sibling=Oe,pe=Oe,me=it}if(xe===N.length)return n(S,me),qe&&en(S,xe),ue;if(me===null){for(;xe<N.length;xe++)me=H(S,N[xe],Y),me!==null&&(k=h(me,k,xe),pe===null?ue=me:pe.sibling=me,pe=me);return qe&&en(S,xe),ue}for(me=i(S,me);xe<N.length;xe++)it=te(me,S,xe,N[xe],Y),it!==null&&(e&&it.alternate!==null&&me.delete(it.key===null?xe:it.key),k=h(it,k,xe),pe===null?ue=it:pe.sibling=it,pe=it);return e&&me.forEach(function(Kr){return t(S,Kr)}),qe&&en(S,xe),ue}function le(S,k,N,Y){var ue=D(N);if(typeof ue!="function")throw Error(s(150));if(N=ue.call(N),N==null)throw Error(s(151));for(var pe=ue=null,me=k,xe=k=0,it=null,Oe=N.next();me!==null&&!Oe.done;xe++,Oe=N.next()){me.index>xe?(it=me,me=null):it=me.sibling;var Kr=K(S,me,Oe.value,Y);if(Kr===null){me===null&&(me=it);break}e&&me&&Kr.alternate===null&&t(S,me),k=h(Kr,k,xe),pe===null?ue=Kr:pe.sibling=Kr,pe=Kr,me=it}if(Oe.done)return n(S,me),qe&&en(S,xe),ue;if(me===null){for(;!Oe.done;xe++,Oe=N.next())Oe=H(S,Oe.value,Y),Oe!==null&&(k=h(Oe,k,xe),pe===null?ue=Oe:pe.sibling=Oe,pe=Oe);return qe&&en(S,xe),ue}for(me=i(S,me);!Oe.done;xe++,Oe=N.next())Oe=te(me,S,xe,Oe.value,Y),Oe!==null&&(e&&Oe.alternate!==null&&me.delete(Oe.key===null?xe:Oe.key),k=h(Oe,k,xe),pe===null?ue=Oe:pe.sibling=Oe,pe=Oe);return e&&me.forEach(function(Vp){return t(S,Vp)}),qe&&en(S,xe),ue}function Ye(S,k,N,Y){if(typeof N=="object"&&N!==null&&N.type===X&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case ne:e:{for(var ue=N.key,pe=k;pe!==null;){if(pe.key===ue){if(ue=N.type,ue===X){if(pe.tag===7){n(S,pe.sibling),k=c(pe,N.props.children),k.return=S,S=k;break e}}else if(pe.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===L&&lc(ue)===pe.type){n(S,pe.sibling),k=c(pe,N.props),k.ref=Os(S,pe,N),k.return=S,S=k;break e}n(S,pe);break}else t(S,pe);pe=pe.sibling}N.type===X?(k=un(N.props.children,S.mode,Y,N.key),k.return=S,S=k):(Y=ri(N.type,N.key,N.props,null,S.mode,Y),Y.ref=Os(S,k,N),Y.return=S,S=Y)}return m(S);case B:e:{for(pe=N.key;k!==null;){if(k.key===pe)if(k.tag===4&&k.stateNode.containerInfo===N.containerInfo&&k.stateNode.implementation===N.implementation){n(S,k.sibling),k=c(k,N.children||[]),k.return=S,S=k;break e}else{n(S,k);break}else t(S,k);k=k.sibling}k=ol(N,S.mode,Y),k.return=S,S=k}return m(S);case L:return pe=N._init,Ye(S,k,pe(N._payload),Y)}if(fr(N))return ie(S,k,N,Y);if(D(N))return le(S,k,N,Y);Ia(S,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,k!==null&&k.tag===6?(n(S,k.sibling),k=c(k,N),k.return=S,S=k):(n(S,k),k=il(N,S.mode,Y),k.return=S,S=k),m(S)):n(S,k)}return Ye}var Rn=uc(!0),cc=uc(!1),Ra=Ir(null),Aa=null,An=null,go=null;function yo(){go=An=Aa=null}function xo(e){var t=Ra.current;Fe(Ra),e._currentValue=t}function vo(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Dn(e,t){Aa=e,go=An=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Nt=!0),e.firstContext=null)}function Bt(e){var t=e._currentValue;if(go!==e)if(e={context:e,memoizedValue:t,next:null},An===null){if(Aa===null)throw Error(s(308));An=e,Aa.dependencies={lanes:0,firstContext:e}}else An=An.next=e;return t}var tn=null;function wo(e){tn===null?tn=[e]:tn.push(e)}function dc(e,t,n,i){var c=t.interleaved;return c===null?(n.next=n,wo(t)):(n.next=c.next,c.next=n),t.interleaved=n,xr(e,i)}function xr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Dr=!1;function bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lr(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Ce&2)!==0){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,xr(e,n)}return c=i.interleaved,c===null?(t.next=t,wo(i)):(t.next=c.next,c.next=t),i.interleaved=t,xr(e,n)}function Da(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Ai(e,n)}}function fc(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var c=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var m={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?c=h=m:h=h.next=m,n=n.next}while(n!==null);h===null?c=h=t:h=h.next=t}else c=h=t;n={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function La(e,t,n,i){var c=e.updateQueue;Dr=!1;var h=c.firstBaseUpdate,m=c.lastBaseUpdate,x=c.shared.pending;if(x!==null){c.shared.pending=null;var b=x,T=b.next;b.next=null,m===null?h=T:m.next=T,m=b;var W=e.alternate;W!==null&&(W=W.updateQueue,x=W.lastBaseUpdate,x!==m&&(x===null?W.firstBaseUpdate=T:x.next=T,W.lastBaseUpdate=b))}if(h!==null){var H=c.baseState;m=0,W=T=b=null,x=h;do{var K=x.lane,te=x.eventTime;if((i&K)===K){W!==null&&(W=W.next={eventTime:te,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var ie=e,le=x;switch(K=t,te=n,le.tag){case 1:if(ie=le.payload,typeof ie=="function"){H=ie.call(te,H,K);break e}H=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=le.payload,K=typeof ie=="function"?ie.call(te,H,K):ie,K==null)break e;H=U({},H,K);break e;case 2:Dr=!0}}x.callback!==null&&x.lane!==0&&(e.flags|=64,K=c.effects,K===null?c.effects=[x]:K.push(x))}else te={eventTime:te,lane:K,tag:x.tag,payload:x.payload,callback:x.callback,next:null},W===null?(T=W=te,b=H):W=W.next=te,m|=K;if(x=x.next,x===null){if(x=c.shared.pending,x===null)break;K=x,x=K.next,K.next=null,c.lastBaseUpdate=K,c.shared.pending=null}}while(!0);if(W===null&&(b=H),c.baseState=b,c.firstBaseUpdate=T,c.lastBaseUpdate=W,t=c.shared.interleaved,t!==null){c=t;do m|=c.lane,c=c.next;while(c!==t)}else h===null&&(c.shared.lanes=0);sn|=m,e.lanes=m,e.memoizedState=H}}function pc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],c=i.callback;if(c!==null){if(i.callback=null,i=n,typeof c!="function")throw Error(s(191,c));c.call(i)}}}var Is={},ur=Ir(Is),Rs=Ir(Is),As=Ir(Is);function rn(e){if(e===Is)throw Error(s(174));return e}function ko(e,t){switch($e(As,t),$e(Rs,e),$e(ur,Is),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Le(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Le(t,e)}Fe(ur),$e(ur,t)}function Ln(){Fe(ur),Fe(Rs),Fe(As)}function mc(e){rn(As.current);var t=rn(ur.current),n=Le(t,e.type);t!==n&&($e(Rs,e),$e(ur,n))}function _o(e){Rs.current===e&&(Fe(ur),Fe(Rs))}var We=Ir(0);function $a(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jo=[];function So(){for(var e=0;e<jo.length;e++)jo[e]._workInProgressVersionPrimary=null;jo.length=0}var Ua=V.ReactCurrentDispatcher,No=V.ReactCurrentBatchConfig,nn=0,He=null,tt=null,st=null,za=!1,Ds=!1,Ls=0,mp=0;function gt(){throw Error(s(321))}function Eo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yt(e[n],t[n]))return!1;return!0}function Co(e,t,n,i,c,h){if(nn=h,He=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ua.current=e===null||e.memoizedState===null?vp:wp,e=n(i,c),Ds){h=0;do{if(Ds=!1,Ls=0,25<=h)throw Error(s(301));h+=1,st=tt=null,t.updateQueue=null,Ua.current=bp,e=n(i,c)}while(Ds)}if(Ua.current=Fa,t=tt!==null&&tt.next!==null,nn=0,st=tt=He=null,za=!1,t)throw Error(s(300));return e}function To(){var e=Ls!==0;return Ls=0,e}function cr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?He.memoizedState=st=e:st=st.next=e,st}function Ft(){if(tt===null){var e=He.alternate;e=e!==null?e.memoizedState:null}else e=tt.next;var t=st===null?He.memoizedState:st.next;if(t!==null)st=t,tt=e;else{if(e===null)throw Error(s(310));tt=e,e={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},st===null?He.memoizedState=st=e:st=st.next=e}return st}function $s(e,t){return typeof t=="function"?t(e):t}function Po(e){var t=Ft(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var i=tt,c=i.baseQueue,h=n.pending;if(h!==null){if(c!==null){var m=c.next;c.next=h.next,h.next=m}i.baseQueue=c=h,n.pending=null}if(c!==null){h=c.next,i=i.baseState;var x=m=null,b=null,T=h;do{var W=T.lane;if((nn&W)===W)b!==null&&(b=b.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),i=T.hasEagerState?T.eagerState:e(i,T.action);else{var H={lane:W,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};b===null?(x=b=H,m=i):b=b.next=H,He.lanes|=W,sn|=W}T=T.next}while(T!==null&&T!==h);b===null?m=i:b.next=x,Yt(i,t.memoizedState)||(Nt=!0),t.memoizedState=i,t.baseState=m,t.baseQueue=b,n.lastRenderedState=i}if(e=n.interleaved,e!==null){c=e;do h=c.lane,He.lanes|=h,sn|=h,c=c.next;while(c!==e)}else c===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oo(e){var t=Ft(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,c=n.pending,h=t.memoizedState;if(c!==null){n.pending=null;var m=c=c.next;do h=e(h,m.action),m=m.next;while(m!==c);Yt(h,t.memoizedState)||(Nt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,i]}function gc(){}function yc(e,t){var n=He,i=Ft(),c=t(),h=!Yt(i.memoizedState,c);if(h&&(i.memoizedState=c,Nt=!0),i=i.queue,Io(wc.bind(null,n,i,e),[e]),i.getSnapshot!==t||h||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,Us(9,vc.bind(null,n,i,c,t),void 0,null),at===null)throw Error(s(349));(nn&30)!==0||xc(n,t,c)}return c}function xc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function vc(e,t,n,i){t.value=n,t.getSnapshot=i,bc(t)&&kc(e)}function wc(e,t,n){return n(function(){bc(t)&&kc(e)})}function bc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yt(e,n)}catch{return!0}}function kc(e){var t=xr(e,1);t!==null&&tr(t,e,1,-1)}function _c(e){var t=cr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:e},t.queue=e,e=e.dispatch=xp.bind(null,He,e),[t.memoizedState,e]}function Us(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function jc(){return Ft().memoizedState}function Ma(e,t,n,i){var c=cr();He.flags|=e,c.memoizedState=Us(1|t,n,void 0,i===void 0?null:i)}function Ba(e,t,n,i){var c=Ft();i=i===void 0?null:i;var h=void 0;if(tt!==null){var m=tt.memoizedState;if(h=m.destroy,i!==null&&Eo(i,m.deps)){c.memoizedState=Us(t,n,h,i);return}}He.flags|=e,c.memoizedState=Us(1|t,n,h,i)}function Sc(e,t){return Ma(8390656,8,e,t)}function Io(e,t){return Ba(2048,8,e,t)}function Nc(e,t){return Ba(4,2,e,t)}function Ec(e,t){return Ba(4,4,e,t)}function Cc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Tc(e,t,n){return n=n!=null?n.concat([e]):null,Ba(4,4,Cc.bind(null,t,e),n)}function Ro(){}function Pc(e,t){var n=Ft();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Eo(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Oc(e,t){var n=Ft();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Eo(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ic(e,t,n){return(nn&21)===0?(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=n):(Yt(n,t)||(n=lu(),He.lanes|=n,sn|=n,e.baseState=!0),t)}function gp(e,t){var n=Re;Re=n!==0&&4>n?n:4,e(!0);var i=No.transition;No.transition={};try{e(!1),t()}finally{Re=n,No.transition=i}}function Rc(){return Ft().memoizedState}function yp(e,t,n){var i=Mr(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ac(e))Dc(t,n);else if(n=dc(e,t,n,i),n!==null){var c=bt();tr(n,e,i,c),Lc(n,t,i)}}function xp(e,t,n){var i=Mr(e),c={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ac(e))Dc(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var m=t.lastRenderedState,x=h(m,n);if(c.hasEagerState=!0,c.eagerState=x,Yt(x,m)){var b=t.interleaved;b===null?(c.next=c,wo(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}n=dc(e,t,c,i),n!==null&&(c=bt(),tr(n,e,i,c),Lc(n,t,i))}}function Ac(e){var t=e.alternate;return e===He||t!==null&&t===He}function Dc(e,t){Ds=za=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Lc(e,t,n){if((n&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Ai(e,n)}}var Fa={readContext:Bt,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},vp={readContext:Bt,useCallback:function(e,t){return cr().memoizedState=[e,t===void 0?null:t],e},useContext:Bt,useEffect:Sc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ma(4194308,4,Cc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=cr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=cr();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=yp.bind(null,He,e),[i.memoizedState,e]},useRef:function(e){var t=cr();return e={current:e},t.memoizedState=e},useState:_c,useDebugValue:Ro,useDeferredValue:function(e){return cr().memoizedState=e},useTransition:function(){var e=_c(!1),t=e[0];return e=gp.bind(null,e[1]),cr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=He,c=cr();if(qe){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),at===null)throw Error(s(349));(nn&30)!==0||xc(i,t,n)}c.memoizedState=n;var h={value:n,getSnapshot:t};return c.queue=h,Sc(wc.bind(null,i,h,e),[e]),i.flags|=2048,Us(9,vc.bind(null,i,h,n,t),void 0,null),n},useId:function(){var e=cr(),t=at.identifierPrefix;if(qe){var n=yr,i=gr;n=(i&~(1<<32-Jt(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ls++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=mp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wp={readContext:Bt,useCallback:Pc,useContext:Bt,useEffect:Io,useImperativeHandle:Tc,useInsertionEffect:Nc,useLayoutEffect:Ec,useMemo:Oc,useReducer:Po,useRef:jc,useState:function(){return Po($s)},useDebugValue:Ro,useDeferredValue:function(e){var t=Ft();return Ic(t,tt.memoizedState,e)},useTransition:function(){var e=Po($s)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:gc,useSyncExternalStore:yc,useId:Rc,unstable_isNewReconciler:!1},bp={readContext:Bt,useCallback:Pc,useContext:Bt,useEffect:Io,useImperativeHandle:Tc,useInsertionEffect:Nc,useLayoutEffect:Ec,useMemo:Oc,useReducer:Oo,useRef:jc,useState:function(){return Oo($s)},useDebugValue:Ro,useDeferredValue:function(e){var t=Ft();return tt===null?t.memoizedState=e:Ic(t,tt.memoizedState,e)},useTransition:function(){var e=Oo($s)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:gc,useSyncExternalStore:yc,useId:Rc,unstable_isNewReconciler:!1};function Xt(e,t){if(e&&e.defaultProps){t=U({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ao(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:U({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ka={isMounted:function(e){return(e=e._reactInternals)?Yr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=bt(),c=Mr(e),h=vr(i,c);h.payload=t,n!=null&&(h.callback=n),t=Lr(e,h,c),t!==null&&(tr(t,e,c,i),Da(t,e,c))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=bt(),c=Mr(e),h=vr(i,c);h.tag=1,h.payload=t,n!=null&&(h.callback=n),t=Lr(e,h,c),t!==null&&(tr(t,e,c,i),Da(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=bt(),i=Mr(e),c=vr(n,i);c.tag=2,t!=null&&(c.callback=t),t=Lr(e,c,i),t!==null&&(tr(t,e,i,n),Da(t,e,i))}};function $c(e,t,n,i,c,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,h,m):t.prototype&&t.prototype.isPureReactComponent?!js(n,i)||!js(c,h):!0}function Uc(e,t,n){var i=!1,c=Rr,h=t.contextType;return typeof h=="object"&&h!==null?h=Bt(h):(c=St(t)?Xr:mt.current,i=t.contextTypes,h=(i=i!=null)?Tn(e,c):Rr),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ka,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=h),t}function zc(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Ka.enqueueReplaceState(t,t.state,null)}function Do(e,t,n,i){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs={},bo(e);var h=t.contextType;typeof h=="object"&&h!==null?c.context=Bt(h):(h=St(t)?Xr:mt.current,c.context=Tn(e,h)),c.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(Ao(e,t,h,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Ka.enqueueReplaceState(c,c.state,null),La(e,n,c,i),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function $n(e,t){try{var n="",i=t;do n+=ee(i),i=i.return;while(i);var c=n}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:c,digest:null}}function Lo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $o(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var kp=typeof WeakMap=="function"?WeakMap:Map;function Mc(e,t,n){n=vr(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Ya||(Ya=!0,Xo=i),$o(e,t)},n}function Bc(e,t,n){n=vr(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var c=t.value;n.payload=function(){return i(c)},n.callback=function(){$o(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){$o(e,t),typeof i!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),n}function Fc(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new kp;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(n)||(c.add(n),e=Lp.bind(null,e,t,n),t.then(e,e))}function Kc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qc(e,t,n,i,c){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=vr(-1,1),t.tag=2,Lr(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var _p=V.ReactCurrentOwner,Nt=!1;function wt(e,t,n,i){t.child=e===null?cc(t,null,n,i):Rn(t,e.child,n,i)}function Wc(e,t,n,i,c){n=n.render;var h=t.ref;return Dn(t,c),i=Co(e,t,n,i,h,c),n=To(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,wr(e,t,c)):(qe&&n&&co(t),t.flags|=1,wt(e,t,i,c),t.child)}function Hc(e,t,n,i,c){if(e===null){var h=n.type;return typeof h=="function"&&!al(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,Vc(e,t,h,i,c)):(e=ri(n.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&c)===0){var m=h.memoizedProps;if(n=n.compare,n=n!==null?n:js,n(m,i)&&e.ref===t.ref)return wr(e,t,c)}return t.flags|=1,e=Fr(h,i),e.ref=t.ref,e.return=t,t.child=e}function Vc(e,t,n,i,c){if(e!==null){var h=e.memoizedProps;if(js(h,i)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=i=h,(e.lanes&c)!==0)(e.flags&131072)!==0&&(Nt=!0);else return t.lanes=e.lanes,wr(e,t,c)}return Uo(e,t,n,i,c)}function Gc(e,t,n){var i=t.pendingProps,c=i.children,h=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(zn,Dt),Dt|=n;else{if((n&1073741824)===0)return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$e(zn,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=h!==null?h.baseLanes:n,$e(zn,Dt),Dt|=i}else h!==null?(i=h.baseLanes|n,t.memoizedState=null):i=n,$e(zn,Dt),Dt|=i;return wt(e,t,c,n),t.child}function Jc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Uo(e,t,n,i,c){var h=St(n)?Xr:mt.current;return h=Tn(t,h),Dn(t,c),n=Co(e,t,n,i,h,c),i=To(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,wr(e,t,c)):(qe&&i&&co(t),t.flags|=1,wt(e,t,n,c),t.child)}function Yc(e,t,n,i,c){if(St(n)){var h=!0;Ea(t)}else h=!1;if(Dn(t,c),t.stateNode===null)Wa(e,t),Uc(t,n,i),Do(t,n,i,c),i=!0;else if(e===null){var m=t.stateNode,x=t.memoizedProps;m.props=x;var b=m.context,T=n.contextType;typeof T=="object"&&T!==null?T=Bt(T):(T=St(n)?Xr:mt.current,T=Tn(t,T));var W=n.getDerivedStateFromProps,H=typeof W=="function"||typeof m.getSnapshotBeforeUpdate=="function";H||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==i||b!==T)&&zc(t,m,i,T),Dr=!1;var K=t.memoizedState;m.state=K,La(t,i,m,c),b=t.memoizedState,x!==i||K!==b||jt.current||Dr?(typeof W=="function"&&(Ao(t,n,W,i),b=t.memoizedState),(x=Dr||$c(t,n,x,i,K,b,T))?(H||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=b),m.props=i,m.state=b,m.context=T,i=x):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{m=t.stateNode,hc(e,t),x=t.memoizedProps,T=t.type===t.elementType?x:Xt(t.type,x),m.props=T,H=t.pendingProps,K=m.context,b=n.contextType,typeof b=="object"&&b!==null?b=Bt(b):(b=St(n)?Xr:mt.current,b=Tn(t,b));var te=n.getDerivedStateFromProps;(W=typeof te=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==H||K!==b)&&zc(t,m,i,b),Dr=!1,K=t.memoizedState,m.state=K,La(t,i,m,c);var ie=t.memoizedState;x!==H||K!==ie||jt.current||Dr?(typeof te=="function"&&(Ao(t,n,te,i),ie=t.memoizedState),(T=Dr||$c(t,n,T,i,K,ie,b)||!1)?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(i,ie,b),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(i,ie,b)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=ie),m.props=i,m.state=ie,m.context=b,i=T):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),i=!1)}return zo(e,t,n,i,h,c)}function zo(e,t,n,i,c,h){Jc(e,t);var m=(t.flags&128)!==0;if(!i&&!m)return c&&tc(t,n,!1),wr(e,t,h);i=t.stateNode,_p.current=t;var x=m&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&m?(t.child=Rn(t,e.child,null,h),t.child=Rn(t,null,x,h)):wt(e,t,x,h),t.memoizedState=i.state,c&&tc(t,n,!0),t.child}function Qc(e){var t=e.stateNode;t.pendingContext?Zu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zu(e,t.context,!1),ko(e,t.containerInfo)}function Xc(e,t,n,i,c){return In(),mo(c),t.flags|=256,wt(e,t,n,i),t.child}var Mo={dehydrated:null,treeContext:null,retryLane:0};function Bo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zc(e,t,n){var i=t.pendingProps,c=We.current,h=!1,m=(t.flags&128)!==0,x;if((x=m)||(x=e!==null&&e.memoizedState===null?!1:(c&2)!==0),x?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),$e(We,c&1),e===null)return po(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=i.children,e=i.fallback,h?(i=t.mode,h=t.child,m={mode:"hidden",children:m},(i&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=m):h=ni(m,i,0,null),e=un(e,i,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Bo(n),t.memoizedState=Mo,e):Fo(t,m));if(c=e.memoizedState,c!==null&&(x=c.dehydrated,x!==null))return jp(e,t,m,i,x,c,n);if(h){h=i.fallback,m=t.mode,c=e.child,x=c.sibling;var b={mode:"hidden",children:i.children};return(m&1)===0&&t.child!==c?(i=t.child,i.childLanes=0,i.pendingProps=b,t.deletions=null):(i=Fr(c,b),i.subtreeFlags=c.subtreeFlags&14680064),x!==null?h=Fr(x,h):(h=un(h,m,n,null),h.flags|=2),h.return=t,i.return=t,i.sibling=h,t.child=i,i=h,h=t.child,m=e.child.memoizedState,m=m===null?Bo(n):{baseLanes:m.baseLanes|n,cachePool:null,transitions:m.transitions},h.memoizedState=m,h.childLanes=e.childLanes&~n,t.memoizedState=Mo,i}return h=e.child,e=h.sibling,i=Fr(h,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return t=ni({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qa(e,t,n,i){return i!==null&&mo(i),Rn(t,e.child,null,n),e=Fo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jp(e,t,n,i,c,h,m){if(n)return t.flags&256?(t.flags&=-257,i=Lo(Error(s(422))),qa(e,t,m,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=i.fallback,c=t.mode,i=ni({mode:"visible",children:i.children},c,0,null),h=un(h,c,m,null),h.flags|=2,i.return=t,h.return=t,i.sibling=h,t.child=i,(t.mode&1)!==0&&Rn(t,e.child,null,m),t.child.memoizedState=Bo(m),t.memoizedState=Mo,h);if((t.mode&1)===0)return qa(e,t,m,null);if(c.data==="$!"){if(i=c.nextSibling&&c.nextSibling.dataset,i)var x=i.dgst;return i=x,h=Error(s(419)),i=Lo(h,i,void 0),qa(e,t,m,i)}if(x=(m&e.childLanes)!==0,Nt||x){if(i=at,i!==null){switch(m&-m){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(i.suspendedLanes|m))!==0?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,xr(e,c),tr(i,e,c,-1))}return sl(),i=Lo(Error(s(421))),qa(e,t,m,i)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=$p.bind(null,e),c._reactRetry=t,null):(e=h.treeContext,At=Or(c.nextSibling),Rt=t,qe=!0,Qt=null,e!==null&&(zt[Mt++]=gr,zt[Mt++]=yr,zt[Mt++]=Zr,gr=e.id,yr=e.overflow,Zr=t),t=Fo(t,i.children),t.flags|=4096,t)}function ed(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),vo(e.return,t,n)}function Ko(e,t,n,i,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:c}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=i,h.tail=n,h.tailMode=c)}function td(e,t,n){var i=t.pendingProps,c=i.revealOrder,h=i.tail;if(wt(e,t,i.children,n),i=We.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ed(e,n,t);else if(e.tag===19)ed(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if($e(We,i),(t.mode&1)===0)t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&$a(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),Ko(t,!1,c,n,h);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&$a(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}Ko(t,!0,n,null,h);break;case"together":Ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),sn|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=Fr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Fr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Sp(e,t,n){switch(t.tag){case 3:Qc(t),In();break;case 5:mc(t);break;case 1:St(t.type)&&Ea(t);break;case 4:ko(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,c=t.memoizedProps.value;$e(Ra,i._currentValue),i._currentValue=c;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?($e(We,We.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Zc(e,t,n):($e(We,We.current&1),e=wr(e,t,n),e!==null?e.sibling:null);$e(We,We.current&1);break;case 19:if(i=(n&t.childLanes)!==0,(e.flags&128)!==0){if(i)return td(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),$e(We,We.current),i)break;return null;case 22:case 23:return t.lanes=0,Gc(e,t,n)}return wr(e,t,n)}var rd,qo,nd,sd;rd=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qo=function(){},nd=function(e,t,n,i){var c=e.memoizedProps;if(c!==i){e=t.stateNode,rn(ur.current);var h=null;switch(n){case"input":c=Q(e,c),i=Q(e,i),h=[];break;case"select":c=U({},c,{value:void 0}),i=U({},i,{value:void 0}),h=[];break;case"textarea":c=Gr(e,c),i=Gr(e,i),h=[];break;default:typeof c.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=ja)}Me(n,i);var m;n=null;for(T in c)if(!i.hasOwnProperty(T)&&c.hasOwnProperty(T)&&c[T]!=null)if(T==="style"){var x=c[T];for(m in x)x.hasOwnProperty(m)&&(n||(n={}),n[m]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(u.hasOwnProperty(T)?h||(h=[]):(h=h||[]).push(T,null));for(T in i){var b=i[T];if(x=c!=null?c[T]:void 0,i.hasOwnProperty(T)&&b!==x&&(b!=null||x!=null))if(T==="style")if(x){for(m in x)!x.hasOwnProperty(m)||b&&b.hasOwnProperty(m)||(n||(n={}),n[m]="");for(m in b)b.hasOwnProperty(m)&&x[m]!==b[m]&&(n||(n={}),n[m]=b[m])}else n||(h||(h=[]),h.push(T,n)),n=b;else T==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,x=x?x.__html:void 0,b!=null&&x!==b&&(h=h||[]).push(T,b)):T==="children"?typeof b!="string"&&typeof b!="number"||(h=h||[]).push(T,""+b):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(u.hasOwnProperty(T)?(b!=null&&T==="onScroll"&&Be("scroll",e),h||x===b||(h=[])):(h=h||[]).push(T,b))}n&&(h=h||[]).push("style",n);var T=h;(t.updateQueue=T)&&(t.flags|=4)}},sd=function(e,t,n,i){n!==i&&(t.flags|=4)};function zs(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function yt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags&14680064,i|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Np(e,t,n){var i=t.pendingProps;switch(ho(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(t),null;case 1:return St(t.type)&&Na(),yt(t),null;case 3:return i=t.stateNode,Ln(),Fe(jt),Fe(mt),So(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Oa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Qt!==null&&(tl(Qt),Qt=null))),qo(e,t),yt(t),null;case 5:_o(t);var c=rn(As.current);if(n=t.type,e!==null&&t.stateNode!=null)nd(e,t,n,i,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(s(166));return yt(t),null}if(e=rn(ur.current),Oa(t)){i=t.stateNode,n=t.type;var h=t.memoizedProps;switch(i[lr]=t,i[Ts]=h,e=(t.mode&1)!==0,n){case"dialog":Be("cancel",i),Be("close",i);break;case"iframe":case"object":case"embed":Be("load",i);break;case"video":case"audio":for(c=0;c<Ns.length;c++)Be(Ns[c],i);break;case"source":Be("error",i);break;case"img":case"image":case"link":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"input":De(i,h),Be("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!h.multiple},Be("invalid",i);break;case"textarea":F(i,h),Be("invalid",i)}Me(n,h),c=null;for(var m in h)if(h.hasOwnProperty(m)){var x=h[m];m==="children"?typeof x=="string"?i.textContent!==x&&(h.suppressHydrationWarning!==!0&&_a(i.textContent,x,e),c=["children",x]):typeof x=="number"&&i.textContent!==""+x&&(h.suppressHydrationWarning!==!0&&_a(i.textContent,x,e),c=["children",""+x]):u.hasOwnProperty(m)&&x!=null&&m==="onScroll"&&Be("scroll",i)}switch(n){case"input":_t(i),Ht(i,h,!0);break;case"textarea":_t(i),Ke(i);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(i.onclick=ja)}i=c,t.updateQueue=i,i!==null&&(t.flags|=4)}else{m=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Z(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=m.createElement(n,{is:i.is}):(e=m.createElement(n),n==="select"&&(m=e,i.multiple?m.multiple=!0:i.size&&(m.size=i.size))):e=m.createElementNS(e,n),e[lr]=t,e[Ts]=i,rd(e,t,!1,!1),t.stateNode=e;e:{switch(m=pt(n,i),n){case"dialog":Be("cancel",e),Be("close",e),c=i;break;case"iframe":case"object":case"embed":Be("load",e),c=i;break;case"video":case"audio":for(c=0;c<Ns.length;c++)Be(Ns[c],e);c=i;break;case"source":Be("error",e),c=i;break;case"img":case"image":case"link":Be("error",e),Be("load",e),c=i;break;case"details":Be("toggle",e),c=i;break;case"input":De(e,i),c=Q(e,i),Be("invalid",e);break;case"option":c=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},c=U({},i,{value:void 0}),Be("invalid",e);break;case"textarea":F(e,i),c=Gr(e,i),Be("invalid",e);break;default:c=i}Me(n,c),x=c;for(h in x)if(x.hasOwnProperty(h)){var b=x[h];h==="style"?Jr(e,b):h==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&Vt(e,b)):h==="children"?typeof b=="string"?(n!=="textarea"||b!=="")&&lt(e,b):typeof b=="number"&&lt(e,""+b):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(u.hasOwnProperty(h)?b!=null&&h==="onScroll"&&Be("scroll",e):b!=null&&M(e,h,b,m))}switch(n){case"input":_t(e),Ht(e,i,!1);break;case"textarea":_t(e),Ke(e);break;case"option":i.value!=null&&e.setAttribute("value",""+ke(i.value));break;case"select":e.multiple=!!i.multiple,h=i.value,h!=null?Pt(e,!!i.multiple,h,!1):i.defaultValue!=null&&Pt(e,!!i.multiple,i.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=ja)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yt(t),null;case 6:if(e&&t.stateNode!=null)sd(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(s(166));if(n=rn(As.current),rn(ur.current),Oa(t)){if(i=t.stateNode,n=t.memoizedProps,i[lr]=t,(h=i.nodeValue!==n)&&(e=Rt,e!==null))switch(e.tag){case 3:_a(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_a(i.nodeValue,n,(e.mode&1)!==0)}h&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[lr]=t,t.stateNode=i}return yt(t),null;case 13:if(Fe(We),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&At!==null&&(t.mode&1)!==0&&(t.flags&128)===0)oc(),In(),t.flags|=98560,h=!1;else if(h=Oa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[lr]=t}else In(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;yt(t),h=!1}else Qt!==null&&(tl(Qt),Qt=null),h=!0;if(!h)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(We.current&1)!==0?rt===0&&(rt=3):sl())),t.updateQueue!==null&&(t.flags|=4),yt(t),null);case 4:return Ln(),qo(e,t),e===null&&Es(t.stateNode.containerInfo),yt(t),null;case 10:return xo(t.type._context),yt(t),null;case 17:return St(t.type)&&Na(),yt(t),null;case 19:if(Fe(We),h=t.memoizedState,h===null)return yt(t),null;if(i=(t.flags&128)!==0,m=h.rendering,m===null)if(i)zs(h,!1);else{if(rt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=$a(e),m!==null){for(t.flags|=128,zs(h,!1),i=m.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)h=n,e=i,h.flags&=14680066,m=h.alternate,m===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=m.childLanes,h.lanes=m.lanes,h.child=m.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=m.memoizedProps,h.memoizedState=m.memoizedState,h.updateQueue=m.updateQueue,h.type=m.type,e=m.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $e(We,We.current&1|2),t.child}e=e.sibling}h.tail!==null&&Je()>Mn&&(t.flags|=128,i=!0,zs(h,!1),t.lanes=4194304)}else{if(!i)if(e=$a(m),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),zs(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!qe)return yt(t),null}else 2*Je()-h.renderingStartTime>Mn&&n!==1073741824&&(t.flags|=128,i=!0,zs(h,!1),t.lanes=4194304);h.isBackwards?(m.sibling=t.child,t.child=m):(n=h.last,n!==null?n.sibling=m:t.child=m,h.last=m)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Je(),t.sibling=null,n=We.current,$e(We,i?n&1|2:n&1),t):(yt(t),null);case 22:case 23:return nl(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(Dt&1073741824)!==0&&(yt(t),t.subtreeFlags&6&&(t.flags|=8192)):yt(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function Ep(e,t){switch(ho(t),t.tag){case 1:return St(t.type)&&Na(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ln(),Fe(jt),Fe(mt),So(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return _o(t),null;case 13:if(Fe(We),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));In()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fe(We),null;case 4:return Ln(),null;case 10:return xo(t.type._context),null;case 22:case 23:return nl(),null;case 24:return null;default:return null}}var Ha=!1,xt=!1,Cp=typeof WeakSet=="function"?WeakSet:Set,se=null;function Un(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ge(e,t,i)}else n.current=null}function Wo(e,t,n){try{n()}catch(i){Ge(e,t,i)}}var ad=!1;function Tp(e,t){if(ro=ha,e=$u(),Gi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var c=i.anchorOffset,h=i.focusNode;i=i.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var m=0,x=-1,b=-1,T=0,W=0,H=e,K=null;t:for(;;){for(var te;H!==n||c!==0&&H.nodeType!==3||(x=m+c),H!==h||i!==0&&H.nodeType!==3||(b=m+i),H.nodeType===3&&(m+=H.nodeValue.length),(te=H.firstChild)!==null;)K=H,H=te;for(;;){if(H===e)break t;if(K===n&&++T===c&&(x=m),K===h&&++W===i&&(b=m),(te=H.nextSibling)!==null)break;H=K,K=H.parentNode}H=te}n=x===-1||b===-1?null:{start:x,end:b}}else n=null}n=n||{start:0,end:0}}else n=null;for(no={focusedElem:e,selectionRange:n},ha=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var ie=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var le=ie.memoizedProps,Ye=ie.memoizedState,S=t.stateNode,k=S.getSnapshotBeforeUpdate(t.elementType===t.type?le:Xt(t.type,le),Ye);S.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Y){Ge(t,t.return,Y)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return ie=ad,ad=!1,ie}function Ms(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&e)===e){var h=c.destroy;c.destroy=void 0,h!==void 0&&Wo(t,n,h)}c=c.next}while(c!==i)}}function Va(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Ho(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function id(e){var t=e.alternate;t!==null&&(e.alternate=null,id(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[lr],delete t[Ts],delete t[oo],delete t[dp],delete t[hp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function od(e){return e.tag===5||e.tag===3||e.tag===4}function ld(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||od(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vo(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ja));else if(i!==4&&(e=e.child,e!==null))for(Vo(e,t,n),e=e.sibling;e!==null;)Vo(e,t,n),e=e.sibling}function Go(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Go(e,t,n),e=e.sibling;e!==null;)Go(e,t,n),e=e.sibling}var ut=null,Zt=!1;function $r(e,t,n){for(n=n.child;n!==null;)ud(e,t,n),n=n.sibling}function ud(e,t,n){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(ia,n)}catch{}switch(n.tag){case 5:xt||Un(n,t);case 6:var i=ut,c=Zt;ut=null,$r(e,t,n),ut=i,Zt=c,ut!==null&&(Zt?(e=ut,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(Zt?(e=ut,n=n.stateNode,e.nodeType===8?io(e.parentNode,n):e.nodeType===1&&io(e,n),xs(e)):io(ut,n.stateNode));break;case 4:i=ut,c=Zt,ut=n.stateNode.containerInfo,Zt=!0,$r(e,t,n),ut=i,Zt=c;break;case 0:case 11:case 14:case 15:if(!xt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){c=i=i.next;do{var h=c,m=h.destroy;h=h.tag,m!==void 0&&((h&2)!==0||(h&4)!==0)&&Wo(n,t,m),c=c.next}while(c!==i)}$r(e,t,n);break;case 1:if(!xt&&(Un(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(x){Ge(n,t,x)}$r(e,t,n);break;case 21:$r(e,t,n);break;case 22:n.mode&1?(xt=(i=xt)||n.memoizedState!==null,$r(e,t,n),xt=i):$r(e,t,n);break;default:$r(e,t,n)}}function cd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Cp),t.forEach(function(i){var c=Up.bind(null,e,i);n.has(i)||(n.add(i),i.then(c,c))})}}function er(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];try{var h=e,m=t,x=m;e:for(;x!==null;){switch(x.tag){case 5:ut=x.stateNode,Zt=!1;break e;case 3:ut=x.stateNode.containerInfo,Zt=!0;break e;case 4:ut=x.stateNode.containerInfo,Zt=!0;break e}x=x.return}if(ut===null)throw Error(s(160));ud(h,m,c),ut=null,Zt=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(T){Ge(c,t,T)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)dd(t,e),t=t.sibling}function dd(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(er(t,e),dr(e),i&4){try{Ms(3,e,e.return),Va(3,e)}catch(le){Ge(e,e.return,le)}try{Ms(5,e,e.return)}catch(le){Ge(e,e.return,le)}}break;case 1:er(t,e),dr(e),i&512&&n!==null&&Un(n,n.return);break;case 5:if(er(t,e),dr(e),i&512&&n!==null&&Un(n,n.return),e.flags&32){var c=e.stateNode;try{lt(c,"")}catch(le){Ge(e,e.return,le)}}if(i&4&&(c=e.stateNode,c!=null)){var h=e.memoizedProps,m=n!==null?n.memoizedProps:h,x=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{x==="input"&&h.type==="radio"&&h.name!=null&&we(c,h),pt(x,m);var T=pt(x,h);for(m=0;m<b.length;m+=2){var W=b[m],H=b[m+1];W==="style"?Jr(c,H):W==="dangerouslySetInnerHTML"?Vt(c,H):W==="children"?lt(c,H):M(c,W,H,T)}switch(x){case"input":Ie(c,h);break;case"textarea":Pe(c,h);break;case"select":var K=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var te=h.value;te!=null?Pt(c,!!h.multiple,te,!1):K!==!!h.multiple&&(h.defaultValue!=null?Pt(c,!!h.multiple,h.defaultValue,!0):Pt(c,!!h.multiple,h.multiple?[]:"",!1))}c[Ts]=h}catch(le){Ge(e,e.return,le)}}break;case 6:if(er(t,e),dr(e),i&4){if(e.stateNode===null)throw Error(s(162));c=e.stateNode,h=e.memoizedProps;try{c.nodeValue=h}catch(le){Ge(e,e.return,le)}}break;case 3:if(er(t,e),dr(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{xs(t.containerInfo)}catch(le){Ge(e,e.return,le)}break;case 4:er(t,e),dr(e);break;case 13:er(t,e),dr(e),c=e.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(Qo=Je())),i&4&&cd(e);break;case 22:if(W=n!==null&&n.memoizedState!==null,e.mode&1?(xt=(T=xt)||W,er(t,e),xt=T):er(t,e),dr(e),i&8192){if(T=e.memoizedState!==null,(e.stateNode.isHidden=T)&&!W&&(e.mode&1)!==0)for(se=e,W=e.child;W!==null;){for(H=se=W;se!==null;){switch(K=se,te=K.child,K.tag){case 0:case 11:case 14:case 15:Ms(4,K,K.return);break;case 1:Un(K,K.return);var ie=K.stateNode;if(typeof ie.componentWillUnmount=="function"){i=K,n=K.return;try{t=i,ie.props=t.memoizedProps,ie.state=t.memoizedState,ie.componentWillUnmount()}catch(le){Ge(i,n,le)}}break;case 5:Un(K,K.return);break;case 22:if(K.memoizedState!==null){pd(H);continue}}te!==null?(te.return=K,se=te):pd(H)}W=W.sibling}e:for(W=null,H=e;;){if(H.tag===5){if(W===null){W=H;try{c=H.stateNode,T?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(x=H.stateNode,b=H.memoizedProps.style,m=b!=null&&b.hasOwnProperty("display")?b.display:null,x.style.display=Gt("display",m))}catch(le){Ge(e,e.return,le)}}}else if(H.tag===6){if(W===null)try{H.stateNode.nodeValue=T?"":H.memoizedProps}catch(le){Ge(e,e.return,le)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===e)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===e)break e;for(;H.sibling===null;){if(H.return===null||H.return===e)break e;W===H&&(W=null),H=H.return}W===H&&(W=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:er(t,e),dr(e),i&4&&cd(e);break;case 21:break;default:er(t,e),dr(e)}}function dr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(od(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var c=i.stateNode;i.flags&32&&(lt(c,""),i.flags&=-33);var h=ld(e);Go(e,h,c);break;case 3:case 4:var m=i.stateNode.containerInfo,x=ld(e);Vo(e,x,m);break;default:throw Error(s(161))}}catch(b){Ge(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Pp(e,t,n){se=e,hd(e)}function hd(e,t,n){for(var i=(e.mode&1)!==0;se!==null;){var c=se,h=c.child;if(c.tag===22&&i){var m=c.memoizedState!==null||Ha;if(!m){var x=c.alternate,b=x!==null&&x.memoizedState!==null||xt;x=Ha;var T=xt;if(Ha=m,(xt=b)&&!T)for(se=c;se!==null;)m=se,b=m.child,m.tag===22&&m.memoizedState!==null?md(c):b!==null?(b.return=m,se=b):md(c);for(;h!==null;)se=h,hd(h),h=h.sibling;se=c,Ha=x,xt=T}fd(e)}else(c.subtreeFlags&8772)!==0&&h!==null?(h.return=c,se=h):fd(e)}}function fd(e){for(;se!==null;){var t=se;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:xt||Va(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!xt)if(n===null)i.componentDidMount();else{var c=t.elementType===t.type?n.memoizedProps:Xt(t.type,n.memoizedProps);i.componentDidUpdate(c,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&pc(t,h,i);break;case 3:var m=t.updateQueue;if(m!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}pc(t,m,n)}break;case 5:var x=t.stateNode;if(n===null&&t.flags&4){n=x;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&n.focus();break;case"img":b.src&&(n.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var T=t.alternate;if(T!==null){var W=T.memoizedState;if(W!==null){var H=W.dehydrated;H!==null&&xs(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}xt||t.flags&512&&Ho(t)}catch(K){Ge(t,t.return,K)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function pd(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function md(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Va(4,t)}catch(b){Ge(t,n,b)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var c=t.return;try{i.componentDidMount()}catch(b){Ge(t,c,b)}}var h=t.return;try{Ho(t)}catch(b){Ge(t,h,b)}break;case 5:var m=t.return;try{Ho(t)}catch(b){Ge(t,m,b)}}}catch(b){Ge(t,t.return,b)}if(t===e){se=null;break}var x=t.sibling;if(x!==null){x.return=t.return,se=x;break}se=t.return}}var Op=Math.ceil,Ga=V.ReactCurrentDispatcher,Jo=V.ReactCurrentOwner,Kt=V.ReactCurrentBatchConfig,Ce=0,at=null,Xe=null,ct=0,Dt=0,zn=Ir(0),rt=0,Bs=null,sn=0,Ja=0,Yo=0,Fs=null,Et=null,Qo=0,Mn=1/0,br=null,Ya=!1,Xo=null,Ur=null,Qa=!1,zr=null,Xa=0,Ks=0,Zo=null,Za=-1,ei=0;function bt(){return(Ce&6)!==0?Je():Za!==-1?Za:Za=Je()}function Mr(e){return(e.mode&1)===0?1:(Ce&2)!==0&&ct!==0?ct&-ct:pp.transition!==null?(ei===0&&(ei=lu()),ei):(e=Re,e!==0||(e=window.event,e=e===void 0?16:yu(e.type)),e)}function tr(e,t,n,i){if(50<Ks)throw Ks=0,Zo=null,Error(s(185));fs(e,n,i),((Ce&2)===0||e!==at)&&(e===at&&((Ce&2)===0&&(Ja|=n),rt===4&&Br(e,ct)),Ct(e,i),n===1&&Ce===0&&(t.mode&1)===0&&(Mn=Je()+500,Ca&&Ar()))}function Ct(e,t){var n=e.callbackNode;pf(e,t);var i=ua(e,e===at?ct:0);if(i===0)n!==null&&au(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&au(n),t===1)e.tag===0?fp(yd.bind(null,e)):rc(yd.bind(null,e)),up(function(){(Ce&6)===0&&Ar()}),n=null;else{switch(uu(i)){case 1:n=Oi;break;case 4:n=iu;break;case 16:n=aa;break;case 536870912:n=ou;break;default:n=aa}n=Sd(n,gd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function gd(e,t){if(Za=-1,ei=0,(Ce&6)!==0)throw Error(s(327));var n=e.callbackNode;if(Bn()&&e.callbackNode!==n)return null;var i=ua(e,e===at?ct:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=ti(e,i);else{t=i;var c=Ce;Ce|=2;var h=vd();(at!==e||ct!==t)&&(br=null,Mn=Je()+500,on(e,t));do try{Ap();break}catch(x){xd(e,x)}while(!0);yo(),Ga.current=h,Ce=c,Xe!==null?t=0:(at=null,ct=0,t=rt)}if(t!==0){if(t===2&&(c=Ii(e),c!==0&&(i=c,t=el(e,c))),t===1)throw n=Bs,on(e,0),Br(e,i),Ct(e,Je()),n;if(t===6)Br(e,i);else{if(c=e.current.alternate,(i&30)===0&&!Ip(c)&&(t=ti(e,i),t===2&&(h=Ii(e),h!==0&&(i=h,t=el(e,h))),t===1))throw n=Bs,on(e,0),Br(e,i),Ct(e,Je()),n;switch(e.finishedWork=c,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:ln(e,Et,br);break;case 3:if(Br(e,i),(i&130023424)===i&&(t=Qo+500-Je(),10<t)){if(ua(e,0)!==0)break;if(c=e.suspendedLanes,(c&i)!==i){bt(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=ao(ln.bind(null,e,Et,br),t);break}ln(e,Et,br);break;case 4:if(Br(e,i),(i&4194240)===i)break;for(t=e.eventTimes,c=-1;0<i;){var m=31-Jt(i);h=1<<m,m=t[m],m>c&&(c=m),i&=~h}if(i=c,i=Je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Op(i/1960))-i,10<i){e.timeoutHandle=ao(ln.bind(null,e,Et,br),i);break}ln(e,Et,br);break;case 5:ln(e,Et,br);break;default:throw Error(s(329))}}}return Ct(e,Je()),e.callbackNode===n?gd.bind(null,e):null}function el(e,t){var n=Fs;return e.current.memoizedState.isDehydrated&&(on(e,t).flags|=256),e=ti(e,t),e!==2&&(t=Et,Et=n,t!==null&&tl(t)),e}function tl(e){Et===null?Et=e:Et.push.apply(Et,e)}function Ip(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var c=n[i],h=c.getSnapshot;c=c.value;try{if(!Yt(h(),c))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Br(e,t){for(t&=~Yo,t&=~Ja,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Jt(t),i=1<<n;e[n]=-1,t&=~i}}function yd(e){if((Ce&6)!==0)throw Error(s(327));Bn();var t=ua(e,0);if((t&1)===0)return Ct(e,Je()),null;var n=ti(e,t);if(e.tag!==0&&n===2){var i=Ii(e);i!==0&&(t=i,n=el(e,i))}if(n===1)throw n=Bs,on(e,0),Br(e,t),Ct(e,Je()),n;if(n===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ln(e,Et,br),Ct(e,Je()),null}function rl(e,t){var n=Ce;Ce|=1;try{return e(t)}finally{Ce=n,Ce===0&&(Mn=Je()+500,Ca&&Ar())}}function an(e){zr!==null&&zr.tag===0&&(Ce&6)===0&&Bn();var t=Ce;Ce|=1;var n=Kt.transition,i=Re;try{if(Kt.transition=null,Re=1,e)return e()}finally{Re=i,Kt.transition=n,Ce=t,(Ce&6)===0&&Ar()}}function nl(){Dt=zn.current,Fe(zn)}function on(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,lp(n)),Xe!==null)for(n=Xe.return;n!==null;){var i=n;switch(ho(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Na();break;case 3:Ln(),Fe(jt),Fe(mt),So();break;case 5:_o(i);break;case 4:Ln();break;case 13:Fe(We);break;case 19:Fe(We);break;case 10:xo(i.type._context);break;case 22:case 23:nl()}n=n.return}if(at=e,Xe=e=Fr(e.current,null),ct=Dt=t,rt=0,Bs=null,Yo=Ja=sn=0,Et=Fs=null,tn!==null){for(t=0;t<tn.length;t++)if(n=tn[t],i=n.interleaved,i!==null){n.interleaved=null;var c=i.next,h=n.pending;if(h!==null){var m=h.next;h.next=c,i.next=m}n.pending=i}tn=null}return e}function xd(e,t){do{var n=Xe;try{if(yo(),Ua.current=Fa,za){for(var i=He.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}za=!1}if(nn=0,st=tt=He=null,Ds=!1,Ls=0,Jo.current=null,n===null||n.return===null){rt=1,Bs=t,Xe=null;break}e:{var h=e,m=n.return,x=n,b=t;if(t=ct,x.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var T=b,W=x,H=W.tag;if((W.mode&1)===0&&(H===0||H===11||H===15)){var K=W.alternate;K?(W.updateQueue=K.updateQueue,W.memoizedState=K.memoizedState,W.lanes=K.lanes):(W.updateQueue=null,W.memoizedState=null)}var te=Kc(m);if(te!==null){te.flags&=-257,qc(te,m,x,h,t),te.mode&1&&Fc(h,T,t),t=te,b=T;var ie=t.updateQueue;if(ie===null){var le=new Set;le.add(b),t.updateQueue=le}else ie.add(b);break e}else{if((t&1)===0){Fc(h,T,t),sl();break e}b=Error(s(426))}}else if(qe&&x.mode&1){var Ye=Kc(m);if(Ye!==null){(Ye.flags&65536)===0&&(Ye.flags|=256),qc(Ye,m,x,h,t),mo($n(b,x));break e}}h=b=$n(b,x),rt!==4&&(rt=2),Fs===null?Fs=[h]:Fs.push(h),h=m;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var S=Mc(h,b,t);fc(h,S);break e;case 1:x=b;var k=h.type,N=h.stateNode;if((h.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ur===null||!Ur.has(N)))){h.flags|=65536,t&=-t,h.lanes|=t;var Y=Bc(h,x,t);fc(h,Y);break e}}h=h.return}while(h!==null)}bd(n)}catch(ue){t=ue,Xe===n&&n!==null&&(Xe=n=n.return);continue}break}while(!0)}function vd(){var e=Ga.current;return Ga.current=Fa,e===null?Fa:e}function sl(){(rt===0||rt===3||rt===2)&&(rt=4),at===null||(sn&268435455)===0&&(Ja&268435455)===0||Br(at,ct)}function ti(e,t){var n=Ce;Ce|=2;var i=vd();(at!==e||ct!==t)&&(br=null,on(e,t));do try{Rp();break}catch(c){xd(e,c)}while(!0);if(yo(),Ce=n,Ga.current=i,Xe!==null)throw Error(s(261));return at=null,ct=0,rt}function Rp(){for(;Xe!==null;)wd(Xe)}function Ap(){for(;Xe!==null&&!sf();)wd(Xe)}function wd(e){var t=jd(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?bd(e):Xe=t,Jo.current=null}function bd(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Np(n,t,Dt),n!==null){Xe=n;return}}else{if(n=Ep(n,t),n!==null){n.flags&=32767,Xe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rt=6,Xe=null;return}}if(t=t.sibling,t!==null){Xe=t;return}Xe=t=e}while(t!==null);rt===0&&(rt=5)}function ln(e,t,n){var i=Re,c=Kt.transition;try{Kt.transition=null,Re=1,Dp(e,t,n,i)}finally{Kt.transition=c,Re=i}return null}function Dp(e,t,n,i){do Bn();while(zr!==null);if((Ce&6)!==0)throw Error(s(327));n=e.finishedWork;var c=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(mf(e,h),e===at&&(Xe=at=null,ct=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Qa||(Qa=!0,Sd(aa,function(){return Bn(),null})),h=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||h){h=Kt.transition,Kt.transition=null;var m=Re;Re=1;var x=Ce;Ce|=4,Jo.current=null,Tp(e,n),dd(n,e),tp(no),ha=!!ro,no=ro=null,e.current=n,Pp(n),af(),Ce=x,Re=m,Kt.transition=h}else e.current=n;if(Qa&&(Qa=!1,zr=e,Xa=c),h=e.pendingLanes,h===0&&(Ur=null),uf(n.stateNode),Ct(e,Je()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)c=t[n],i(c.value,{componentStack:c.stack,digest:c.digest});if(Ya)throw Ya=!1,e=Xo,Xo=null,e;return(Xa&1)!==0&&e.tag!==0&&Bn(),h=e.pendingLanes,(h&1)!==0?e===Zo?Ks++:(Ks=0,Zo=e):Ks=0,Ar(),null}function Bn(){if(zr!==null){var e=uu(Xa),t=Kt.transition,n=Re;try{if(Kt.transition=null,Re=16>e?16:e,zr===null)var i=!1;else{if(e=zr,zr=null,Xa=0,(Ce&6)!==0)throw Error(s(331));var c=Ce;for(Ce|=4,se=e.current;se!==null;){var h=se,m=h.child;if((se.flags&16)!==0){var x=h.deletions;if(x!==null){for(var b=0;b<x.length;b++){var T=x[b];for(se=T;se!==null;){var W=se;switch(W.tag){case 0:case 11:case 15:Ms(8,W,h)}var H=W.child;if(H!==null)H.return=W,se=H;else for(;se!==null;){W=se;var K=W.sibling,te=W.return;if(id(W),W===T){se=null;break}if(K!==null){K.return=te,se=K;break}se=te}}}var ie=h.alternate;if(ie!==null){var le=ie.child;if(le!==null){ie.child=null;do{var Ye=le.sibling;le.sibling=null,le=Ye}while(le!==null)}}se=h}}if((h.subtreeFlags&2064)!==0&&m!==null)m.return=h,se=m;else e:for(;se!==null;){if(h=se,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:Ms(9,h,h.return)}var S=h.sibling;if(S!==null){S.return=h.return,se=S;break e}se=h.return}}var k=e.current;for(se=k;se!==null;){m=se;var N=m.child;if((m.subtreeFlags&2064)!==0&&N!==null)N.return=m,se=N;else e:for(m=k;se!==null;){if(x=se,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:Va(9,x)}}catch(ue){Ge(x,x.return,ue)}if(x===m){se=null;break e}var Y=x.sibling;if(Y!==null){Y.return=x.return,se=Y;break e}se=x.return}}if(Ce=c,Ar(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(ia,e)}catch{}i=!0}return i}finally{Re=n,Kt.transition=t}}return!1}function kd(e,t,n){t=$n(n,t),t=Mc(e,t,1),e=Lr(e,t,1),t=bt(),e!==null&&(fs(e,1,t),Ct(e,t))}function Ge(e,t,n){if(e.tag===3)kd(e,e,n);else for(;t!==null;){if(t.tag===3){kd(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ur===null||!Ur.has(i))){e=$n(n,e),e=Bc(t,e,1),t=Lr(t,e,1),e=bt(),t!==null&&(fs(t,1,e),Ct(t,e));break}}t=t.return}}function Lp(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=bt(),e.pingedLanes|=e.suspendedLanes&n,at===e&&(ct&n)===n&&(rt===4||rt===3&&(ct&130023424)===ct&&500>Je()-Qo?on(e,0):Yo|=n),Ct(e,t)}function _d(e,t){t===0&&((e.mode&1)===0?t=1:(t=la,la<<=1,(la&130023424)===0&&(la=4194304)));var n=bt();e=xr(e,t),e!==null&&(fs(e,t,n),Ct(e,n))}function $p(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_d(e,n)}function Up(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}i!==null&&i.delete(t),_d(e,n)}var jd;jd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)Nt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Nt=!1,Sp(e,t,n);Nt=(e.flags&131072)!==0}else Nt=!1,qe&&(t.flags&1048576)!==0&&nc(t,Pa,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wa(e,t),e=t.pendingProps;var c=Tn(t,mt.current);Dn(t,n),c=Co(null,t,i,e,c,n);var h=To();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,St(i)?(h=!0,Ea(t)):h=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,bo(t),c.updater=Ka,t.stateNode=c,c._reactInternals=t,Do(t,i,e,n),t=zo(null,t,i,!0,h,n)):(t.tag=0,qe&&h&&co(t),wt(null,t,c,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,c=i._init,i=c(i._payload),t.type=i,c=t.tag=Mp(i),e=Xt(i,e),c){case 0:t=Uo(null,t,i,e,n);break e;case 1:t=Yc(null,t,i,e,n);break e;case 11:t=Wc(null,t,i,e,n);break e;case 14:t=Hc(null,t,i,Xt(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Xt(i,c),Uo(e,t,i,c,n);case 1:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Xt(i,c),Yc(e,t,i,c,n);case 3:e:{if(Qc(t),e===null)throw Error(s(387));i=t.pendingProps,h=t.memoizedState,c=h.element,hc(e,t),La(t,i,null,n);var m=t.memoizedState;if(i=m.element,h.isDehydrated)if(h={element:i,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){c=$n(Error(s(423)),t),t=Xc(e,t,i,n,c);break e}else if(i!==c){c=$n(Error(s(424)),t),t=Xc(e,t,i,n,c);break e}else for(At=Or(t.stateNode.containerInfo.firstChild),Rt=t,qe=!0,Qt=null,n=cc(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(In(),i===c){t=wr(e,t,n);break e}wt(e,t,i,n)}t=t.child}return t;case 5:return mc(t),e===null&&po(t),i=t.type,c=t.pendingProps,h=e!==null?e.memoizedProps:null,m=c.children,so(i,c)?m=null:h!==null&&so(i,h)&&(t.flags|=32),Jc(e,t),wt(e,t,m,n),t.child;case 6:return e===null&&po(t),null;case 13:return Zc(e,t,n);case 4:return ko(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Rn(t,null,i,n):wt(e,t,i,n),t.child;case 11:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Xt(i,c),Wc(e,t,i,c,n);case 7:return wt(e,t,t.pendingProps,n),t.child;case 8:return wt(e,t,t.pendingProps.children,n),t.child;case 12:return wt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,c=t.pendingProps,h=t.memoizedProps,m=c.value,$e(Ra,i._currentValue),i._currentValue=m,h!==null)if(Yt(h.value,m)){if(h.children===c.children&&!jt.current){t=wr(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var x=h.dependencies;if(x!==null){m=h.child;for(var b=x.firstContext;b!==null;){if(b.context===i){if(h.tag===1){b=vr(-1,n&-n),b.tag=2;var T=h.updateQueue;if(T!==null){T=T.shared;var W=T.pending;W===null?b.next=b:(b.next=W.next,W.next=b),T.pending=b}}h.lanes|=n,b=h.alternate,b!==null&&(b.lanes|=n),vo(h.return,n,t),x.lanes|=n;break}b=b.next}}else if(h.tag===10)m=h.type===t.type?null:h.child;else if(h.tag===18){if(m=h.return,m===null)throw Error(s(341));m.lanes|=n,x=m.alternate,x!==null&&(x.lanes|=n),vo(m,n,t),m=h.sibling}else m=h.child;if(m!==null)m.return=h;else for(m=h;m!==null;){if(m===t){m=null;break}if(h=m.sibling,h!==null){h.return=m.return,m=h;break}m=m.return}h=m}wt(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,i=t.pendingProps.children,Dn(t,n),c=Bt(c),i=i(c),t.flags|=1,wt(e,t,i,n),t.child;case 14:return i=t.type,c=Xt(i,t.pendingProps),c=Xt(i.type,c),Hc(e,t,i,c,n);case 15:return Vc(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Xt(i,c),Wa(e,t),t.tag=1,St(i)?(e=!0,Ea(t)):e=!1,Dn(t,n),Uc(t,i,c),Do(t,i,c,n),zo(null,t,i,!0,e,n);case 19:return td(e,t,n);case 22:return Gc(e,t,n)}throw Error(s(156,t.tag))};function Sd(e,t){return su(e,t)}function zp(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(e,t,n,i){return new zp(e,t,n,i)}function al(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mp(e){if(typeof e=="function")return al(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ee)return 11;if(e===ye)return 14}return 2}function Fr(e,t){var n=e.alternate;return n===null?(n=qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ri(e,t,n,i,c,h){var m=2;if(i=e,typeof e=="function")al(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case X:return un(n.children,c,h,t);case re:m=8,c|=8;break;case ve:return e=qt(12,n,t,c|2),e.elementType=ve,e.lanes=h,e;case ce:return e=qt(13,n,t,c),e.elementType=ce,e.lanes=h,e;case G:return e=qt(19,n,t,c),e.elementType=G,e.lanes=h,e;case fe:return ni(n,c,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case be:m=10;break e;case ae:m=9;break e;case Ee:m=11;break e;case ye:m=14;break e;case L:m=16,i=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=qt(m,n,t,c),t.elementType=e,t.type=i,t.lanes=h,t}function un(e,t,n,i){return e=qt(7,e,i,t),e.lanes=n,e}function ni(e,t,n,i){return e=qt(22,e,i,t),e.elementType=fe,e.lanes=n,e.stateNode={isHidden:!1},e}function il(e,t,n){return e=qt(6,e,null,t),e.lanes=n,e}function ol(e,t,n){return t=qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bp(e,t,n,i,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ri(0),this.expirationTimes=Ri(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ri(0),this.identifierPrefix=i,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function ll(e,t,n,i,c,h,m,x,b){return e=new Bp(e,t,n,x,b),t===1?(t=1,h===!0&&(t|=8)):t=0,h=qt(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bo(h),e}function Fp(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function Nd(e){if(!e)return Rr;e=e._reactInternals;e:{if(Yr(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(St(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var n=e.type;if(St(n))return ec(e,n,t)}return t}function Ed(e,t,n,i,c,h,m,x,b){return e=ll(n,i,!0,e,c,h,m,x,b),e.context=Nd(null),n=e.current,i=bt(),c=Mr(n),h=vr(i,c),h.callback=t??null,Lr(n,h,c),e.current.lanes=c,fs(e,c,i),Ct(e,i),e}function si(e,t,n,i){var c=t.current,h=bt(),m=Mr(c);return n=Nd(n),t.context===null?t.context=n:t.pendingContext=n,t=vr(h,m),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Lr(c,t,m),e!==null&&(tr(e,c,m,h),Da(e,c,m)),m}function ai(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ul(e,t){Cd(e,t),(e=e.alternate)&&Cd(e,t)}function Kp(){return null}var Td=typeof reportError=="function"?reportError:function(e){console.error(e)};function cl(e){this._internalRoot=e}ii.prototype.render=cl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));si(e,t,null,null)},ii.prototype.unmount=cl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;an(function(){si(null,e,null,null)}),t[pr]=null}};function ii(e){this._internalRoot=e}ii.prototype.unstable_scheduleHydration=function(e){if(e){var t=hu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Cr.length&&t!==0&&t<Cr[n].priority;n++);Cr.splice(n,0,e),n===0&&mu(e)}};function dl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Pd(){}function qp(e,t,n,i,c){if(c){if(typeof i=="function"){var h=i;i=function(){var T=ai(m);h.call(T)}}var m=Ed(t,i,e,0,null,!1,!1,"",Pd);return e._reactRootContainer=m,e[pr]=m.current,Es(e.nodeType===8?e.parentNode:e),an(),m}for(;c=e.lastChild;)e.removeChild(c);if(typeof i=="function"){var x=i;i=function(){var T=ai(b);x.call(T)}}var b=ll(e,0,!1,null,null,!1,!1,"",Pd);return e._reactRootContainer=b,e[pr]=b.current,Es(e.nodeType===8?e.parentNode:e),an(function(){si(t,b,n,i)}),b}function li(e,t,n,i,c){var h=n._reactRootContainer;if(h){var m=h;if(typeof c=="function"){var x=c;c=function(){var b=ai(m);x.call(b)}}si(t,m,e,c)}else m=qp(n,t,e,c,i);return ai(m)}cu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hs(t.pendingLanes);n!==0&&(Ai(t,n|1),Ct(t,Je()),(Ce&6)===0&&(Mn=Je()+500,Ar()))}break;case 13:an(function(){var i=xr(e,1);if(i!==null){var c=bt();tr(i,e,1,c)}}),ul(e,1)}},Di=function(e){if(e.tag===13){var t=xr(e,134217728);if(t!==null){var n=bt();tr(t,e,134217728,n)}ul(e,134217728)}},du=function(e){if(e.tag===13){var t=Mr(e),n=xr(e,t);if(n!==null){var i=bt();tr(n,e,t,i)}ul(e,t)}},hu=function(){return Re},fu=function(e,t){var n=Re;try{return Re=e,t()}finally{Re=n}},Qe=function(e,t,n){switch(t){case"input":if(Ie(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var c=Sa(i);if(!c)throw Error(s(90));hr(i),Ie(i,c)}}}break;case"textarea":Pe(e,n);break;case"select":t=n.value,t!=null&&Pt(e,!!n.multiple,t,!1)}},Ql=rl,Xl=an;var Wp={usingClientEntryPoint:!1,Events:[Ps,En,Sa,Jl,Yl,rl]},qs={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hp={bundleType:qs.bundleType,version:qs.version,rendererPackageName:qs.rendererPackageName,rendererConfig:qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:V.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ru(e),e===null?null:e.stateNode},findFiberByHostInstance:qs.findFiberByHostInstance||Kp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ui=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ui.isDisabled&&ui.supportsFiber)try{ia=ui.inject(Hp),or=ui}catch{}}return Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wp,Tt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dl(t))throw Error(s(200));return Fp(e,t,null,n)},Tt.createRoot=function(e,t){if(!dl(e))throw Error(s(299));var n=!1,i="",c=Td;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=ll(e,1,!1,null,null,n,!1,i,c),e[pr]=t.current,Es(e.nodeType===8?e.parentNode:e),new cl(t)},Tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=ru(t),e=e===null?null:e.stateNode,e},Tt.flushSync=function(e){return an(e)},Tt.hydrate=function(e,t,n){if(!oi(t))throw Error(s(200));return li(null,e,t,!0,n)},Tt.hydrateRoot=function(e,t,n){if(!dl(e))throw Error(s(405));var i=n!=null&&n.hydratedSources||null,c=!1,h="",m=Td;if(n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),t=Ed(t,null,e,1,n??null,c,!1,h,m),e[pr]=t.current,Es(e),i)for(e=0;e<i.length;e++)n=i[e],c=n._getVersion,c=c(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,c]:t.mutableSourceEagerHydrationData.push(n,c);return new ii(t)},Tt.render=function(e,t,n){if(!oi(t))throw Error(s(200));return li(null,e,t,!1,n)},Tt.unmountComponentAtNode=function(e){if(!oi(e))throw Error(s(40));return e._reactRootContainer?(an(function(){li(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0):!1},Tt.unstable_batchedUpdates=rl,Tt.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!oi(n))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return li(e,t,n,!1,i)},Tt.version="18.3.1-next-f1338f8080-20240426",Tt}var Ud;function r0(){if(Ud)return pl.exports;Ud=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(r){console.error(r)}}return a(),pl.exports=t0(),pl.exports}var zd;function n0(){if(zd)return ci;zd=1;var a=r0();return ci.createRoot=a.createRoot,ci.hydrateRoot=a.hydrateRoot,ci}var s0=n0();function ki(a,r){var s={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&r.indexOf(o)<0&&(s[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(a);u<o.length;u++)r.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(a,o[u])&&(s[o[u]]=a[o[u]]);return s}function oe(a,r,s,o){function u(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function p(w){try{y(o.next(w))}catch(_){f(_)}}function g(w){try{y(o.throw(w))}catch(_){f(_)}}function y(w){w.done?d(w.value):u(w.value).then(p,g)}y((o=o.apply(a,r||[])).next())})}const a0=a=>a?(...r)=>a(...r):(...r)=>fetch(...r);class Ml extends Error{constructor(r,s="FunctionsError",o){super(r),this.name=s,this.context=o}}class i0 extends Ml{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class Md extends Ml{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Bd extends Ml{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Nl;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(Nl||(Nl={}));class o0{constructor(r,{headers:s={},customFetch:o,region:u=Nl.Any}={}){this.url=r,this.headers=s,this.region=u,this.fetch=a0(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return oe(this,arguments,void 0,function*(s,o={}){var u;let d,f;try{const{headers:p,method:g,body:y,signal:w,timeout:_}=o;let j={},{region:C}=o;C||(C=this.region);const P=new URL(`${this.url}/${s}`);C&&C!=="any"&&(j["x-region"]=C,P.searchParams.set("forceFunctionRegion",C));let E;y&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(j["Content-Type"]="application/octet-stream",E=y):typeof y=="string"?(j["Content-Type"]="text/plain",E=y):typeof FormData<"u"&&y instanceof FormData?E=y:(j["Content-Type"]="application/json",E=JSON.stringify(y)):E=y;let O=w;_&&(f=new AbortController,d=setTimeout(()=>f.abort(),_),w?(O=f.signal,w.addEventListener("abort",()=>f.abort())):O=f.signal);const $=yield this.fetch(P.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},j),this.headers),p),body:E,signal:O}).catch(ne=>{throw new i0(ne)}),z=$.headers.get("x-relay-error");if(z&&z==="true")throw new Md($);if(!$.ok)throw new Bd($);let M=((u=$.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),V;return M==="application/json"?V=yield $.json():M==="application/octet-stream"||M==="application/pdf"?V=yield $.blob():M==="text/event-stream"?V=$:M==="multipart/form-data"?V=yield $.formData():V=yield $.text(),{data:V,error:null,response:$}}catch(p){return{data:null,error:p,response:p instanceof Bd||p instanceof Md?p.context:void 0}}finally{d&&clearTimeout(d)}})}}var ot={},Fn={},Kn={},qn={},Wn={},Hn={},l0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ns=l0();const u0=ns.fetch,jh=ns.fetch.bind(ns),Sh=ns.Headers,c0=ns.Request,d0=ns.Response,h0=Object.freeze(Object.defineProperty({__proto__:null,Headers:Sh,Request:c0,Response:d0,default:jh,fetch:u0},Symbol.toStringTag,{value:"Module"})),f0=Gp(h0);var di={},Fd;function Nh(){if(Fd)return di;Fd=1,Object.defineProperty(di,"__esModule",{value:!0});class a extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return di.default=a,di}var Kd;function Eh(){if(Kd)return Hn;Kd=1;var a=Hn&&Hn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Hn,"__esModule",{value:!0});const r=a(f0),s=a(Nh());class o{constructor(d){var f,p;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(f=d.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=d.signal,this.isMaybeSingle=(p=d.isMaybeSingle)!==null&&p!==void 0?p:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,f){return this.headers=new Headers(this.headers),this.headers.set(d,f),this}then(d,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let g=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async y=>{var w,_,j,C;let P=null,E=null,O=null,$=y.status,z=y.statusText;if(y.ok){if(this.method!=="HEAD"){const B=await y.text();B===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((w=this.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?E=B:E=JSON.parse(B))}const V=(_=this.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),ne=(j=y.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");V&&ne&&ne.length>1&&(O=parseInt(ne[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(P={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,O=null,$=406,z="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const V=await y.text();try{P=JSON.parse(V),Array.isArray(P)&&y.status===404&&(E=[],P=null,$=200,z="OK")}catch{y.status===404&&V===""?($=204,z="No Content"):P={message:V}}if(P&&this.isMaybeSingle&&(!((C=P==null?void 0:P.details)===null||C===void 0)&&C.includes("0 rows"))&&(P=null,$=200,z="OK"),P&&this.shouldThrowOnError)throw new s.default(P)}return{error:P,data:E,count:O,status:$,statusText:z}});return this.shouldThrowOnError||(g=g.catch(y=>{var w,_,j;return{error:{message:`${(w=y==null?void 0:y.name)!==null&&w!==void 0?w:"FetchError"}: ${y==null?void 0:y.message}`,details:`${(_=y==null?void 0:y.stack)!==null&&_!==void 0?_:""}`,hint:"",code:`${(j=y==null?void 0:y.code)!==null&&j!==void 0?j:""}`},data:null,count:null,status:0,statusText:""}})),g.then(d,f)}returns(){return this}overrideTypes(){return this}}return Hn.default=o,Hn}var qd;function Ch(){if(qd)return Wn;qd=1;var a=Wn&&Wn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Wn,"__esModule",{value:!0});const r=a(Eh());class s extends r.default{select(u){let d=!1;const f=(u??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(u,{ascending:d=!0,nullsFirst:f,foreignTable:p,referencedTable:g=p}={}){const y=g?`${g}.order`:"order",w=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${w?`${w},`:""}${u}.${d?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(u,{foreignTable:d,referencedTable:f=d}={}){const p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${u}`),this}range(u,d,{foreignTable:f,referencedTable:p=f}={}){const g=typeof p>"u"?"offset":`${p}.offset`,y=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(g,`${u}`),this.url.searchParams.set(y,`${d-u+1}`),this}abortSignal(u){return this.signal=u,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:u=!1,verbose:d=!1,settings:f=!1,buffers:p=!1,wal:g=!1,format:y="text"}={}){var w;const _=[u?"analyze":null,d?"verbose":null,f?"settings":null,p?"buffers":null,g?"wal":null].filter(Boolean).join("|"),j=(w=this.headers.get("Accept"))!==null&&w!==void 0?w:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${j}"; options=${_};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(u){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${u}`),this}}return Wn.default=s,Wn}var Wd;function Bl(){if(Wd)return qn;Wd=1;var a=qn&&qn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(qn,"__esModule",{value:!0});const r=a(Ch());class s extends r.default{eq(u,d){return this.url.searchParams.append(u,`eq.${d}`),this}neq(u,d){return this.url.searchParams.append(u,`neq.${d}`),this}gt(u,d){return this.url.searchParams.append(u,`gt.${d}`),this}gte(u,d){return this.url.searchParams.append(u,`gte.${d}`),this}lt(u,d){return this.url.searchParams.append(u,`lt.${d}`),this}lte(u,d){return this.url.searchParams.append(u,`lte.${d}`),this}like(u,d){return this.url.searchParams.append(u,`like.${d}`),this}likeAllOf(u,d){return this.url.searchParams.append(u,`like(all).{${d.join(",")}}`),this}likeAnyOf(u,d){return this.url.searchParams.append(u,`like(any).{${d.join(",")}}`),this}ilike(u,d){return this.url.searchParams.append(u,`ilike.${d}`),this}ilikeAllOf(u,d){return this.url.searchParams.append(u,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(u,d){return this.url.searchParams.append(u,`ilike(any).{${d.join(",")}}`),this}is(u,d){return this.url.searchParams.append(u,`is.${d}`),this}in(u,d){const f=Array.from(new Set(d)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(u,`in.(${f})`),this}contains(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cs.{${d.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(d)}`),this}containedBy(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cd.{${d.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(d)}`),this}rangeGt(u,d){return this.url.searchParams.append(u,`sr.${d}`),this}rangeGte(u,d){return this.url.searchParams.append(u,`nxl.${d}`),this}rangeLt(u,d){return this.url.searchParams.append(u,`sl.${d}`),this}rangeLte(u,d){return this.url.searchParams.append(u,`nxr.${d}`),this}rangeAdjacent(u,d){return this.url.searchParams.append(u,`adj.${d}`),this}overlaps(u,d){return typeof d=="string"?this.url.searchParams.append(u,`ov.${d}`):this.url.searchParams.append(u,`ov.{${d.join(",")}}`),this}textSearch(u,d,{config:f,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const y=f===void 0?"":`(${f})`;return this.url.searchParams.append(u,`${g}fts${y}.${d}`),this}match(u){return Object.entries(u).forEach(([d,f])=>{this.url.searchParams.append(d,`eq.${f}`)}),this}not(u,d,f){return this.url.searchParams.append(u,`not.${d}.${f}`),this}or(u,{foreignTable:d,referencedTable:f=d}={}){const p=f?`${f}.or`:"or";return this.url.searchParams.append(p,`(${u})`),this}filter(u,d,f){return this.url.searchParams.append(u,`${d}.${f}`),this}}return qn.default=s,qn}var Hd;function Th(){if(Hd)return Kn;Hd=1;var a=Kn&&Kn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Kn,"__esModule",{value:!0});const r=a(Bl());class s{constructor(u,{headers:d={},schema:f,fetch:p}){this.url=u,this.headers=new Headers(d),this.schema=f,this.fetch=p}select(u,{head:d=!1,count:f}={}){const p=d?"HEAD":"GET";let g=!1;const y=(u??"*").split("").map(w=>/\s/.test(w)&&!g?"":(w==='"'&&(g=!g),w)).join("");return this.url.searchParams.set("select",y),f&&this.headers.append("Prefer",`count=${f}`),new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(u,{count:d,defaultToNull:f=!0}={}){var p;const g="POST";if(d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const y=u.reduce((w,_)=>w.concat(Object.keys(_)),[]);if(y.length>0){const w=[...new Set(y)].map(_=>`"${_}"`);this.url.searchParams.set("columns",w.join(","))}}return new r.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(u,{onConflict:d,ignoreDuplicates:f=!1,count:p,defaultToNull:g=!0}={}){var y;const w="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),p&&this.headers.append("Prefer",`count=${p}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const _=u.reduce((j,C)=>j.concat(Object.keys(C)),[]);if(_.length>0){const j=[...new Set(_)].map(C=>`"${C}"`);this.url.searchParams.set("columns",j.join(","))}}return new r.default({method:w,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(u,{count:d}={}){var f;const p="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:u}={}){var d;const f="DELETE";return u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Kn.default=s,Kn}var Vd;function p0(){if(Vd)return Fn;Vd=1;var a=Fn&&Fn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Fn,"__esModule",{value:!0});const r=a(Th()),s=a(Bl());class o{constructor(d,{headers:f={},schema:p,fetch:g}={}){this.url=d,this.headers=new Headers(f),this.schemaName=p,this.fetch=g}from(d){const f=new URL(`${this.url}/${d}`);return new r.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new o(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:p=!1,get:g=!1,count:y}={}){var w;let _;const j=new URL(`${this.url}/rpc/${d}`);let C;p||g?(_=p?"HEAD":"GET",Object.entries(f).filter(([E,O])=>O!==void 0).map(([E,O])=>[E,Array.isArray(O)?`{${O.join(",")}}`:`${O}`]).forEach(([E,O])=>{j.searchParams.append(E,O)})):(_="POST",C=f);const P=new Headers(this.headers);return y&&P.set("Prefer",`count=${y}`),new s.default({method:_,url:j,headers:P,schema:this.schemaName,body:C,fetch:(w=this.fetch)!==null&&w!==void 0?w:fetch})}}return Fn.default=o,Fn}var Gd;function m0(){if(Gd)return ot;Gd=1;var a=ot&&ot.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(ot,"__esModule",{value:!0}),ot.PostgrestError=ot.PostgrestBuilder=ot.PostgrestTransformBuilder=ot.PostgrestFilterBuilder=ot.PostgrestQueryBuilder=ot.PostgrestClient=void 0;const r=a(p0());ot.PostgrestClient=r.default;const s=a(Th());ot.PostgrestQueryBuilder=s.default;const o=a(Bl());ot.PostgrestFilterBuilder=o.default;const u=a(Ch());ot.PostgrestTransformBuilder=u.default;const d=a(Eh());ot.PostgrestBuilder=d.default;const f=a(Nh());return ot.PostgrestError=f.default,ot.default={PostgrestClient:r.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:u.default,PostgrestBuilder:d.default,PostgrestError:f.default},ot}var g0=m0();const y0=_h(g0),{PostgrestClient:x0,PostgrestQueryBuilder:dy,PostgrestFilterBuilder:hy,PostgrestTransformBuilder:fy,PostgrestBuilder:py,PostgrestError:my}=y0;class v0{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const o=s.node,u=parseInt(o.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let s=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(s+=`

Suggested solution: ${r.workaround}`),new Error(s)}static createWebSocket(r,s){const o=this.getWebSocketConstructor();return new o(r,s)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const w0="2.87.1",b0=`realtime-js/${w0}`,Ph="1.0.0",k0="2.0.0",Jd=Ph,El=1e4,_0=1e3,j0=100;var fn;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(fn||(fn={}));var nt;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(nt||(nt={}));var sr;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(sr||(sr={}));var Cl;(function(a){a.websocket="websocket"})(Cl||(Cl={}));var pn;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(pn||(pn={}));class S0{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,s){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return s(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var s;return this._isArrayBuffer((s=r.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var s,o;const u=(o=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(r){var s,o;const u=(o=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&o!==void 0?o:{},f=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(r,s,o){var u,d;const f=r.topic,p=(u=r.ref)!==null&&u!==void 0?u:"",g=(d=r.join_ref)!==null&&d!==void 0?d:"",y=r.payload.event,w=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},_=Object.keys(w).length===0?"":JSON.stringify(w);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const j=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+p.length+f.length+y.length+_.length,C=new ArrayBuffer(this.HEADER_LENGTH+j);let P=new DataView(C),E=0;P.setUint8(E++,this.KINDS.userBroadcastPush),P.setUint8(E++,g.length),P.setUint8(E++,p.length),P.setUint8(E++,f.length),P.setUint8(E++,y.length),P.setUint8(E++,_.length),P.setUint8(E++,s),Array.from(g,$=>P.setUint8(E++,$.charCodeAt(0))),Array.from(p,$=>P.setUint8(E++,$.charCodeAt(0))),Array.from(f,$=>P.setUint8(E++,$.charCodeAt(0))),Array.from(y,$=>P.setUint8(E++,$.charCodeAt(0))),Array.from(_,$=>P.setUint8(E++,$.charCodeAt(0)));var O=new Uint8Array(C.byteLength+o.byteLength);return O.set(new Uint8Array(C),0),O.set(new Uint8Array(o),C.byteLength),O.buffer}decode(r,s){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return s(o)}if(typeof r=="string"){const o=JSON.parse(r),[u,d,f,p,g]=o;return s({join_ref:u,ref:d,topic:f,event:p,payload:g})}return s({})}_binaryDecode(r){const s=new DataView(r),o=s.getUint8(0),u=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,s,u)}}_decodeUserBroadcast(r,s,o){const u=s.getUint8(1),d=s.getUint8(2),f=s.getUint8(3),p=s.getUint8(4);let g=this.HEADER_LENGTH+4;const y=o.decode(r.slice(g,g+u));g=g+u;const w=o.decode(r.slice(g,g+d));g=g+d;const _=o.decode(r.slice(g,g+f));g=g+f;const j=r.slice(g,r.byteLength),C=p===this.JSON_ENCODING?JSON.parse(o.decode(j)):j,P={type:this.BROADCAST_EVENT,event:w,payload:C};return f>0&&(P.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:P}}_isArrayBuffer(r){var s;return r instanceof ArrayBuffer||((s=r==null?void 0:r.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(r,s){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([o])=>s.includes(o)))}}class Oh{constructor(r,s){this.callback=r,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(Ue||(Ue={}));const Yd=(a,r,s={})=>{var o;const u=(o=s.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((d,f)=>(d[f]=N0(f,a,r,u),d),{}):{}},N0=(a,r,s,o)=>{const u=r.find(p=>p.name===a),d=u==null?void 0:u.type,f=s[a];return d&&!o.includes(d)?Ih(d,f):Tl(f)},Ih=(a,r)=>{if(a.charAt(0)==="_"){const s=a.slice(1,a.length);return P0(r,s)}switch(a){case Ue.bool:return E0(r);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return C0(r);case Ue.json:case Ue.jsonb:return T0(r);case Ue.timestamp:return O0(r);case Ue.abstime:case Ue.date:case Ue.daterange:case Ue.int4range:case Ue.int8range:case Ue.money:case Ue.reltime:case Ue.text:case Ue.time:case Ue.timestamptz:case Ue.timetz:case Ue.tsrange:case Ue.tstzrange:return Tl(r);default:return Tl(r)}},Tl=a=>a,E0=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},C0=a=>{if(typeof a=="string"){const r=parseFloat(a);if(!Number.isNaN(r))return r}return a},T0=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch(r){return console.log(`JSON parse error: ${r}`),a}return a},P0=(a,r)=>{if(typeof a!="string")return a;const s=a.length-1,o=a[s];if(a[0]==="{"&&o==="}"){let d;const f=a.slice(1,s);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(p=>Ih(r,p))}return a},O0=a=>typeof a=="string"?a.replace(" ","T"):a,Rh=a=>{const r=new URL(a);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class yl{constructor(r,s,o={},u=El){this.channel=r,this.event=s,this.payload=o,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,s){var o;return this._hasReceived(r)&&s((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:s}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(s))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Qd;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(Qd||(Qd={}));class Vs{constructor(r,s){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},u=>{const{onJoin:d,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vs.syncState(this.state,u,d,f),this.pendingDiffs.forEach(g=>{this.state=Vs.syncDiff(this.state,g,d,f)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},u=>{const{onJoin:d,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Vs.syncDiff(this.state,u,d,f),p())}),this.onJoin((u,d,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:f})}),this.onLeave((u,d,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,s,o,u){const d=this.cloneDeep(r),f=this.transformState(s),p={},g={};return this.map(d,(y,w)=>{f[y]||(g[y]=w)}),this.map(f,(y,w)=>{const _=d[y];if(_){const j=w.map(O=>O.presence_ref),C=_.map(O=>O.presence_ref),P=w.filter(O=>C.indexOf(O.presence_ref)<0),E=_.filter(O=>j.indexOf(O.presence_ref)<0);P.length>0&&(p[y]=P),E.length>0&&(g[y]=E)}else p[y]=w}),this.syncDiff(d,{joins:p,leaves:g},o,u)}static syncDiff(r,s,o,u){const{joins:d,leaves:f}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return o||(o=()=>{}),u||(u=()=>{}),this.map(d,(p,g)=>{var y;const w=(y=r[p])!==null&&y!==void 0?y:[];if(r[p]=this.cloneDeep(g),w.length>0){const _=r[p].map(C=>C.presence_ref),j=w.filter(C=>_.indexOf(C.presence_ref)<0);r[p].unshift(...j)}o(p,w,g)}),this.map(f,(p,g)=>{let y=r[p];if(!y)return;const w=g.map(_=>_.presence_ref);y=y.filter(_=>w.indexOf(_.presence_ref)<0),r[p]=y,u(p,y,g),y.length===0&&delete r[p]}),r}static map(r,s){return Object.getOwnPropertyNames(r).map(o=>s(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((s,o)=>{const u=r[o];return"metas"in u?s[o]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):s[o]=u,s},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xd;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(Xd||(Xd={}));var Gs;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(Gs||(Gs={}));var kr;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(kr||(kr={}));class ts{constructor(r,s={config:{}},o){var u,d;if(this.topic=r,this.params=s,this.socket=o,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new yl(this,sr.join,this.params,this.timeout),this.rejoinTimer=new Oh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(sr.reply,{},(f,p)=>{this._trigger(this._replyEventName(p),f)}),this.presence=new Vs(this),this.broadcastEndpointURL=Rh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,s=this.timeout){var o,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:f,presence:p,private:g}}=this.params,y=(u=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(C=>C.filter))!==null&&u!==void 0?u:[],w=!!this.bindings[Gs.PRESENCE]&&this.bindings[Gs.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,_={},j={broadcast:f,presence:Object.assign(Object.assign({},p),{enabled:w}),postgres_changes:y,private:g};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(C=>r==null?void 0:r(kr.CHANNEL_ERROR,C)),this._onClose(()=>r==null?void 0:r(kr.CLOSED)),this.updateJoinPayload(Object.assign({config:j},_)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:C})=>{var P;if(this.socket._isManualToken()||this.socket.setAuth(),C===void 0){r==null||r(kr.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,O=(P=E==null?void 0:E.length)!==null&&P!==void 0?P:0,$=[];for(let z=0;z<O;z++){const M=E[z],{filter:{event:V,schema:ne,table:B,filter:X}}=M,re=C&&C[z];if(re&&re.event===V&&ts.isFilterValueEqual(re.schema,ne)&&ts.isFilterValueEqual(re.table,B)&&ts.isFilterValueEqual(re.filter,X))$.push(Object.assign(Object.assign({},M),{id:re.id}));else{this.unsubscribe(),this.state=nt.errored,r==null||r(kr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=$,r&&r(kr.SUBSCRIBED);return}}).receive("error",C=>{this.state=nt.errored,r==null||r(kr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{r==null||r(kr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,s={}){return await this.send({type:"presence",event:"track",payload:r},s.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,s,o){return this.state===nt.joined&&r===Gs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,s,o)}async httpSend(r,s,o={}){var u;const d=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const f={method:"POST",headers:{Authorization:d,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:s,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=o.timeout)!==null&&u!==void 0?u:this.timeout);if(p.status===202)return{success:!0};let g=p.statusText;try{const y=await p.json();g=y.error||y.message||g}catch{}return Promise.reject(new Error(g))}async send(r,s={}){var o,u;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=r,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);return await((u=y.body)===null||u===void 0?void 0:u.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,p,g;const y=this._push(r.type,r,s.timeout||this.timeout);r.type==="broadcast"&&!(!((g=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&d("ok"),y.receive("ok",()=>d("ok")),y.receive("error",()=>d("error")),y.receive("timeout",()=>d("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=nt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(sr.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(u=>{o=new yl(this,sr.leave,{},r),o.receive("ok",()=>{s(),u("ok")}).receive("timeout",()=>{s(),u("timed out")}).receive("error",()=>{u("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nt.closed,this.bindings={}}async _fetchWithTimeout(r,s,o){const u=new AbortController,d=setTimeout(()=>u.abort(),o),f=await this.socket.fetch(r,Object.assign(Object.assign({},s),{signal:u.signal}));return clearTimeout(d),f}_push(r,s,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new yl(this,r,s,o);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>j0){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(r,s,o){return s}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,s,o){var u,d;const f=r.toLocaleLowerCase(),{close:p,error:g,leave:y,join:w}=sr;if(o&&[p,g,y,w].indexOf(f)>=0&&o!==this._joinRef())return;let j=this._onMessage(f,s,o);if(s&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(C=>{var P,E,O;return((P=C.filter)===null||P===void 0?void 0:P.event)==="*"||((O=(E=C.filter)===null||E===void 0?void 0:E.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===f}).map(C=>C.callback(j,o)):(d=this.bindings[f])===null||d===void 0||d.filter(C=>{var P,E,O,$,z,M;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in C){const V=C.id,ne=(P=C.filter)===null||P===void 0?void 0:P.event;return V&&((E=s.ids)===null||E===void 0?void 0:E.includes(V))&&(ne==="*"||(ne==null?void 0:ne.toLocaleLowerCase())===((O=s.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{const V=(z=($=C==null?void 0:C.filter)===null||$===void 0?void 0:$.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return V==="*"||V===((M=s==null?void 0:s.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===f}).map(C=>{if(typeof j=="object"&&"ids"in j){const P=j.data,{schema:E,table:O,commit_timestamp:$,type:z,errors:M}=P;j=Object.assign(Object.assign({},{schema:E,table:O,commit_timestamp:$,eventType:z,new:{},old:{},errors:M}),this._getPayloadRecords(P))}C.callback(j,o)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,s,o){const u=r.toLocaleLowerCase(),d={type:u,filter:s,callback:o};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(r,s){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===o&&ts.isEqual(u.filter,s))})),this}static isEqual(r,s){if(Object.keys(r).length!==Object.keys(s).length)return!1;for(const o in r)if(r[o]!==s[o])return!1;return!0}static isFilterValueEqual(r,s){return(r??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(sr.close,{},r)}_onError(r){this._on(sr.error,{},s=>r(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const s={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(s.new=Yd(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(s.old=Yd(r.columns,r.old_record)),s}}const xl=()=>{},hi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},I0=[1e3,2e3,5e3,1e4],R0=1e4,A0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class D0{constructor(r,s){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=El,this.transport=null,this.heartbeatIntervalMs=hi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xl,this.ref=0,this.reconnectTimer=null,this.vsn=Jd,this.logger=xl,this.conn=null,this.sendBuffer=[],this.serializer=new S0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=u=>u?(...d)=>u(...d):(...d)=>fetch(...d),!(!((o=s==null?void 0:s.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${r}/${Cl.websocket}`,this.httpEndpoint=Rh(r),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v0.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const s=r.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const s=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const r=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,s,o){this.logger(r,s,o)}connectionState(){switch(this.conn&&this.conn.readyState){case fn.connecting:return pn.Connecting;case fn.open:return pn.Open;case fn.closing:return pn.Closing;default:return pn.Closed}}isConnected(){return this.connectionState()===pn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,s={config:{}}){const o=`realtime:${r}`,u=this.getChannels().find(d=>d.topic===o);if(u)return u;{const d=new ts(`realtime:${r}`,s,this);return this.channels.push(d),d}}push(r){const{topic:s,event:o,payload:u,ref:d}=r,f=()=>{this.encode(r,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${s} ${o} (${d})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(_0,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},hi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let s=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${r}"`),s.unsubscribe())}_remove(r){this.channels=this.channels.filter(s=>s.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:u,payload:d,ref:f}=s,p=f?`(${f})`:"",g=d.status||"";this.log("receive",`${g} ${o} ${u} ${p}`.trim(),d),this.channels.filter(y=>y._isMember(o)).forEach(y=>y._trigger(u,d,f)),this._triggerStateCallbacks("message",s)})}_clearTimer(r){var s;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){if(this.conn){if(this.conn.readyState===fn.open||this.conn.readyState===fn.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var s;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(sr.error))}_appendParams(r,s){if(Object.keys(s).length===0)return r;const o=r.match(/\?/)?"&":"?",u=new URLSearchParams(s);return`${r}${o}${u}`}_workerObjectUrl(r){let s;if(r)s=r;else{const o=new Blob([A0],{type:"application/javascript"});s=URL.createObjectURL(o)}return s}_setConnectionState(r,s=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(r=null){let s,o=!1;if(r)s=r,o=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),s=this.accessTokenValue}else s=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(u=>{const d={access_token:s,version:b0};s&&u.updateJoinPayload(d),u.joinedOnce&&u._isJoined()&&u._push(sr.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${r}`,s)})}_triggerStateCallbacks(r,s){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(s)}catch(u){this.log("error",`error in ${r} callback`,u)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Oh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var s,o,u,d,f,p,g,y,w,_,j,C;switch(this.transport=(s=r==null?void 0:r.transport)!==null&&s!==void 0?s:null,this.timeout=(o=r==null?void 0:r.timeout)!==null&&o!==void 0?o:El,this.heartbeatIntervalMs=(u=r==null?void 0:r.heartbeatIntervalMs)!==null&&u!==void 0?u:hi.HEARTBEAT_INTERVAL,this.worker=(d=r==null?void 0:r.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=r==null?void 0:r.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(p=r==null?void 0:r.heartbeatCallback)!==null&&p!==void 0?p:xl,this.vsn=(g=r==null?void 0:r.vsn)!==null&&g!==void 0?g:Jd,r!=null&&r.params&&(this.params=r.params),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=r==null?void 0:r.reconnectAfterMs)!==null&&y!==void 0?y:(P=>I0[P-1]||R0),this.vsn){case Ph:this.encode=(w=r==null?void 0:r.encode)!==null&&w!==void 0?w:((P,E)=>E(JSON.stringify(P))),this.decode=(_=r==null?void 0:r.decode)!==null&&_!==void 0?_:((P,E)=>E(JSON.parse(P)));break;case k0:this.encode=(j=r==null?void 0:r.encode)!==null&&j!==void 0?j:this.serializer.encode.bind(this.serializer),this.decode=(C=r==null?void 0:r.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r==null?void 0:r.workerUrl}}}class _i extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function Ve(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}class L0 extends _i{constructor(r,s,o){super(r),this.name="StorageApiError",this.status=s,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pl extends _i{constructor(r,s){super(r),this.name="StorageUnknownError",this.originalError=s}}const Fl=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),$0=()=>Response,Ol=a=>{if(Array.isArray(a))return a.map(s=>Ol(s));if(typeof a=="function"||a!==Object(a))return a;const r={};return Object.entries(a).forEach(([s,o])=>{const u=s.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));r[u]=Ol(o)}),r},U0=a=>{if(typeof a!="object"||a===null)return!1;const r=Object.getPrototypeOf(a);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},z0=a=>!a||typeof a!="string"||a.length===0||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(a),vl=a=>{var r;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(r=a.error)===null||r===void 0?void 0:r.message)||JSON.stringify(a)},M0=(a,r,s)=>oe(void 0,void 0,void 0,function*(){const o=yield $0();a instanceof o&&!(s!=null&&s.noResolveJson)?a.json().then(u=>{const d=a.status||500,f=(u==null?void 0:u.statusCode)||d+"";r(new L0(vl(u),d,f))}).catch(u=>{r(new Pl(vl(u),u))}):r(new Pl(vl(a),a))}),B0=(a,r,s,o)=>{const u={method:a,headers:(r==null?void 0:r.headers)||{}};return a==="GET"||!o?u:(U0(o)?(u.headers=Object.assign({"Content-Type":"application/json"},r==null?void 0:r.headers),u.body=JSON.stringify(o)):u.body=o,r!=null&&r.duplex&&(u.duplex=r.duplex),Object.assign(Object.assign({},u),s))};function ea(a,r,s,o,u,d){return oe(this,void 0,void 0,function*(){return new Promise((f,p)=>{a(s,B0(r,o,u,d)).then(g=>{if(!g.ok)throw g;return o!=null&&o.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>M0(g,p,o))})})}function Js(a,r,s,o){return oe(this,void 0,void 0,function*(){return ea(a,"GET",r,s,o)})}function nr(a,r,s,o,u){return oe(this,void 0,void 0,function*(){return ea(a,"POST",r,o,u,s)})}function Il(a,r,s,o,u){return oe(this,void 0,void 0,function*(){return ea(a,"PUT",r,o,u,s)})}function F0(a,r,s,o){return oe(this,void 0,void 0,function*(){return ea(a,"HEAD",r,Object.assign(Object.assign({},s),{noResolveJson:!0}),o)})}function Kl(a,r,s,o,u){return oe(this,void 0,void 0,function*(){return ea(a,"DELETE",r,o,u,s)})}class K0{constructor(r,s){this.downloadFn=r,this.shouldThrowOnError=s}then(r,s){return this.execute().then(r,s)}execute(){return oe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}}var Ah;class q0{constructor(r,s){this.downloadFn=r,this.shouldThrowOnError=s,this[Ah]="BlobDownloadBuilder",this.promise=null}asStream(){return new K0(this.downloadFn,this.shouldThrowOnError)}then(r,s){return this.getPromise().then(r,s)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return oe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}}Ah=Symbol.toStringTag;const W0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class H0{constructor(r,s={},o,u){this.shouldThrowOnError=!1,this.url=r,this.headers=s,this.bucketId=o,this.fetch=Fl(u)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,s,o,u){return oe(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},Zd),u);let p=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&o instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),g&&d.append("metadata",this.encodeMetadata(g)),d.append("",o)):typeof FormData<"u"&&o instanceof FormData?(d=o,d.has("cacheControl")||d.append("cacheControl",f.cacheControl),g&&!d.has("metadata")&&d.append("metadata",this.encodeMetadata(g))):(d=o,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,g&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!f.duplex&&(f.duplex="half")),u!=null&&u.headers&&(p=Object.assign(Object.assign({},p),u.headers));const y=this._removeEmptyFolders(s),w=this._getFinalPath(y),_=yield(r=="PUT"?Il:nr)(this.fetch,`${this.url}/object/${w}`,d,Object.assign({headers:p},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:y,id:_.Id,fullPath:_.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ve(d))return{data:null,error:d};throw d}})}upload(r,s,o){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,s,o)})}uploadToSignedUrl(r,s,o,u){return oe(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(r),f=this._getFinalPath(d),p=new URL(this.url+`/object/upload/sign/${f}`);p.searchParams.set("token",s);try{let g;const y=Object.assign({upsert:Zd.upsert},u),w=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&o instanceof Blob?(g=new FormData,g.append("cacheControl",y.cacheControl),g.append("",o)):typeof FormData<"u"&&o instanceof FormData?(g=o,g.append("cacheControl",y.cacheControl)):(g=o,w["cache-control"]=`max-age=${y.cacheControl}`,w["content-type"]=y.contentType);const _=yield Il(this.fetch,p.toString(),g,{headers:w});return{data:{path:d,fullPath:_.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Ve(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(r,s){return oe(this,void 0,void 0,function*(){try{let o=this._getFinalPath(r);const u=Object.assign({},this.headers);s!=null&&s.upsert&&(u["x-upsert"]="true");const d=yield nr(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:u}),f=new URL(this.url+d.url),p=f.searchParams.get("token");if(!p)throw new _i("No token returned by API");return{data:{signedUrl:f.toString(),path:r,token:p},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}update(r,s,o){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,s,o)})}move(r,s,o){return oe(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:s,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ve(u))return{data:null,error:u};throw u}})}copy(r,s,o){return oe(this,void 0,void 0,function*(){try{return{data:{path:(yield nr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:s,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers})).Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ve(u))return{data:null,error:u};throw u}})}createSignedUrl(r,s,o){return oe(this,void 0,void 0,function*(){try{let u=this._getFinalPath(r),d=yield nr(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:s},o!=null&&o.transform?{transform:o.transform}:{}),{headers:this.headers});const f=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ve(u))return{data:null,error:u};throw u}})}createSignedUrls(r,s,o){return oe(this,void 0,void 0,function*(){try{const u=yield nr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:r},{headers:this.headers}),d=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return{data:u.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ve(u))return{data:null,error:u};throw u}})}download(r,s){const u=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),f=d?`?${d}`:"",p=this._getFinalPath(r),g=()=>Js(this.fetch,`${this.url}/${u}/${p}${f}`,{headers:this.headers,noResolveJson:!0});return new q0(g,this.shouldThrowOnError)}info(r){return oe(this,void 0,void 0,function*(){const s=this._getFinalPath(r);try{const o=yield Js(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Ol(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}exists(r){return oe(this,void 0,void 0,function*(){const s=this._getFinalPath(r);try{return yield F0(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o)&&o instanceof Pl){const u=o.originalError;if([400,404].includes(u==null?void 0:u.status))return{data:!1,error:o}}throw o}})}getPublicUrl(r,s){const o=this._getFinalPath(r),u=[],d=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";d!==""&&u.push(d);const p=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});g!==""&&u.push(g);let y=u.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${o}${y}`)}}}remove(r){return oe(this,void 0,void 0,function*(){try{return{data:yield Kl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}list(r,s,o){return oe(this,void 0,void 0,function*(){try{const u=Object.assign(Object.assign(Object.assign({},W0),s),{prefix:r||""});return{data:yield nr(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},o),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ve(u))return{data:null,error:u};throw u}})}listV2(r,s){return oe(this,void 0,void 0,function*(){try{const o=Object.assign({},r);return{data:yield nr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const s=[];return r.width&&s.push(`width=${r.width}`),r.height&&s.push(`height=${r.height}`),r.resize&&s.push(`resize=${r.resize}`),r.format&&s.push(`format=${r.format}`),r.quality&&s.push(`quality=${r.quality}`),s.join("&")}}const Dh="2.87.1",Lh={"X-Client-Info":`storage-js/${Dh}`};class V0{constructor(r,s={},o,u){this.shouldThrowOnError=!1;const d=new URL(r);u!=null&&u.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lh),s),this.fetch=Fl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return oe(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(r);return{data:yield Js(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}getBucket(r){return oe(this,void 0,void 0,function*(){try{return{data:yield Js(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}createBucket(r){return oe(this,arguments,void 0,function*(s,o={public:!1}){try{return{data:yield nr(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ve(u))return{data:null,error:u};throw u}})}updateBucket(r,s){return oe(this,void 0,void 0,function*(){try{return{data:yield Il(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}})}emptyBucket(r){return oe(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}deleteBucket(r){return oe(this,void 0,void 0,function*(){try{return{data:yield Kl(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(r){const s={};return r&&("limit"in r&&(s.limit=String(r.limit)),"offset"in r&&(s.offset=String(r.offset)),r.search&&(s.search=r.search),r.sortColumn&&(s.sortColumn=r.sortColumn),r.sortOrder&&(s.sortOrder=r.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}var Ys=class extends Error{constructor(a,r){var s;super(a),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&((s=r.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function G0(a,r,s){const o=new URL(r,a);if(s)for(const[u,d]of Object.entries(s))d!==void 0&&o.searchParams.set(u,d);return o.toString()}async function J0(a){return!a||a.type==="none"?{}:a.type==="bearer"?{Authorization:`Bearer ${a.token}`}:a.type==="header"?{[a.name]:a.value}:a.type==="custom"?await a.getHeaders():{}}function Y0(a){const r=a.fetchImpl??globalThis.fetch;return{async request({method:s,path:o,query:u,body:d,headers:f}){const p=G0(a.baseUrl,o,u),g=await J0(a.auth),y=await r(p,{method:s,headers:{...d?{"Content-Type":"application/json"}:{},...g,...f},body:d?JSON.stringify(d):void 0}),w=await y.text(),_=(y.headers.get("content-type")||"").includes("application/json"),j=_&&w?JSON.parse(w):w;if(!y.ok){const C=_?j:void 0,P=C==null?void 0:C.error;throw new Ys((P==null?void 0:P.message)??`Request failed with status ${y.status}`,{status:y.status,icebergType:P==null?void 0:P.type,icebergCode:P==null?void 0:P.code,details:C})}return{status:y.status,headers:y.headers,data:j}}}}function fi(a){return a.join("")}var Q0=class{constructor(a,r=""){this.client=a,this.prefix=r}async listNamespaces(a){const r=a?{parent:fi(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(a,r){const s={namespace:a.namespace,properties:r==null?void 0:r.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fi(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fi(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fi(a.namespace)}`}),!0}catch(r){if(r instanceof Ys&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(a,r){try{return await this.createNamespace(a,r)}catch(s){if(s instanceof Ys&&s.status===409)return;throw s}}};function Vn(a){return a.join("")}var X0=class{constructor(a,r="",s){this.client=a,this.prefix=r,this.accessDelegation=s}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vn(a.namespace)}/tables`})).data.identifiers}async createTable(a,r){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vn(a.namespace)}/tables`,body:r,headers:s})).data.metadata}async updateTable(a,r){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vn(a.namespace)}/tables/${a.name}`,body:r});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(a,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vn(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String((r==null?void 0:r.purge)??!1)}})}async loadTable(a){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vn(a.namespace)}/tables/${a.name}`,headers:r})).data.metadata}async tableExists(a){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vn(a.namespace)}/tables/${a.name}`,headers:r}),!0}catch(s){if(s instanceof Ys&&s.status===404)return!1;throw s}}async createTableIfNotExists(a,r){try{return await this.createTable(a,r)}catch(s){if(s instanceof Ys&&s.status===409)return await this.loadTable({namespace:a.namespace,name:r.name});throw s}}},Z0=class{constructor(a){var o;let r="v1";a.catalogName&&(r+=`/${a.catalogName}`);const s=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=Y0({baseUrl:s,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=(o=a.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new Q0(this.client,r),this.tableOps=new X0(this.client,r,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,r){return this.namespaceOps.createNamespace(a,r)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,r){return this.tableOps.createTable(a,r)}async updateTable(a,r){return this.tableOps.updateTable(a,r)}async dropTable(a,r){await this.tableOps.dropTable(a,r)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,r){return this.namespaceOps.createNamespaceIfNotExists(a,r)}async createTableIfNotExists(a,r){return this.tableOps.createTableIfNotExists(a,r)}};class em{constructor(r,s={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lh),s),this.fetch=Fl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return oe(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket`,{name:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}listBuckets(r){return oe(this,void 0,void 0,function*(){try{const s=new URLSearchParams;(r==null?void 0:r.limit)!==void 0&&s.set("limit",r.limit.toString()),(r==null?void 0:r.offset)!==void 0&&s.set("offset",r.offset.toString()),r!=null&&r.sortColumn&&s.set("sortColumn",r.sortColumn),r!=null&&r.sortOrder&&s.set("sortOrder",r.sortOrder),r!=null&&r.search&&s.set("search",r.search);const o=s.toString(),u=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield Js(this.fetch,u,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}deleteBucket(r){return oe(this,void 0,void 0,function*(){try{return{data:yield Kl(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}from(r){if(!z0(r))throw new _i("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new Z0({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:()=>oe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(s,{get(d,f){const p=d[f];return typeof p!="function"?p:(...g)=>oe(this,void 0,void 0,function*(){try{return{data:yield p.apply(d,g),error:null}}catch(y){if(o)throw y;return{data:null,error:y}}})}})}}const ql={"X-Client-Info":`storage-js/${Dh}`,"Content-Type":"application/json"};class $h extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function $t(a){return typeof a=="object"&&a!==null&&"__isStorageVectorsError"in a}class wl extends $h{constructor(r,s,o){super(r),this.name="StorageVectorsApiError",this.status=s,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tm extends $h{constructor(r,s){super(r),this.name="StorageVectorsUnknownError",this.originalError=s}}var eh;(function(a){a.InternalError="InternalError",a.S3VectorConflictException="S3VectorConflictException",a.S3VectorNotFoundException="S3VectorNotFoundException",a.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",a.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",a.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(eh||(eh={}));const Wl=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),rm=a=>{if(typeof a!="object"||a===null)return!1;const r=Object.getPrototypeOf(a);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},th=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),nm=(a,r,s)=>oe(void 0,void 0,void 0,function*(){if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!(s!=null&&s.noResolveJson)){const u=a.status||500,d=a;if(typeof d.json=="function")d.json().then(f=>{const p=(f==null?void 0:f.statusCode)||(f==null?void 0:f.code)||u+"";r(new wl(th(f),u,p))}).catch(()=>{const f=u+"",p=d.statusText||`HTTP ${u} error`;r(new wl(p,u,f))});else{const f=u+"",p=d.statusText||`HTTP ${u} error`;r(new wl(p,u,f))}}else r(new tm(th(a),a))}),sm=(a,r,s,o)=>{const u={method:a,headers:(r==null?void 0:r.headers)||{}};return o?(rm(o)?(u.headers=Object.assign({"Content-Type":"application/json"},r==null?void 0:r.headers),u.body=JSON.stringify(o)):u.body=o,Object.assign(Object.assign({},u),s)):u};function am(a,r,s,o,u,d){return oe(this,void 0,void 0,function*(){return new Promise((f,p)=>{a(s,sm(r,o,u,d)).then(g=>{if(!g.ok)throw g;if(o!=null&&o.noResolveJson)return g;const y=g.headers.get("content-type");return!y||!y.includes("application/json")?{}:g.json()}).then(g=>f(g)).catch(g=>nm(g,p,o))})})}function Ut(a,r,s,o,u){return oe(this,void 0,void 0,function*(){return am(a,"POST",r,o,u,s)})}class im{constructor(r,s={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ql),s),this.fetch=Wl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return oe(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/CreateIndex`,r,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}})}getIndex(r,s){return oe(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:r,indexName:s},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if($t(o))return{data:null,error:o};throw o}})}listIndexes(r){return oe(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/ListIndexes`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}})}deleteIndex(r,s){return oe(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:r,indexName:s},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if($t(o))return{data:null,error:o};throw o}})}}class om{constructor(r,s={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ql),s),this.fetch=Wl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return oe(this,void 0,void 0,function*(){try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ut(this.fetch,`${this.url}/PutVectors`,r,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}})}getVectors(r){return oe(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/GetVectors`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}})}listVectors(r){return oe(this,void 0,void 0,function*(){try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield Ut(this.fetch,`${this.url}/ListVectors`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}})}queryVectors(r){return oe(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/QueryVectors`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}})}deleteVectors(r){return oe(this,void 0,void 0,function*(){try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ut(this.fetch,`${this.url}/DeleteVectors`,r,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}})}}class lm{constructor(r,s={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ql),s),this.fetch=Wl(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return oe(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}})}getBucket(r){return oe(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}})}listBuckets(){return oe(this,arguments,void 0,function*(r={}){try{return{data:yield Ut(this.fetch,`${this.url}/ListVectorBuckets`,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}})}deleteBucket(r){return oe(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($t(s))return{data:null,error:s};throw s}})}}class um extends lm{constructor(r,s={}){super(r,s.headers||{},s.fetch)}from(r){return new cm(this.url,this.headers,r,this.fetch)}createBucket(r){const s=Object.create(null,{createBucket:{get:()=>super.createBucket}});return oe(this,void 0,void 0,function*(){return s.createBucket.call(this,r)})}getBucket(r){const s=Object.create(null,{getBucket:{get:()=>super.getBucket}});return oe(this,void 0,void 0,function*(){return s.getBucket.call(this,r)})}listBuckets(){const r=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return oe(this,arguments,void 0,function*(s={}){return r.listBuckets.call(this,s)})}deleteBucket(r){const s=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return oe(this,void 0,void 0,function*(){return s.deleteBucket.call(this,r)})}}class cm extends im{constructor(r,s,o,u){super(r,s,u),this.vectorBucketName=o}createIndex(r){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return oe(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const r=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return oe(this,arguments,void 0,function*(s={}){return r.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(r){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return oe(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,r)})}deleteIndex(r){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return oe(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,r)})}index(r){return new dm(this.url,this.headers,this.vectorBucketName,r,this.fetch)}}class dm extends om{constructor(r,s,o,u,d){super(r,s,d),this.vectorBucketName=o,this.indexName=u}putVectors(r){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return oe(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(r){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return oe(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const r=Object.create(null,{listVectors:{get:()=>super.listVectors}});return oe(this,arguments,void 0,function*(s={}){return r.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(r){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return oe(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(r){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return oe(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class hm extends V0{constructor(r,s={},o,u){super(r,s,o,u)}from(r){return new H0(this.url,this.headers,r,this.fetch)}get vectors(){return new um(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new em(this.url+"/iceberg",this.headers,this.fetch)}}const fm="2.39.0";let Hs="";typeof Deno<"u"?Hs="deno":typeof document<"u"?Hs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Hs="react-native":Hs="node";const pm={"X-Client-Info":`supabase-js-${Hs}/${fm}`};var mm=function(a,r,s,o){function u(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function p(w){try{y(o.next(w))}catch(_){f(_)}}function g(w){try{y(o.throw(w))}catch(_){f(_)}}function y(w){w.done?d(w.value):u(w.value).then(p,g)}y((o=o.apply(a,r||[])).next())})};const gm=a=>{let r;return a?r=a:typeof fetch>"u"?r=jh:r=fetch,(...s)=>r(...s)},ym=()=>typeof Headers>"u"?Sh:Headers,xm=(a,r,s)=>{const o=gm(s),u=ym();return(d,f)=>mm(void 0,void 0,void 0,function*(){var p;const g=(p=yield r())!==null&&p!==void 0?p:a;let y=new u(f==null?void 0:f.headers);return y.has("apikey")||y.set("apikey",a),y.has("Authorization")||y.set("Authorization",`Bearer ${g}`),o(d,Object.assign(Object.assign({},f),{headers:y}))})};function vm(a){return a.replace(/\/$/,"")}function wm(a,r){const{db:s,auth:o,realtime:u,global:d}=a,{db:f,auth:p,realtime:g,global:y}=r;return{db:Object.assign(Object.assign({},f),s),auth:Object.assign(Object.assign({},p),o),realtime:Object.assign(Object.assign({},g),u),global:Object.assign(Object.assign({},y),d)}}const Uh="2.87.1",Zn=30*1e3,Rl=3,bl=Rl*Zn,bm="http://localhost:9999",km="supabase.auth.token",_m={"X-Client-Info":`gotrue-js/${Uh}`},Al="X-Supabase-Api-Version",zh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},jm=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sm=600*1e3;class Qs extends Error{constructor(r,s,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=o}}function de(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class Nm extends Qs{constructor(r,s,o){super(r,s,o),this.name="AuthApiError",this.status=s,this.code=o}}function Em(a){return de(a)&&a.name==="AuthApiError"}class mn extends Qs{constructor(r,s){super(r),this.name="AuthUnknownError",this.originalError=s}}class Vr extends Qs{constructor(r,s,o,u){super(r,o,u),this.name=s,this.status=o}}class Lt extends Vr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Cm(a){return de(a)&&a.name==="AuthSessionMissingError"}class Gn extends Vr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pi extends Vr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class mi extends Vr{constructor(r,s=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Tm(a){return de(a)&&a.name==="AuthImplicitGrantRedirectError"}class rh extends Vr{constructor(r,s=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Dl extends Vr{constructor(r,s){super(r,"AuthRetryableFetchError",s,void 0)}}function kl(a){return de(a)&&a.name==="AuthRetryableFetchError"}class nh extends Vr{constructor(r,s,o){super(r,"AuthWeakPasswordError",s,"weak_password"),this.reasons=o}}class Ll extends Vr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const yi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sh=` 	
\r=`.split(""),Pm=(()=>{const a=new Array(128);for(let r=0;r<a.length;r+=1)a[r]=-1;for(let r=0;r<sh.length;r+=1)a[sh[r].charCodeAt(0)]=-2;for(let r=0;r<yi.length;r+=1)a[yi[r].charCodeAt(0)]=r;return a})();function ah(a,r,s){if(a!==null)for(r.queue=r.queue<<8|a,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;s(yi[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;s(yi[o]),r.queuedBits-=6}}function Mh(a,r,s){const o=Pm[a];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)s(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function ih(a){const r=[],s=f=>{r.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=f=>{Rm(f,o,s)};for(let f=0;f<a.length;f+=1)Mh(a.charCodeAt(f),u,d);return r.join("")}function Om(a,r){if(a<=127){r(a);return}else if(a<=2047){r(192|a>>6),r(128|a&63);return}else if(a<=65535){r(224|a>>12),r(128|a>>6&63),r(128|a&63);return}else if(a<=1114111){r(240|a>>18),r(128|a>>12&63),r(128|a>>6&63),r(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function Im(a,r){for(let s=0;s<a.length;s+=1){let o=a.charCodeAt(s);if(o>55295&&o<=56319){const u=(o-55296)*1024&65535;o=(a.charCodeAt(s+1)-56320&65535|u)+65536,s+=1}Om(o,r)}}function Rm(a,r,s){if(r.utf8seq===0){if(a<=127){s(a);return}for(let o=1;o<6;o+=1)if((a>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=a&31;else if(r.utf8seq===3)r.codepoint=a&15;else if(r.utf8seq===4)r.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|a&63,r.utf8seq-=1,r.utf8seq===0&&s(r.codepoint)}}function rs(a){const r=[],s={queue:0,queuedBits:0},o=u=>{r.push(u)};for(let u=0;u<a.length;u+=1)Mh(a.charCodeAt(u),s,o);return new Uint8Array(r)}function Am(a){const r=[];return Im(a,s=>r.push(s)),new Uint8Array(r)}function gn(a){const r=[],s={queue:0,queuedBits:0},o=u=>{r.push(u)};return a.forEach(u=>ah(u,s,o)),ah(null,s,o),r.join("")}function Dm(a){return Math.round(Date.now()/1e3)+a}function Lm(){return Symbol("auth-callback")}const ht=()=>typeof window<"u"&&typeof document<"u",cn={tested:!1,writable:!1},Bh=()=>{if(!ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cn.tested)return cn.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),cn.tested=!0,cn.writable=!0}catch{cn.tested=!0,cn.writable=!1}return cn.writable};function $m(a){const r={},s=new URL(a);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((u,d)=>{r[d]=u})}catch{}return s.searchParams.forEach((o,u)=>{r[u]=o}),r}const Fh=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),Um=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",es=async(a,r,s)=>{await a.setItem(r,JSON.stringify(s))},dn=async(a,r)=>{const s=await a.getItem(r);if(!s)return null;try{return JSON.parse(s)}catch{return s}},dt=async(a,r)=>{await a.removeItem(r)};class ji{constructor(){this.promise=new ji.promiseConstructor((r,s)=>{this.resolve=r,this.reject=s})}}ji.promiseConstructor=Promise;function _l(a){const r=a.split(".");if(r.length!==3)throw new Ll("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!jm.test(r[o]))throw new Ll("JWT not in base64url format");return{header:JSON.parse(ih(r[0])),payload:JSON.parse(ih(r[1])),signature:rs(r[2]),raw:{header:r[0],payload:r[1]}}}async function zm(a){return await new Promise(r=>{setTimeout(()=>r(null),a)})}function Mm(a,r){return new Promise((o,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await a(d);if(!r(d,null,f)){o(f);return}}catch(f){if(!r(d,f)){u(f);return}}})()})}function Bm(a){return("0"+a.toString(16)).substr(-2)}function Fm(){const r=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=s.length;let u="";for(let d=0;d<56;d++)u+=s.charAt(Math.floor(Math.random()*o));return u}return crypto.getRandomValues(r),Array.from(r,Bm).join("")}async function Km(a){const s=new TextEncoder().encode(a),o=await crypto.subtle.digest("SHA-256",s),u=new Uint8Array(o);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function qm(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const s=await Km(a);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jn(a,r,s=!1){const o=Fm();let u=o;s&&(u+="/PASSWORD_RECOVERY"),await es(a,`${r}-code-verifier`,u);const d=await qm(o);return[d,o===d?"plain":"s256"]}const Wm=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Hm(a){const r=a.headers.get(Al);if(!r||!r.match(Wm))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Vm(a){if(!a)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(a<=r)throw new Error("JWT has expired")}function Gm(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Jm=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yn(a){if(!Jm.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jl(){const a={};return new Proxy(a,{get:(r,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ym(a,r){return new Proxy(a,{get:(s,o,u)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const d=o.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,o,u)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(s,o,u)}})}function oh(a){return JSON.parse(JSON.stringify(a))}const hn=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),Qm=[502,503,504];async function lh(a){var r;if(!Um(a))throw new Dl(hn(a),0);if(Qm.includes(a.status))throw new Dl(hn(a),a.status);let s;try{s=await a.json()}catch(d){throw new mn(hn(d),d)}let o;const u=Hm(a);if(u&&u.getTime()>=zh["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?o=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(o=s.error_code),o){if(o==="weak_password")throw new nh(hn(s),a.status,((r=s.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new Lt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new nh(hn(s),a.status,s.weak_password.reasons);throw new Nm(hn(s),a.status||500,o)}const Xm=(a,r,s,o)=>{const u={method:a,headers:(r==null?void 0:r.headers)||{}};return a==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r==null?void 0:r.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),s))};async function ge(a,r,s,o){var u;const d=Object.assign({},o==null?void 0:o.headers);d[Al]||(d[Al]=zh["2024-01-01"].name),o!=null&&o.jwt&&(d.Authorization=`Bearer ${o.jwt}`);const f=(u=o==null?void 0:o.query)!==null&&u!==void 0?u:{};o!=null&&o.redirectTo&&(f.redirect_to=o.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await Zm(a,r,s+p,{headers:d,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(g):{data:Object.assign({},g),error:null}}async function Zm(a,r,s,o,u,d){const f=Xm(r,o,u,d);let p;try{p=await a(s,Object.assign({},f))}catch(g){throw console.error(g),new Dl(hn(g),0)}if(p.ok||await lh(p),o!=null&&o.noResolveJson)return p;try{return await p.json()}catch(g){await lh(g)}}function rr(a){var r;let s=null;rg(a)&&(s=Object.assign({},a),a.expires_at||(s.expires_at=Dm(a.expires_in)));const o=(r=a.user)!==null&&r!==void 0?r:a;return{data:{session:s,user:o},error:null}}function uh(a){const r=rr(a);return!r.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0)&&(r.data.weak_password=a.weak_password),r}function qr(a){var r;return{data:{user:(r=a.user)!==null&&r!==void 0?r:a},error:null}}function eg(a){return{data:a,error:null}}function tg(a){const{action_link:r,email_otp:s,hashed_token:o,redirect_to:u,verification_type:d}=a,f=ki(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:r,email_otp:s,hashed_token:o,redirect_to:u,verification_type:d},g=Object.assign({},f);return{data:{properties:p,user:g},error:null}}function ch(a){return a}function rg(a){return a.access_token&&a.refresh_token&&a.expires_in}const Sl=["global","local","others"];class ng{constructor({url:r="",headers:s={},fetch:o}){this.url=r,this.headers=s,this.fetch=Fh(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,s=Sl[0]){if(Sl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Sl.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(de(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,s={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:qr})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:s}=r,o=ki(r,["options"]),u=Object.assign(Object.assign({},o),s);return"newEmail"in o&&(u.new_email=o==null?void 0:o.newEmail,delete u.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:tg,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(de(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(r){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:qr})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async listUsers(r){var s,o,u,d,f,p,g;try{const y={nextPage:null,lastPage:0,total:0},w=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=r==null?void 0:r.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(d=(u=r==null?void 0:r.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:ch});if(w.error)throw w.error;const _=await w.json(),j=(f=w.headers.get("x-total-count"))!==null&&f!==void 0?f:0,C=(g=(p=w.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return C.length>0&&(C.forEach(P=>{const E=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(P.split(";")[1].split("=")[1]);y[`${O}Page`]=E}),y.total=parseInt(j)),{data:Object.assign(Object.assign({},_),y),error:null}}catch(y){if(de(y))return{data:{users:[]},error:y};throw y}}async getUserById(r){Yn(r);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:qr})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async updateUserById(r,s){Yn(r);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:s,headers:this.headers,xform:qr})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,s=!1){Yn(r);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:s},xform:qr})}catch(o){if(de(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){Yn(r.userId);try{const{data:s,error:o}=await ge(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:s,error:o}}catch(s){if(de(s))return{data:null,error:s};throw s}}async _deleteFactor(r){Yn(r.userId),Yn(r.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}}async _listOAuthClients(r){var s,o,u,d,f,p,g;try{const y={nextPage:null,lastPage:0,total:0},w=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(s=r==null?void 0:r.page)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:"",per_page:(d=(u=r==null?void 0:r.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:ch});if(w.error)throw w.error;const _=await w.json(),j=(f=w.headers.get("x-total-count"))!==null&&f!==void 0?f:0,C=(g=(p=w.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return C.length>0&&(C.forEach(P=>{const E=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(P.split(";")[1].split("=")[1]);y[`${O}Page`]=E}),y.total=parseInt(j)),{data:Object.assign(Object.assign({},_),y),error:null}}catch(y){if(de(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(r){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(de(s))return{data:null,error:s};throw s}}async _getOAuthClient(r){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(de(s))return{data:null,error:s};throw s}}async _updateOAuthClient(r,s){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:s,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(de(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(r){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(de(s))return{data:null,error:s};throw s}}}function dh(a={}){return{getItem:r=>a[r]||null,setItem:(r,s)=>{a[r]=s},removeItem:r=>{delete a[r]}}}const Qn={debug:!!(globalThis&&Bh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Kh extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class sg extends Kh{}async function ag(a,r,s){Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async u=>{if(u){Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,u.name);try{return await s()}finally{Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,u.name)}}else{if(r===0)throw Qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new sg(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(Qn.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function ig(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function qh(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function og(a){return parseInt(a,16)}function lg(a){const r=new TextEncoder().encode(a);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function ug(a){var r;const{chainId:s,domain:o,expirationTime:u,issuedAt:d=new Date,nonce:f,notBefore:p,requestId:g,resources:y,scheme:w,uri:_,version:j}=a;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(j!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${j}`);if(!((r=a.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const C=qh(a.address),P=w?`${w}://${o}`:o,E=a.statement?`${a.statement}
`:"",O=`${P} wants you to sign in with your Ethereum account:
${C}

${E}`;let $=`URI: ${_}
Version: ${j}
Chain ID: ${s}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(u&&($+=`
Expiration Time: ${u.toISOString()}`),p&&($+=`
Not Before: ${p.toISOString()}`),g&&($+=`
Request ID: ${g}`),y){let z=`
Resources:`;for(const M of y){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);z+=`
- ${M}`}$+=z}return`${O}
${$}`}class et extends Error{constructor({message:r,code:s,cause:o,name:u}){var d;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(d=u??(o instanceof Error?o.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=s}}class xi extends et{constructor(r,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:r}),this.name="WebAuthnUnknownError",this.originalError=s}}function cg({error:a,options:r}){var s,o,u;const{publicKey:d}=r;if(!d)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(r.signal instanceof AbortSignal)return new et({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((s=d.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new et({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(r.mediation==="conditional"&&((o=d.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new et({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((u=d.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new et({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new et({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new et({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return d.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new et({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new et({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const f=window.location.hostname;if(Wh(f)){if(d.rp.id!==f)return new et({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new et({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function dg({error:a,options:r}){const{publicKey:s}=r;if(!s)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(r.signal instanceof AbortSignal)return new et({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new et({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const o=window.location.hostname;if(Wh(o)){if(s.rpId!==o)return new et({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class hg{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const fg=new hg;function pg(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:r,user:s,excludeCredentials:o}=a,u=ki(a,["challenge","user","excludeCredentials"]),d=rs(r).buffer,f=Object.assign(Object.assign({},s),{id:rs(s.id).buffer}),p=Object.assign(Object.assign({},u),{challenge:d,user:f});if(o&&o.length>0){p.excludeCredentials=new Array(o.length);for(let g=0;g<o.length;g++){const y=o[g];p.excludeCredentials[g]=Object.assign(Object.assign({},y),{id:rs(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return p}function mg(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:r,allowCredentials:s}=a,o=ki(a,["challenge","allowCredentials"]),u=rs(r).buffer,d=Object.assign(Object.assign({},o),{challenge:u});if(s&&s.length>0){d.allowCredentials=new Array(s.length);for(let f=0;f<s.length;f++){const p=s[f];d.allowCredentials[f]=Object.assign(Object.assign({},p),{id:rs(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function gg(a){var r;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const s=a;return{id:a.id,rawId:a.id,response:{attestationObject:gn(new Uint8Array(a.response.attestationObject)),clientDataJSON:gn(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function yg(a){var r;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const s=a,o=a.getClientExtensionResults(),u=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:gn(new Uint8Array(u.authenticatorData)),clientDataJSON:gn(new Uint8Array(u.clientDataJSON)),signature:gn(new Uint8Array(u.signature)),userHandle:u.userHandle?gn(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Wh(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function hh(){var a,r;return!!(ht()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator==null?void 0:navigator.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.get)=="function")}async function xg(a){try{const r=await navigator.credentials.create(a);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new xi("Browser returned unexpected credential type",r)}:{data:null,error:new xi("Empty credential response",r)}}catch(r){return{data:null,error:cg({error:r,options:a})}}}async function vg(a){try{const r=await navigator.credentials.get(a);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new xi("Browser returned unexpected credential type",r)}:{data:null,error:new xi("Empty credential response",r)}}catch(r){return{data:null,error:dg({error:r,options:a})}}}const wg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},bg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function vi(...a){const r=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),s=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),o={};for(const u of a)if(u)for(const d in u){const f=u[d];if(f!==void 0)if(Array.isArray(f))o[d]=f;else if(s(f))o[d]=f;else if(r(f)){const p=o[d];r(p)?o[d]=vi(p,f):o[d]=vi(f)}else o[d]=f}return o}function kg(a,r){return vi(wg,a,r||{})}function _g(a,r){return vi(bg,a,r||{})}class jg{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:s,friendlyName:o,signal:u},d){try{const{data:f,error:p}=await this.client.mfa.challenge({factorId:r,webauthn:s});if(!f)return{data:null,error:p};const g=u??fg.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:y}=f.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${o}`),y.displayName||(y.displayName=y.name)}switch(f.webauthn.type){case"create":{const y=kg(f.webauthn.credential_options.publicKey,d==null?void 0:d.create),{data:w,error:_}=await xg({publicKey:y,signal:g});return w?{data:{factorId:r,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}case"request":{const y=_g(f.webauthn.credential_options.publicKey,d==null?void 0:d.request),{data:w,error:_}=await vg(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:y,signal:g}));return w?{data:{factorId:r,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}}}catch(f){return de(f)?{data:null,error:f}:{data:null,error:new mn("Unexpected error in challenge",f)}}}async _verify({challengeId:r,factorId:s,webauthn:o}){return this.client.mfa.verify({factorId:s,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!s)return{data:null,error:new Qs("rpId is required for WebAuthn authentication")};try{if(!hh())return{data:null,error:new mn("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this.challenge({factorId:r,webauthn:{rpId:s,rpOrigins:o},signal:u},{request:d});if(!f)return{data:null,error:p};const{webauthn:g}=f;return this._verify({factorId:r,challengeId:f.challengeId,webauthn:{type:g.type,rpId:s,rpOrigins:o,credential_response:g.credential_response}})}catch(f){return de(f)?{data:null,error:f}:{data:null,error:new mn("Unexpected error in authenticate",f)}}}async _register({friendlyName:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!s)return{data:null,error:new Qs("rpId is required for WebAuthn registration")};try{if(!hh())return{data:null,error:new mn("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this._enroll({friendlyName:r});if(!f)return await this.client.mfa.listFactors().then(w=>{var _;return(_=w.data)===null||_===void 0?void 0:_.all.find(j=>j.factor_type==="webauthn"&&j.friendly_name===r&&j.status!=="unverified")}).then(w=>w?this.client.mfa.unenroll({factorId:w==null?void 0:w.id}):void 0),{data:null,error:p};const{data:g,error:y}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:s,rpOrigins:o},signal:u},{create:d});return g?this._verify({factorId:f.id,challengeId:g.challengeId,webauthn:{rpId:s,rpOrigins:o,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:y}}catch(f){return de(f)?{data:null,error:f}:{data:null,error:new mn("Unexpected error in register",f)}}}}ig();const Sg={url:bm,storageKey:km,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_m,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function fh(a,r,s){return await s()}const Xn={};class Xs{get jwks(){var r,s;return(s=(r=Xn[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(r){Xn[this.storageKey]=Object.assign(Object.assign({},Xn[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,s;return(s=(r=Xn[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Xn[this.storageKey]=Object.assign(Object.assign({},Xn[this.storageKey]),{cachedAt:r})}constructor(r){var s,o,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},Sg),r);if(this.storageKey=d.storageKey,this.instanceID=(s=Xs.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Xs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&ht()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new ng({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=Fh(d.fetch),this.lock=d.lock||fh,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,d.lock?this.lock=d.lock:this.persistSession&&ht()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=ag:this.lock=fh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:Bh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=dh(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=dh(this.memoryStorage)),ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Uh}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let s={},o="none";if(ht()&&(s=$m(window.location.href),this._isImplicitGrantCallback(s)?o="implicit":await this._isPKCECallback(s)&&(o="pkce")),ht()&&this.detectSessionInUrl&&o!=="none"){const{data:u,error:d}=await this._getSessionFromURL(s,o);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),Tm(d)){const g=(r=d.details)===null||r===void 0?void 0:r.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:p}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return de(s)?this._returnResult({error:s}):this._returnResult({error:new mn("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var s,o,u;try{const d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(s=r==null?void 0:r.options)===null||s===void 0?void 0:s.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(u=r==null?void 0:r.options)===null||u===void 0?void 0:u.captchaToken}},xform:rr}),{data:f,error:p}=d;if(p||!f)return this._returnResult({data:{user:null,session:null},error:p});const g=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:y,session:g},error:null})}catch(d){if(de(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(r){var s,o,u;try{let d;if("email"in r){const{email:w,password:_,options:j}=r;let C=null,P=null;this.flowType==="pkce"&&([C,P]=await Jn(this.storage,this.storageKey)),d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j==null?void 0:j.emailRedirectTo,body:{email:w,password:_,data:(s=j==null?void 0:j.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken},code_challenge:C,code_challenge_method:P},xform:rr})}else if("phone"in r){const{phone:w,password:_,options:j}=r;d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:_,data:(o=j==null?void 0:j.data)!==null&&o!==void 0?o:{},channel:(u=j==null?void 0:j.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken}},xform:rr})}else throw new pi("You must provide either an email or phone number and a password");const{data:f,error:p}=d;if(p||!f)return await dt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const g=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:y,session:g},error:null})}catch(d){if(await dt(this.storage,`${this.storageKey}-code-verifier`),de(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(r){try{let s;if("email"in r){const{email:d,password:f,options:p}=r;s=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:uh})}else if("phone"in r){const{phone:d,password:f,options:p}=r;s=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:uh})}else throw new pi("You must provide either an email or phone number and a password");const{data:o,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o||!o.session||!o.user){const d=new Gn;return this._returnResult({data:{user:null,session:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:u})}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(r){var s,o,u,d;return await this._handleProviderSignIn(r.provider,{redirectTo:(s=r.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=r.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=r.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:s}=r;switch(s){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(r){var s,o,u,d,f,p,g,y,w,_,j;let C,P;if("message"in r)C=r.message,P=r.signature;else{const{chain:E,wallet:O,statement:$,options:z}=r;let M;if(ht())if(typeof O=="object")M=O;else{const ve=window;if("ethereum"in ve&&typeof ve.ethereum=="object"&&"request"in ve.ethereum&&typeof ve.ethereum.request=="function")M=ve.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!(z!=null&&z.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=O}const V=new URL((s=z==null?void 0:z.url)!==null&&s!==void 0?s:window.location.href),ne=await M.request({method:"eth_requestAccounts"}).then(ve=>ve).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ne||ne.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=qh(ne[0]);let X=(o=z==null?void 0:z.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!X){const ve=await M.request({method:"eth_chainId"});X=og(ve)}const re={domain:V.host,address:B,statement:$,uri:V.href,version:"1",chainId:X,nonce:(u=z==null?void 0:z.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(d=z==null?void 0:z.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(p=z==null?void 0:z.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(g=z==null?void 0:z.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(y=z==null?void 0:z.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(w=z==null?void 0:z.signInWithEthereum)===null||w===void 0?void 0:w.resources};C=ug(re),P=await M.request({method:"personal_sign",params:[lg(C),B]})}try{const{data:E,error:O}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:P},!((_=r.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(j=r.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:rr});if(O)throw O;if(!E||!E.session||!E.user){const $=new Gn;return this._returnResult({data:{user:null,session:null},error:$})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:O})}catch(E){if(de(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(r){var s,o,u,d,f,p,g,y,w,_,j,C;let P,E;if("message"in r)P=r.message,E=r.signature;else{const{chain:O,wallet:$,statement:z,options:M}=r;let V;if(ht())if(typeof $=="object")V=$;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))V=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=$}const ne=new URL((s=M==null?void 0:M.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in V&&V.signIn){const B=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M==null?void 0:M.signInWithSolana),{version:"1",domain:ne.host,uri:ne.href}),z?{statement:z}:null));let X;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")X=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)X=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in X&&"signature"in X&&(typeof X.signedMessage=="string"||X.signedMessage instanceof Uint8Array)&&X.signature instanceof Uint8Array)P=typeof X.signedMessage=="string"?X.signedMessage:new TextDecoder().decode(X.signedMessage),E=X.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${ne.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${ne.href}`,`Issued At: ${(u=(o=M==null?void 0:M.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=M==null?void 0:M.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((f=M==null?void 0:M.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((p=M==null?void 0:M.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((g=M==null?void 0:M.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((y=M==null?void 0:M.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((_=(w=M==null?void 0:M.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||_===void 0)&&_.length?["Resources",...M.signInWithSolana.resources.map(X=>`- ${X}`)]:[]].join(`
`);const B=await V.signMessage(new TextEncoder().encode(P),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=B}}try{const{data:O,error:$}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:gn(E)},!((j=r.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(C=r.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:rr});if($)throw $;if(!O||!O.session||!O.user){const z=new Gn;return this._returnResult({data:{user:null,session:null},error:z})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:$})}catch(O){if(de(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async _exchangeCodeForSession(r){const s=await dn(this.storage,`${this.storageKey}-code-verifier`),[o,u]=(s??"").split("/");try{const{data:d,error:f}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:rr});if(await dt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!d||!d.session||!d.user){const p=new Gn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:f})}catch(d){if(await dt(this.storage,`${this.storageKey}-code-verifier`),de(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(r){try{const{options:s,provider:o,token:u,access_token:d,nonce:f}=r,p=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:u,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:rr}),{data:g,error:y}=p;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!g||!g.session||!g.user){const w=new Gn;return this._returnResult({data:{user:null,session:null},error:w})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:y})}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(r){var s,o,u,d,f;try{if("email"in r){const{email:p,options:g}=r;let y=null,w=null;this.flowType==="pkce"&&([y,w]=await Jn(this.storage,this.storageKey));const{error:_}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=g==null?void 0:g.data)!==null&&s!==void 0?s:{},create_user:(o=g==null?void 0:g.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:y,code_challenge_method:w},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in r){const{phone:p,options:g}=r,{data:y,error:w}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(u=g==null?void 0:g.data)!==null&&u!==void 0?u:{},create_user:(d=g==null?void 0:g.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(f=g==null?void 0:g.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:w})}throw new pi("You must provide either an email or phone number.")}catch(p){if(await dt(this.storage,`${this.storageKey}-code-verifier`),de(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(r){var s,o;try{let u,d;"options"in r&&(u=(s=r.options)===null||s===void 0?void 0:s.redirectTo,d=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:p}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:rr});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,y=f.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:y,session:g},error:null})}catch(u){if(de(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(r){var s,o,u,d,f;try{let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Jn(this.storage,this.storageKey));const y=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(s=r.options)===null||s===void 0?void 0:s.redirectTo)!==null&&o!==void 0?o:void 0}),!((u=r==null?void 0:r.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:g}),headers:this.headers,xform:eg});return!((d=y.data)===null||d===void 0)&&d.url&&ht()&&!(!((f=r.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(p){if(await dt(this.storage,`${this.storageKey}-code-verifier`),de(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)throw o;if(!s)throw new Lt;const{error:u}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(r){if(de(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const s=`${this.url}/resend`;if("email"in r){const{email:o,type:u,options:d}=r,{error:f}=await ge(this.fetch,"POST",s,{headers:this.headers,body:{email:o,type:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in r){const{phone:o,type:u,options:d}=r,{data:f,error:p}=await ge(this.fetch,"POST",s,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p})}throw new pi("You must provide either an email or phone number and a type")}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(r,s){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await o,await s()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=s();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await r(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const s=await dn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?r=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<bl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const f=await dn(this.userStorage,this.storageKey+"-user");f!=null&&f.user?r.user=f.user:r.user=jl()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};r.user=Ym(r.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:u,error:d}=await this._callRefreshToken(r.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const s=await this._acquireLock(-1,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(r){try{return r?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:qr}):await this._useSession(async s=>{var o,u,d;const{data:f,error:p}=s;if(p)throw p;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lt}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:qr})})}catch(s){if(de(s))return Cm(s)&&(await this._removeSession(),await dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(r,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,s))}async _updateUser(r,s={}){try{return await this._useSession(async o=>{const{data:u,error:d}=o;if(d)throw d;if(!u.session)throw new Lt;const f=u.session;let p=null,g=null;this.flowType==="pkce"&&r.email!=null&&([p,g]=await Jn(this.storage,this.storageKey));const{data:y,error:w}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:p,code_challenge_method:g}),jwt:f.access_token,xform:qr});if(w)throw w;return f.user=y.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(o){if(await dt(this.storage,`${this.storageKey}-code-verifier`),de(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new Lt;const s=Date.now()/1e3;let o=s,u=!0,d=null;const{payload:f}=_l(r.access_token);if(f.exp&&(o=f.exp,u=o<=s),u){const{data:p,error:g}=await this._callRefreshToken(r.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p)return{data:{user:null,session:null},error:null};d=p}else{const{data:p,error:g}=await this._getUser(r.access_token);if(g)throw g;d={access_token:r.access_token,refresh_token:r.refresh_token,user:p.user,token_type:"bearer",expires_in:o-s,expires_at:o},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(s){if(de(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async s=>{var o;if(!r){const{data:f,error:p}=s;if(p)throw p;r=(o=f.session)!==null&&o!==void 0?o:void 0}if(!(r!=null&&r.refresh_token))throw new Lt;const{data:u,error:d}=await this._callRefreshToken(r.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(r,s){try{if(!ht())throw new mi("No browser detected.");if(r.error||r.error_description||r.error_code)throw new mi(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new rh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mi("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new rh("No code detected.");const{data:z,error:M}=await this._exchangeCodeForSession(r.code);if(M)throw M;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:u,access_token:d,refresh_token:f,expires_in:p,expires_at:g,token_type:y}=r;if(!d||!p||!f||!y)throw new mi("No session defined in URL");const w=Math.round(Date.now()/1e3),_=parseInt(p);let j=w+_;g&&(j=parseInt(g));const C=j-w;C*1e3<=Zn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${_}s`);const P=j-_;w-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,j,w):w-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,j,w);const{data:E,error:O}=await this._getUser(d);if(O)throw O;const $={provider_token:o,provider_refresh_token:u,access_token:d,expires_in:_,expires_at:j,refresh_token:f,token_type:y,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:$,redirectType:r.type},error:null})}catch(o){if(de(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const s=await dn(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&s)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async s=>{var o;const{data:u,error:d}=s;if(d)return this._returnResult({error:d});const f=(o=u.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:p}=await this.admin.signOut(f,r);if(p&&!(Em(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return r!=="others"&&(await this._removeSession(),await dt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const s=Lm(),o={id:s,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async s=>{var o,u;try{const{data:{session:d},error:f}=s;if(f)throw f;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",r,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(r))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",d),console.error(d)}})}async resetPasswordForEmail(r,s={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=await Jn(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(d){if(await dt(this.storage,`${this.storageKey}-code-verifier`),de(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var r;try{const{data:s,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=s.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var s;try{const{data:o,error:u}=await this._useSession(async d=>{var f,p,g,y,w;const{data:_,error:j}=d;if(j)throw j;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(f=r.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=r.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=r.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",C,{headers:this.headers,jwt:(w=(y=_.session)===null||y===void 0?void 0:y.access_token)!==null&&w!==void 0?w:void 0})});if(u)throw u;return ht()&&!(!((s=r.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:r.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(de(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async s=>{var o;try{const{error:u,data:{session:d}}=s;if(u)throw u;const{options:f,provider:p,token:g,access_token:y,nonce:w}=r,_=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=d==null?void 0:d.access_token)!==null&&o!==void 0?o:void 0,body:{provider:p,id_token:g,access_token:y,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:rr}),{data:j,error:C}=_;return C?this._returnResult({data:{user:null,session:null},error:C}):!j||!j.session||!j.user?this._returnResult({data:{user:null,session:null},error:new Gn}):(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("USER_UPDATED",j.session)),this._returnResult({data:j,error:C}))}catch(u){if(await dt(this.storage,`${this.storageKey}-code-verifier`),de(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(r){try{return await this._useSession(async s=>{var o,u;const{data:d,error:f}=s;if(f)throw f;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(u=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0})})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(r){const s=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(s,"begin");try{const o=Date.now();return await Mm(async u=>(u>0&&await zm(200*Math.pow(2,u-1)),this._debug(s,"refreshing attempt",u),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:rr})),(u,d)=>{const f=200*Math.pow(2,u);return d&&kl(d)&&Date.now()+f-o<Zn})}catch(o){if(this._debug(s,"error",o),de(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(s,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,s){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",s,"url",o),ht()&&!s.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,s;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const u=await dn(this.storage,this.storageKey);if(u&&this.userStorage){let f=await dn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await es(this.userStorage,this.storageKey+"-user",f)),u.user=(r=f==null?void 0:f.user)!==null&&r!==void 0?r:jl()}else if(u&&!u.user&&!u.user){const f=await dn(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(u.user=f.user,await dt(this.storage,this.storageKey+"-user"),await es(this.storage,this.storageKey,u)):u.user=jl()}if(this._debug(o,"session from storage",u),!this._isValidSession(u)){this._debug(o,"session is not valid"),u!==null&&await this._removeSession();return}const d=((s=u.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<bl;if(this._debug(o,`session has${d?"":" not"} expired with margin of ${bl}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),kl(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(u.access_token);!p&&(f!=null&&f.user)?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(o,"error",u),console.error(u);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var s,o;if(!r)throw new Lt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new ji;const{data:d,error:f}=await this._refreshAccessToken(r);if(f)throw f;if(!d.session)throw new Lt;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const p={data:d.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(d){if(this._debug(u,"error",d),de(d)){const f={data:null,error:d};return kl(d)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(r,s,o=!0){const u=`#_notifyAllSubscribers(${r})`;this._debug(u,"begin",s,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:s});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(r,s)}catch(g){d.push(g)}});if(await Promise.all(f),d.length>0){for(let p=0;p<d.length;p+=1)console.error(d[p]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await dt(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},r),o=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&s.user&&await es(this.userStorage,this.storageKey+"-user",{user:s.user});const u=Object.assign({},s);delete u.user;const d=oh(u);await es(this.storage,this.storageKey,d)}else{const u=oh(s);await es(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await dt(this.storage,this.storageKey),await dt(this.storage,this.storageKey+"-code-verifier"),await dt(this.storage,this.storageKey+"-user"),this.userStorage&&await dt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&ht()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",r)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Zn);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async s=>{const{data:{session:o}}=s;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((o.expires_at*1e3-r)/Zn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Zn}ms, refresh threshold is ${Rl} ticks`),u<=Rl&&await this._callRefreshToken(o.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Kh)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ht()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const s=`#_onVisibilityChanged(${r})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,s,o){const u=[`provider=${encodeURIComponent(s)}`];if(o!=null&&o.redirectTo&&u.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&u.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[d,f]=await Jn(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(p.toString())}if(o!=null&&o.queryParams){const d=new URLSearchParams(o.queryParams);u.push(d.toString())}return o!=null&&o.skipBrowserRedirect&&u.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${u.join("&")}`}async _unenroll(r){try{return await this._useSession(async s=>{var o;const{data:u,error:d}=s;return d?this._returnResult({data:null,error:d}):await ge(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=u==null?void 0:u.session)===null||o===void 0?void 0:o.access_token})})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(r){try{return await this._useSession(async s=>{var o,u;const{data:d,error:f}=s;if(f)return this._returnResult({data:null,error:f});const p=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:g,error:y}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=d==null?void 0:d.session)===null||o===void 0?void 0:o.access_token});return y?this._returnResult({data:null,error:y}):(r.factorType==="totp"&&g.type==="totp"&&(!((u=g==null?void 0:g.totp)===null||u===void 0)&&u.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:u,error:d}=s;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?gg(r.webauthn.credential_response):yg(r.webauthn.credential_response)})}:{code:r.code}),{data:p,error:g}=await ge(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:f,headers:this.headers,jwt:(o=u==null?void 0:u.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:g}))})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var o;const{data:u,error:d}=s;if(d)return this._returnResult({data:null,error:d});const f=await ge(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=u==null?void 0:u.session)===null||o===void 0?void 0:o.access_token});if(f.error)return f;const{data:p}=f;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:pg(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:mg(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(r){const{data:s,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:s.id,code:r.code})}async _listFactors(){var r;const{data:{user:s},error:o}=await this.getUser();if(o)return{data:null,error:o};const u={all:[],phone:[],totp:[],webauthn:[]};for(const d of(r=s==null?void 0:s.factors)!==null&&r!==void 0?r:[])u.all.push(d),d.status==="verified"&&u[d.factor_type].push(d);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var r,s;const{data:{session:o},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=_l(o.access_token);let f=null;d.aal&&(f=d.aal);let p=f;((s=(r=o.user.factors)===null||r===void 0?void 0:r.filter(w=>w.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const y=d.amr||[];return{data:{currentLevel:f,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async s=>{const{data:{session:o},error:u}=s;return u?this._returnResult({data:null,error:u}):o?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Lt})})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(r,s){try{return await this._useSession(async o=>{const{data:{session:u},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new Lt});const f=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&ht()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(o){if(de(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,s){try{return await this._useSession(async o=>{const{data:{session:u},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new Lt});const f=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&ht()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(o){if(de(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;return o?this._returnResult({data:null,error:o}):s?await ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Lt})})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async s=>{const{data:{session:o},error:u}=s;return u?this._returnResult({data:null,error:u}):o?(await ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Lt})})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(r,s={keys:[]}){let o=s.keys.find(p=>p.kid===r);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(p=>p.kid===r),o&&this.jwks_cached_at+Sm>u)return o;const{data:d,error:f}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,o=d.keys.find(p=>p.kid===r),!o)?null:o}async getClaims(r,s={}){try{let o=r;if(!o){const{data:C,error:P}=await this.getSession();if(P||!C.session)return this._returnResult({data:null,error:P});o=C.session.access_token}const{header:u,payload:d,signature:f,raw:{header:p,payload:g}}=_l(o);s!=null&&s.allowExpired||Vm(d.exp);const y=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!y){const{error:C}=await this.getUser(o);if(C)throw C;return{data:{claims:d,header:u,signature:f},error:null}}const w=Gm(u.alg),_=await crypto.subtle.importKey("jwk",y,w,!0,["verify"]);if(!await crypto.subtle.verify(w,_,f,Am(`${p}.${g}`)))throw new Ll("Invalid JWT signature");return{data:{claims:d,header:u,signature:f},error:null}}catch(o){if(de(o))return this._returnResult({data:null,error:o});throw o}}}Xs.nextInstanceID={};class Ng extends Xs{constructor(r){super(r)}}var Eg=function(a,r,s,o){function u(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function p(w){try{y(o.next(w))}catch(_){f(_)}}function g(w){try{y(o.throw(w))}catch(_){f(_)}}function y(w){w.done?d(w.value):u(w.value).then(p,g)}y((o=o.apply(a,r||[])).next())})};const Cg={headers:pm},Tg={schema:"public"},Pg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Og={};class Ig{constructor(r,s,o){var u,d,f,p,g,y,w,_;if(this.supabaseUrl=r,this.supabaseKey=s,!r)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const j=vm(r);this.realtimeUrl=`${j}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${j}/auth/v1`,this.storageUrl=`${j}/storage/v1`,this.functionsUrl=`${j}/functions/v1`;const C=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,P={db:Tg,realtime:Og,auth:Object.assign(Object.assign({},Pg),{storageKey:C}),global:Cg},E=wm(o??{},P);this.storageKey=(d=(u=E.auth)===null||u===void 0?void 0:u.storageKey)!==null&&d!==void 0?d:"",this.headers=(p=(f=E.global)===null||f===void 0?void 0:f.headers)!==null&&p!==void 0?p:{},this.auth=this._initSupabaseAuthClient((g=E.auth)!==null&&g!==void 0?g:{},this.headers,(y=E.global)===null||y===void 0?void 0:y.fetch),this.fetch=xm(s,this._getAccessToken.bind(this),(w=E.global)===null||w===void 0?void 0:w.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},E.realtime)),this.rest=new x0(`${j}/rest/v1`,{headers:this.headers,schema:(_=E.db)===null||_===void 0?void 0:_.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new o0(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new hm(this.storageUrl,this.headers,this.fetch)}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,s={},o){return this.rest.rpc(r,s,o)}channel(r,s={config:{}}){return this.realtime.channel(r,s)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var r,s;return Eg(this,void 0,void 0,function*(){const{data:o}=yield this.auth.getSession();return(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:s,detectSessionInUrl:o,storage:u,storageKey:d,flowType:f,debug:p},g,y){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ng({url:this.authUrl,headers:Object.assign(Object.assign({},w),g),storageKey:d,autoRefreshToken:r,persistSession:s,detectSessionInUrl:o,storage:u,flowType:f,debug:p,fetch:y})}_initRealtimeClient(r){return new D0(this.realtimeUrl,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r==null?void 0:r.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,o)=>{this._handleTokenChanged(s,"CLIENT",o==null?void 0:o.access_token)})}_handleTokenChanged(r,s,o){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==o?(this.realtime.setAuth(o??null),this.changedAccessToken=o):r==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Rg=(a,r,s)=>new Ig(a,r,s);var vh,wh;const Hh=((wh=(vh=import.meta)==null?void 0:vh.env)==null?void 0:wh.VITE_SUPABASE_URL)||"https://sartektzisafnmbiuhwd.supabase.co";var bh,kh;const Ag=((kh=(bh=import.meta)==null?void 0:bh.env)==null?void 0:kh.VITE_SUPABASE_ANON_KEY)||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNhcnRla3R6aXNhZm5tYml1aHdkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3MzU4OTEsImV4cCI6MjA4MTMxMTg5MX0.HbB0e_eMt78qNBND19CtwSJIqTBvQa4UB1U-3eBtLNQ";Hh.includes("MASUKKAN")&&(console.warn(" PERINGATAN: Kredensial Supabase belum terdeteksi."),console.warn("Silakan buat file .env atau masukkan URL & KEY secara manual di file services/supabaseClient.ts"));const Ae=Rg(Hh,Ag),Se={init:async()=>{},getEmployees:async()=>{const{data:a,error:r}=await Ae.from("employees").select("*").order("id",{ascending:!0});if(r)throw r;return a||[]},saveEmployee:async a=>{const{data:r}=await Ae.from("employees").select("id").eq("id",a.id).single();if(r){const{error:s}=await Ae.from("employees").update({name:a.name,address:a.address}).eq("id",a.id);if(s)throw s}else{const{error:s}=await Ae.from("employees").insert([{id:a.id,name:a.name,address:a.address}]);if(s)throw s}},deleteEmployee:async a=>{const{error:r}=await Ae.from("employees").delete().eq("id",a);if(r)throw r;await Se.deleteUserByEmployeeId(a)},checkEmployeeDependencies:async a=>{const{count:r}=await Ae.from("production_logs").select("*",{count:"exact",head:!0}).eq("employee_id",a),{count:s}=await Ae.from("payments").select("*",{count:"exact",head:!0}).eq("employee_id",a),o=r||0,u=s||0;return{hasDependencies:o>0||u>0,details:{production:o,payments:u}}},getComponents:async()=>{const{data:a,error:r}=await Ae.from("components").select("*").order("id",{ascending:!0});if(r)throw r;return a||[]},saveComponent:async a=>{const{data:r}=await Ae.from("components").select("id").eq("id",a.id).single();if(r){const{error:s}=await Ae.from("components").update({name:a.name,price:a.price}).eq("id",a.id);if(s)throw s}else{const{error:s}=await Ae.from("components").insert([{id:a.id,name:a.name,price:a.price}]);if(s)throw s}},deleteComponent:async a=>{const{error:r}=await Ae.from("components").delete().eq("id",a);if(r)throw r},checkComponentDependencies:async a=>{const{count:r}=await Ae.from("production_logs").select("*",{count:"exact",head:!0}).eq("component_id",a);return{hasDependencies:(r||0)>0,details:{production:r||0}}},getProductionLogs:async()=>{const{data:a,error:r}=await Ae.from("production_logs").select("*").order("created_at",{ascending:!1});if(r)throw r;return(a||[]).map(s=>({id:s.id,date:s.date,employeeId:s.employee_id,componentId:s.component_id,qty:s.qty,priceSnapshot:s.price_snapshot,total:s.total}))},saveProductionLog:async a=>{const{data:r}=await Ae.from("production_logs").select("id").eq("id",a.id).single(),s={id:a.id,date:a.date,employee_id:a.employeeId,component_id:a.componentId,qty:a.qty,price_snapshot:a.priceSnapshot,total:a.total};if(r){const{error:o}=await Ae.from("production_logs").update(s).eq("id",a.id);if(o)throw o}else{const{error:o}=await Ae.from("production_logs").insert([s]);if(o)throw o}},deleteProductionLog:async a=>{const{error:r}=await Ae.from("production_logs").delete().eq("id",a);if(r)throw r},getPayments:async()=>{const{data:a,error:r}=await Ae.from("payments").select("*").order("created_at",{ascending:!1});if(r)throw r;return(a||[]).map(s=>({id:s.id,date:s.date,employeeId:s.employee_id,amount:s.amount,type:s.type,note:s.note}))},savePayment:async a=>{const{data:r}=await Ae.from("payments").select("id").eq("id",a.id).single(),s={id:a.id,date:a.date,employee_id:a.employeeId,amount:a.amount,type:a.type,note:a.note};if(r){const{error:o}=await Ae.from("payments").update(s).eq("id",a.id);if(o)throw o}else{const{error:o}=await Ae.from("payments").insert([s]);if(o)throw o}},deletePayment:async a=>{const{error:r}=await Ae.from("payments").delete().eq("id",a);if(r)throw r},login:async(a,r)=>{const{data:s,error:o}=await Ae.from("app_users").select("*").eq("username",a).eq("password",r).single();return o||!s?null:{username:s.username,password:s.password,role:s.role,employeeId:s.employee_id,fullName:s.full_name}},getUsers:async()=>{const{data:a,error:r}=await Ae.from("app_users").select("*");if(r)throw r;return(a||[]).map(s=>({username:s.username,password:s.password,role:s.role,employeeId:s.employee_id,fullName:s.full_name}))},getUserByEmployeeId:async a=>{const{data:r}=await Ae.from("app_users").select("*").eq("employee_id",a).single();if(r)return{username:r.username,password:r.password,role:r.role,employeeId:r.employee_id,fullName:r.full_name}},saveUser:async a=>{const r={username:a.username,password:a.password,role:a.role,employee_id:a.employeeId,full_name:a.fullName},{error:s}=await Ae.from("app_users").upsert(r,{onConflict:"username"});if(s)throw s.message.includes("duplicate key")?new Error(`Username '${a.username}' sudah digunakan.`):s},updatePassword:async(a,r,s)=>{if(!await Se.login(a,r))throw new Error("Password lama salah atau user tidak ditemukan.");const{error:u}=await Ae.from("app_users").update({password:s}).eq("username",a);if(u)throw new Error(u.message);const d=localStorage.getItem("borongan_current_user");if(d){const f=JSON.parse(d);f.username===a&&(f.password=s,localStorage.setItem("borongan_current_user",JSON.stringify(f)))}},deleteUserByEmployeeId:async a=>{const{error:r}=await Ae.from("app_users").delete().eq("employee_id",a);if(r)throw r},resetData:async()=>{localStorage.clear()}};var Ze=(a=>(a.DASHBOARD="DASHBOARD",a.EMPLOYEES="EMPLOYEES",a.COMPONENTS="COMPONENTS",a.PRODUCTION="PRODUCTION",a.PAYMENTS="PAYMENTS",a.FINANCE="FINANCE",a.REKAP="REKAP",a))(Ze||{});const Vh=A.createContext(void 0),Dg=({children:a})=>{const[r,s]=A.useState(null);A.useEffect(()=>{const d=localStorage.getItem("borongan_current_user");d&&s(JSON.parse(d))},[]);const o=d=>{s(d),localStorage.setItem("borongan_current_user",JSON.stringify(d))},u=()=>{s(null),localStorage.removeItem("borongan_current_user")};return l.jsx(Vh.Provider,{value:{user:r,login:o,logout:u,isAuthenticated:!!r},children:a})},xn=()=>{const a=A.useContext(Vh);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Gh=(...a)=>a.filter((r,s,o)=>!!r&&o.indexOf(r)===s).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $g={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=A.forwardRef(({color:a="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:u="",children:d,iconNode:f,...p},g)=>A.createElement("svg",{ref:g,...$g,width:r,height:r,stroke:a,strokeWidth:o?Number(s)*24/Number(r):s,className:Gh("lucide",u),...p},[...f.map(([y,w])=>A.createElement(y,w)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(a,r)=>{const s=A.forwardRef(({className:o,...u},d)=>A.createElement(Ug,{ref:d,iconNode:r,className:Gh(`lucide-${Lg(a)}`,o),...u}));return s.displayName=`${a}`,s};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=_e("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=_e("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=_e("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=_e("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=_e("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=_e("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=_e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=_e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=_e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=_e("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=_e("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=_e("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=_e("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=_e("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=_e("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=_e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=_e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=_e("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=_e("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=_e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=_e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=_e("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=_e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=_e("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=_e("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=_e("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=_e("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=_e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=_e("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=_e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=_e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=_e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=_e("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=_e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=_e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=_e("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=_e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=_e("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=_e("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Xg=()=>{const[a,r]=A.useState(""),[s,o]=A.useState(""),[u,d]=A.useState(""),[f,p]=A.useState(!1),{login:g}=xn(),y=async w=>{w.preventDefault(),d(""),p(!0);try{const _=await Se.login(a,s);_?g(_):d("Username atau Password salah")}catch(_){d("Terjadi kesalahan saat login."),console.error(_)}finally{p(!1)}};return l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-bg flex items-center justify-center p-4",children:l.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-dark-card rounded-2xl shadow-xl border border-slate-200 dark:border-dark-border overflow-hidden animate-fade-in",children:[l.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-8 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-2xl flex items-center justify-center mx-auto mb-4 backdrop-blur-sm",children:l.jsx("span",{className:"text-3xl font-bold text-white",children:"R"})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"RedonePaypro"}),l.jsx("p",{className:"text-slate-300 text-sm",children:"Sistem Manajemen Produksi Borongan"})]}),l.jsxs("div",{className:"p-8",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 mb-6 text-center",children:"Silahkan Login"}),u&&l.jsxs("div",{className:"mb-6 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-xl flex items-center gap-2",children:[l.jsx(Yh,{size:16}),u]}),l.jsxs("form",{onSubmit:y,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Username"}),l.jsx("input",{type:"text",value:a,onChange:w=>r(w.target.value),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Masukkan username",required:!0,disabled:f})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Password"}),l.jsx("input",{type:"password",value:s,onChange:w=>o(w.target.value),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Masukkan password",required:!0,disabled:f})]}),l.jsx("button",{type:"submit",disabled:f,className:"w-full py-3.5 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold shadow-lg shadow-primary-600/20 transition-all flex items-center justify-center gap-2 mt-4 disabled:opacity-70 disabled:cursor-not-allowed",children:f?l.jsx(kt,{className:"animate-spin",size:20}):l.jsxs(l.Fragment,{children:[l.jsx(Hg,{size:20})," Login Masuk"]})})]})]})]})})},yn=({isOpen:a,title:r,message:s,onConfirm:o,onCancel:u,type:d="danger",confirmText:f="Ya, Lanjutkan",cancelText:p="Batal",singleButton:g=!1})=>{if(!a)return null;const y=()=>{switch(d){case"danger":return"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400";case"success":return"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400";default:return"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400"}},w=()=>{switch(d){case"danger":return"bg-red-600 hover:bg-red-700 shadow-red-600/30";case"success":return"bg-green-600 hover:bg-green-700 shadow-green-600/30";default:return"bg-primary-600 hover:bg-primary-700 shadow-primary-600/30"}};return l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fade-in",children:l.jsx("div",{className:"bg-white dark:bg-dark-card w-full max-w-sm rounded-2xl shadow-2xl border border-slate-100 dark:border-dark-border transform transition-all scale-100",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:`mx-auto mb-4 w-12 h-12 rounded-full flex items-center justify-center ${y()}`,children:d==="danger"?l.jsx(Yg,{size:24}):l.jsx(wi,{size:24})}),l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100 mb-2",children:r}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6 leading-relaxed",children:s}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[!g&&l.jsx("button",{type:"button",onClick:u,className:"flex-1 px-4 py-2.5 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl font-medium transition-colors border border-slate-200 dark:border-slate-700",children:p}),l.jsx("button",{type:"button",onClick:o,className:`flex-1 px-4 py-2.5 text-white rounded-xl font-medium transition-all shadow-lg ${w()}`,children:f})]})]})})})},Zg=({onViewChange:a})=>{const{user:r}=xn(),[s,o]=A.useState(!0),[u,d]=A.useState({empCount:0,compCount:0,totalProduction:0,totalPayments:0}),[f,p]=A.useState(!1);A.useEffect(()=>{(async()=>{o(!0);try{const _=await Se.getEmployees(),j=await Se.getComponents();let C=await Se.getProductionLogs(),P=await Se.getPayments();(r==null?void 0:r.role)==="USER"&&r.employeeId&&(C=C.filter($=>$.employeeId===r.employeeId),P=P.filter($=>$.employeeId===r.employeeId));const E=C.reduce(($,z)=>$+z.total,0),O=P.reduce(($,z)=>$+z.amount,0);d({empCount:_.length,compCount:j.length,totalProduction:E,totalPayments:O})}catch(_){console.error("Failed to fetch dashboard data",_)}finally{o(!1)}})()},[r]);const g=w=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(w),y=({title:w,value:_,icon:j,color:C,onClick:P})=>l.jsxs("div",{onClick:P,className:"bg-white dark:bg-dark-card p-3.5 md:p-6 rounded-xl md:rounded-2xl shadow-sm border border-slate-100 dark:border-dark-border hover:shadow-md transition-all cursor-pointer group relative overflow-hidden",children:[l.jsx("div",{className:"absolute right-0 top-0 w-24 h-24 bg-gradient-to-br from-transparent to-slate-50 dark:to-slate-800/50 rounded-bl-full -mr-4 -mt-4 opacity-50 pointer-events-none"}),l.jsxs("div",{className:"flex justify-between items-start gap-2 relative z-10",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-xs md:text-sm font-medium text-slate-500 dark:text-slate-400 mb-0.5 md:mb-1 truncate",children:w}),l.jsx("h3",{className:"text-xl md:text-2xl font-bold text-slate-800 dark:text-slate-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors truncate",children:s?l.jsx(kt,{className:"animate-spin",size:20}):_})]}),l.jsx("div",{className:`p-2 md:p-3 rounded-lg md:rounded-xl ${C} bg-opacity-10 dark:bg-opacity-20 shrink-0`,children:l.jsx(j,{className:`${C.replace("bg-","text-")} w-5 h-5 md:w-6 md:h-6`})})]})]});return l.jsxs("div",{className:"space-y-4 md:space-y-6 relative animate-fade-in",children:[l.jsxs("div",{onClick:()=>p(!0),className:"bg-white dark:bg-dark-card p-5 md:p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-dark-border flex flex-col md:flex-row items-start md:items-center justify-between gap-4 relative overflow-hidden cursor-pointer hover:shadow-lg hover:border-blue-200 dark:hover:border-blue-900 transition-all group",children:[l.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-slate-50 dark:bg-slate-800/50 rounded-bl-full -mr-8 -mt-8 opacity-50 pointer-events-none group-hover:scale-110 transition-transform duration-500"}),l.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[l.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 rounded-xl bg-gradient-to-br from-slate-800 to-slate-900 flex items-center justify-center text-white shadow-lg shadow-slate-800/20 shrink-0",children:l.jsx(mh,{size:24,className:"md:w-8 md:h-8"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h1",{className:"text-lg md:text-2xl font-bold text-slate-800 dark:text-slate-100 leading-tight",children:"PT. REDONE BERKAH MANDIRI UTAMA"}),l.jsx(wi,{size:16,className:"text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"})]}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 flex items-center gap-1.5 text-xs md:text-sm mt-1",children:[l.jsx(Qh,{size:14,className:"shrink-0"}),"Jl. Raya Cileungsi - Jonggol Km. 10, Cipeucang, Cileungsi, Bogor 16820"]})]})]}),l.jsxs("div",{className:"hidden md:block text-right relative z-10",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider block mb-1",children:"Hari Ini"}),l.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-700",children:new Date().toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]})]}),l.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 dark:from-dark-card dark:to-slate-900 p-5 md:p-8 rounded-2xl shadow-lg text-white relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white opacity-5 rounded-full blur-2xl"}),l.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-32 h-32 bg-primary-500 opacity-10 rounded-full blur-2xl"}),l.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/10 px-3 py-1 rounded-full mb-4 backdrop-blur-sm border border-white/10",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-primary-400 animate-pulse"}),l.jsx("span",{className:"text-xs font-medium text-slate-200",children:"Status Keuangan"})]}),l.jsx("h3",{className:"text-sm md:text-base font-medium text-slate-300 mb-1",children:(r==null?void 0:r.role)==="ADMIN"?"Total Hutang Gaji Perusahaan":"Sisa Saldo Gaji Saya"}),l.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6 tracking-tight",children:s?l.jsx(kt,{className:"animate-spin"}):g(u.totalProduction-u.totalPayments)}),(r==null?void 0:r.role)==="ADMIN"&&l.jsxs("button",{onClick:()=>a(Ze.FINANCE),className:"w-full md:w-auto flex items-center justify-center gap-2 px-6 py-3 bg-primary-600 hover:bg-primary-500 text-white rounded-xl text-sm font-bold transition-all shadow-lg shadow-primary-900/20 group",children:["Lihat Laporan Detail ",l.jsx(ta,{size:16,className:"group-hover:translate-x-1 transition-transform"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-3 md:gap-6",children:[(r==null?void 0:r.role)==="ADMIN"&&l.jsx(y,{title:"Total Karyawan",value:u.empCount,icon:Xh,color:"bg-blue-500 text-blue-500",onClick:()=>a(Ze.EMPLOYEES)}),l.jsx(y,{title:"Item Komponen",value:u.compCount,icon:Ni,color:"bg-purple-500 text-purple-500",onClick:()=>a(Ze.COMPONENTS)})]}),f&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-white dark:bg-dark-card w-full max-w-2xl rounded-2xl shadow-2xl border border-slate-100 dark:border-dark-border flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-dark-border flex justify-between items-start",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-900 text-white flex items-center justify-center shadow-lg",children:l.jsx(mh,{size:32})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"PT. REDONE BERKAH MANDIRI UTAMA"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 max-w-sm",children:"Jl. Raya Cileungsi - Jonggol Km. 10, Cipeucang, Cileungsi, Bogor 16820"})]})]}),l.jsx("button",{onClick:()=>p(!1),className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 transition-colors",children:l.jsx(ar,{size:24})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(Qg,{size:18,className:"text-primary-500"}),l.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:"Tentang Aplikasi"})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:[l.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-100 mb-2",children:["RedonePaypro ",l.jsx("span",{className:"text-xs bg-primary-500 text-white px-2 py-0.5 rounded-full ml-2 align-middle",children:"v1.0.0"})]}),l.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm leading-relaxed",children:"Sistem manajemen produksi dan penggajian borongan terintegrasi yang dirancang khusus untuk mempermudah pencatatan hasil kerja karyawan, pengelolaan kasbon, serta perhitungan gaji otomatis yang akurat dan transparan."})]})]})}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-dark-border bg-slate-50 dark:bg-dark-card rounded-b-2xl flex justify-center text-xs text-slate-400",children:[" ",new Date().getFullYear()," RedonePaypro. All rights reserved."]})]})})]})},ey=()=>{const[a,r]=A.useState([]),[s,o]=A.useState([]),[u,d]=A.useState(!0),[f,p]=A.useState(!1),[g,y]=A.useState(!1),[w,_]=A.useState(""),[j,C]=A.useState({id:"",name:"",address:""}),[P,E]=A.useState(!1),[O,$]=A.useState(!1),[z,M]=A.useState({username:"",password:""}),[V,ne]=A.useState(null),[B,X]=A.useState(null),[re,ve]=A.useState(null),[be,ae]=A.useState(null);A.useEffect(()=>{Ee()},[]),A.useEffect(()=>{const R=J=>{be&&!J.target.closest(".action-menu")&&ae(null)};return document.addEventListener("click",R),()=>document.removeEventListener("click",R)},[be]);const Ee=async()=>{d(!0);try{const R=await Se.getEmployees(),J=await Se.getUsers();r(R),o(J)}catch(R){console.error("Error loading employees",R)}finally{d(!1)}},ce=R=>{if(R)C({...R}),y(!0);else{const ee=`KPRD-${(a.reduce((he,je)=>{const ke=parseInt(je.id.replace("KPRD-",""),10);return!isNaN(ke)&&ke>he?ke:he},0)+1).toString().padStart(3,"0")}`;C({id:ee,name:"",address:""}),y(!1)}p(!0)},G=async R=>{if(R.preventDefault(),!!j.name.trim())try{await Se.saveEmployee(j),p(!1),Ee()}catch{alert("Gagal menyimpan data.")}},ye=async R=>{ne(R);const J=await Se.getUserByEmployeeId(R.id);M(J?{username:J.username,password:J.password}:{username:"",password:""}),$(!0)},L=async R=>{if(R.preventDefault(),!!V){if(!z.username||!z.password){alert("Username dan Password wajib diisi");return}try{const J={username:z.username,password:z.password,role:"USER",employeeId:V.id,fullName:V.name};await Se.saveUser(J),$(!1),Ee()}catch(J){alert(J.message)}}},fe=async()=>{V&&window.confirm(`Hapus akses login untuk ${V.name}?`)&&(await Se.deleteUserByEmployeeId(V.id),$(!1),Ee())},q=async R=>{const J=await Se.checkEmployeeDependencies(R.id);if(J.hasDependencies){const ee=[];J.details.production>0&&ee.push(`Hasil Kerja (${J.details.production})`),J.details.payments>0&&ee.push(`Pembayaran/Kasbon (${J.details.payments})`);const he=`Tidak dapat menghapus karyawan ${R.name}. Data ini masih memiliki keterkaitan dengan: ${ee.join(", ")}. Harap hapus transaksi terkait terlebih dahulu.`;ve(he)}else X(R.id)},D=async()=>{B&&(await Se.deleteEmployee(B),Ee(),X(null))},U=()=>{const R=window;if(!R.jspdf){alert("Library PDF sedang dimuat.");return}E(!0);try{const{jsPDF:J}=R.jspdf,ee=new J("p","mm","a4");ee.setFontSize(16),ee.setFont("helvetica","bold"),ee.text("PT. REDONE BERKAH MANDIRI UTAMA",14,15),ee.setFontSize(12),ee.setFont("helvetica","normal"),ee.text("DATA KARYAWAN AKTIF",14,21),ee.setFontSize(10);const he=new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"});ee.text(`Per Tanggal: ${he}`,14,27),ee.text(`Total Karyawan: ${a.length} Orang`,14,32),ee.line(14,35,196,35);const je=["ID Karyawan","Nama Lengkap","Alamat / Domisili"],ke=a.map(_t=>[_t.id,_t.name,_t.address]);ee.autoTable({head:[je],body:ke,startY:40,theme:"grid",headStyles:{fillColor:[22,163,74],textColor:255,fontStyle:"bold",halign:"center"},styles:{fontSize:10,cellPadding:3,textColor:20},columnStyles:{0:{cellWidth:35,font:"courier"},1:{cellWidth:50,fontStyle:"bold"},2:{cellWidth:"auto"}}});const Te=ee.lastAutoTable.finalY+20;Te>250&&ee.addPage();const ze=Te>250?40:Te;ee.setFont("helvetica","normal"),ee.setFontSize(10),ee.setTextColor(0,0,0),ee.text("Mengetahui,",150,ze,{align:"center"}),ee.text("Manager HRD",150,ze+5,{align:"center"}),ee.text("(________________________)",150,ze+30,{align:"center"}),ee.save(`Data_Karyawan_${new Date().toISOString().split("T")[0]}.pdf`)}catch(J){console.error(J),alert("Gagal membuat PDF.")}finally{E(!1)}},v=a.filter(R=>R.name.toLowerCase().includes(w.toLowerCase())||R.id.toLowerCase().includes(w.toLowerCase())),I=R=>s.some(J=>J.employeeId===R);return l.jsxs("div",{className:"space-y-4 md:space-y-6 relative animate-fade-in",children:[P&&l.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/80 flex flex-col items-center justify-center text-white backdrop-blur-sm",children:[l.jsx(kt,{size:48,className:"animate-spin mb-4 text-primary-500"}),l.jsx("p",{className:"text-lg font-bold",children:"Sedang Membuat Dokumen PDF..."})]}),l.jsx(yn,{isOpen:!!B,title:"Hapus Data Karyawan",message:"Apakah Anda yakin ingin menghapus data ini? Data yang dihapus tidak dapat dikembalikan.",onConfirm:D,onCancel:()=>X(null),type:"danger",confirmText:"Hapus"}),l.jsx(yn,{isOpen:!!re,title:"Gagal Menghapus Data",message:re||"",onConfirm:()=>ve(null),onCancel:()=>ve(null),type:"info",singleButton:!0,confirmText:"Mengerti"}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 md:gap-4",children:[l.jsxs("div",{className:"relative w-full sm:w-72",children:[l.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"text",placeholder:"Cari nama atau ID...",value:w,onChange:R=>_(R.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-dark-border bg-white dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-primary-500/50 transition-all shadow-sm"})]}),l.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[l.jsxs("button",{onClick:U,className:"flex-1 sm:flex-none flex justify-center items-center gap-2 px-4 py-2.5 bg-slate-800 text-white dark:bg-slate-100 dark:text-slate-900 rounded-xl hover:bg-slate-900 dark:hover:bg-slate-200 shadow-lg shadow-slate-800/20 transition-all font-medium text-sm",children:[l.jsx(Hr,{size:18})," Ekspor PDF"]}),l.jsxs("button",{onClick:()=>ce(),className:"flex-1 sm:flex-none flex justify-center items-center gap-2 px-4 py-2.5 bg-primary-600 text-white rounded-xl hover:bg-primary-700 shadow-lg shadow-primary-600/30 transition-all font-medium text-sm",children:[l.jsx(Ei,{size:18})," Tambah"]})]})]}),u?l.jsx("div",{className:"p-12 flex justify-center",children:l.jsx(kt,{className:"animate-spin text-primary-500",size:40})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"hidden md:block bg-white dark:bg-dark-card rounded-2xl border border-slate-200 dark:border-dark-border overflow-visible shadow-sm",children:l.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-dark-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 font-semibold text-slate-500 text-xs uppercase tracking-wider",children:"ID Karyawan"}),l.jsx("th",{className:"px-6 py-4 font-semibold text-slate-500 text-xs uppercase tracking-wider",children:"Nama Lengkap"}),l.jsx("th",{className:"px-6 py-4 font-semibold text-slate-500 text-xs uppercase tracking-wider",children:"Alamat / Domisili"}),l.jsx("th",{className:"px-6 py-4 font-semibold text-slate-500 text-xs uppercase tracking-wider text-right",children:"Aksi"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-dark-border",children:v.map(R=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:"font-mono text-xs font-medium text-primary-600 bg-primary-50 dark:bg-primary-900/30 px-2 py-1 rounded",children:R.id})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-slate-500",children:l.jsx(Ul,{size:16})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-medium text-sm text-slate-700 dark:text-slate-200",children:R.name}),I(R.id)&&l.jsxs("span",{className:"text-[10px] text-green-600 dark:text-green-400 flex items-center gap-1",children:[l.jsx(xh,{size:10})," Akses Login Aktif"]})]})]})}),l.jsx("td",{className:"px-6 py-4 text-xs text-slate-500",children:R.address}),l.jsxs("td",{className:"px-6 py-4 text-right relative action-menu",children:[l.jsx("button",{onClick:J=>{J.stopPropagation(),ae(be===R.id?null:R.id)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 hover:text-slate-600 transition-colors",children:l.jsx(gh,{size:18})}),be===R.id&&l.jsxs("div",{className:"absolute right-8 top-8 w-48 bg-white dark:bg-dark-card border border-slate-200 dark:border-dark-border rounded-xl shadow-lg z-50 p-1 flex flex-col text-left",children:[l.jsxs("button",{onClick:J=>{J.stopPropagation(),ye(R),ae(null)},className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg",children:[l.jsx(gi,{size:14,className:I(R.id)?"text-green-500":"text-slate-400"}),I(R.id)?"Ubah Akses Login":"Buat Akses Login"]}),l.jsxs("button",{onClick:J=>{J.stopPropagation(),ce(R),ae(null)},className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg",children:[l.jsx(as,{size:14})," Edit Data"]}),l.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-700 my-1"}),l.jsxs("button",{onClick:J=>{J.stopPropagation(),q(R),ae(null)},className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:[l.jsx(is,{size:14})," Hapus Karyawan"]})]})]})]},R.id))})]})})}),l.jsx("div",{className:"md:hidden space-y-3",children:v.map(R=>l.jsxs("div",{className:"bg-white dark:bg-dark-card p-3.5 rounded-xl shadow-sm border border-slate-200 dark:border-dark-border flex items-center justify-between overflow-visible relative",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-50 dark:bg-primary-900/20 text-primary-600 flex items-center justify-center font-bold text-sm",children:R.name.charAt(0)}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 text-sm truncate",children:R.name}),l.jsxs("div",{className:"flex flex-col gap-0.5 mt-0.5",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 dark:bg-slate-800 w-fit px-1.5 rounded",children:R.id}),I(R.id)&&l.jsx(xh,{size:10,className:"text-green-500"})]}),l.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-500 truncate",children:[l.jsx(Qh,{size:10})," ",R.address]})]})]})]}),l.jsxs("div",{className:"relative action-menu shrink-0",children:[l.jsx("button",{onClick:J=>{J.stopPropagation(),ae(be===R.id?null:R.id)},className:"p-2 text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg",children:l.jsx(gh,{size:20})}),be===R.id&&l.jsxs("div",{className:"absolute right-0 top-10 w-48 bg-white dark:bg-dark-card border border-slate-200 dark:border-dark-border rounded-xl shadow-xl z-50 p-1 flex flex-col text-left",children:[l.jsxs("button",{onClick:J=>{J.stopPropagation(),ye(R),ae(null)},className:"flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg",children:[l.jsx(gi,{size:16,className:I(R.id)?"text-green-500":"text-slate-400"}),I(R.id)?"Ubah Akses":"Buat Akses"]}),l.jsxs("button",{onClick:J=>{J.stopPropagation(),ce(R),ae(null)},className:"flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg",children:[l.jsx(as,{size:16})," Edit Data"]}),l.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-700 my-1"}),l.jsxs("button",{onClick:J=>{J.stopPropagation(),q(R),ae(null)},className:"flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:[l.jsx(is,{size:16})," Hapus"]})]})]})]},R.id))}),v.length===0&&l.jsxs("div",{className:"p-12 text-center text-slate-400 flex flex-col items-center",children:[l.jsx(Ul,{size:48,className:"mb-4 opacity-20"}),l.jsx("p",{children:"Data karyawan tidak ditemukan."})]})]}),f&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-white dark:bg-dark-card w-full max-w-md rounded-2xl p-6 shadow-2xl border border-slate-100 dark:border-dark-border",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:g?"Edit Data Karyawan":"Karyawan Baru"}),l.jsx("button",{onClick:()=>p(!1),className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-full text-slate-500",children:l.jsx(ar,{size:20})})]}),l.jsxs("form",{onSubmit:G,className:"space-y-4 pb-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-500 block mb-1",children:"ID Karyawan"}),l.jsx("input",{type:"text",value:j.id,readOnly:!0,className:"w-full px-4 py-3 md:py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-500 cursor-not-allowed font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Nama Lengkap"}),l.jsx("input",{type:"text",required:!0,value:j.name,onChange:R=>C({...j,name:R.target.value}),placeholder:"Contoh: Budi Santoso",className:"w-full px-4 py-3 md:py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Alamat"}),l.jsx("textarea",{required:!0,value:j.address,onChange:R=>C({...j,address:R.target.value}),placeholder:"Alamat lengkap...",className:"w-full px-4 py-3 md:py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3})]}),l.jsxs("div",{className:"flex gap-3 mt-8 pt-4 border-t border-slate-100 dark:border-slate-800",children:[l.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 px-4 py-3 text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800 rounded-xl transition-colors border border-slate-200 dark:border-slate-700 font-medium",children:"Batal"}),l.jsxs("button",{type:"submit",className:"flex-1 flex justify-center items-center gap-2 px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold transition-all shadow-lg shadow-primary-600/20",children:[l.jsx(ss,{size:18})," Simpan"]})]})]})]})}),O&&V&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-white dark:bg-dark-card w-full max-w-sm rounded-2xl p-6 shadow-2xl border border-slate-100 dark:border-dark-border",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Akses Login"}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Untuk ",V.name]})]}),l.jsx("button",{onClick:()=>$(!1),className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-full text-slate-500",children:l.jsx(ar,{size:20})})]}),l.jsxs("form",{onSubmit:L,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Username"}),l.jsx("input",{type:"text",required:!0,value:z.username,onChange:R=>M({...z,username:R.target.value}),placeholder:"Username unik",className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-green-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Password"}),l.jsx("input",{type:"text",required:!0,value:z.password,onChange:R=>M({...z,password:R.target.value}),placeholder:"Password",className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-green-500"})]}),l.jsxs("div",{className:"flex flex-col gap-2 mt-6 pt-4 border-t border-slate-100 dark:border-slate-800",children:[l.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold transition-all shadow-lg shadow-green-600/20",children:[l.jsx(gi,{size:18})," Simpan Akses"]}),I(V.id)&&l.jsx("button",{type:"button",onClick:fe,className:"w-full flex justify-center items-center gap-2 px-4 py-2.5 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl font-medium transition-colors",children:"Hapus Akses"})]})]})]})})]})},ty=()=>{const{user:a}=xn(),[r,s]=A.useState([]),[o,u]=A.useState(!0),[d,f]=A.useState(!1),[p,g]=A.useState(!1),[y,w]=A.useState(""),[_,j]=A.useState({id:"",name:"",price:0}),[C,P]=A.useState(!1),[E,O]=A.useState(1),[$,z]=A.useState(10),[M,V]=A.useState(null),[ne,B]=A.useState(null);A.useEffect(()=>{X()},[]);const X=async()=>{u(!0);try{const D=await Se.getComponents();s(D)}catch(D){console.error(D)}finally{u(!1)}};A.useEffect(()=>{O(1)},[y,$]);const re=D=>{if(D)j({...D}),g(!0);else{const U=r.reduce((v,I)=>{const R=parseInt(I.id.replace("KP-",""),10);return!isNaN(R)&&R>v?R:v},0);j({id:`KP-${(U+1).toString().padStart(3,"0")}`,name:"",price:0}),g(!1)}f(!0)},ve=async D=>{if(D.preventDefault(),!(!_.name.trim()||_.price<=0))try{await Se.saveComponent(_),f(!1),X()}catch{alert("Gagal menyimpan komponen.")}},be=async D=>{const U=await Se.checkComponentDependencies(D.id);if(U.hasDependencies){const v=`Tidak dapat menghapus komponen ${D.name}. Data ini masih digunakan pada ${U.details.production} riwayat Hasil Kerja. Harap hapus transaksi terkait terlebih dahulu.`;B(v)}else V(D.id)},ae=async()=>{M&&(await Se.deleteComponent(M),X(),V(null))},Ee=()=>{const D=window;if(!D.jspdf){alert("Library PDF sedang dimuat.");return}P(!0);try{const{jsPDF:U}=D.jspdf,v=new U("p","mm","a4");v.setFontSize(16),v.setFont("helvetica","bold"),v.text("PT. REDONE BERKAH MANDIRI UTAMA",14,15),v.setFontSize(12),v.setFont("helvetica","normal"),v.text("DAFTAR HARGA KOMPONEN & UPAH KERJA",14,21),v.setFontSize(10);const I=new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"});v.text(`Tanggal Cetak: ${I}`,14,27),v.text(`Total Item: ${r.length}`,14,32),v.line(14,35,196,35);const R=["ID Komponen","Nama Komponen","Harga Satuan (Rp)"],J=ce.map(je=>[je.id,je.name,new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(je.price)]);v.autoTable({head:[R],body:J,startY:40,theme:"grid",headStyles:{fillColor:[147,51,234],textColor:255,fontStyle:"bold",halign:"center"},styles:{fontSize:10,cellPadding:3,textColor:20},columnStyles:{0:{cellWidth:35,font:"courier"},1:{cellWidth:"auto"},2:{cellWidth:50,halign:"right",fontStyle:"bold"}}});const ee=v.lastAutoTable.finalY+20;ee>250&&v.addPage();const he=ee>250?40:ee;v.setFont("helvetica","normal"),v.setFontSize(10),v.setTextColor(0,0,0),v.text("Dibuat Oleh,",40,he,{align:"center"}),v.text("Admin Produksi",40,he+5,{align:"center"}),v.text("(________________________)",40,he+30,{align:"center"}),v.text("Disetujui Oleh,",150,he,{align:"center"}),v.text("Manager Operasional",150,he+5,{align:"center"}),v.text("(________________________)",150,he+30,{align:"center"}),v.save(`Daftar_Komponen_${new Date().toISOString().split("T")[0]}.pdf`)}catch(U){console.error(U),alert("Gagal membuat PDF.")}finally{P(!1)}},ce=r.filter(D=>D.name.toLowerCase().includes(y.toLowerCase())||D.id.toLowerCase().includes(y.toLowerCase())),G=ce.length,ye=Math.ceil(G/$),L=(E-1)*$,fe=Math.min(L+$,G),q=ce.slice(L,L+$);return l.jsxs("div",{className:"space-y-4 md:space-y-6 relative animate-fade-in",children:[C&&l.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/80 flex flex-col items-center justify-center text-white backdrop-blur-sm",children:[l.jsx(kt,{size:48,className:"animate-spin mb-4 text-purple-500"}),l.jsx("p",{className:"text-lg font-bold",children:"Sedang Membuat Dokumen PDF..."})]}),l.jsx(yn,{isOpen:!!M,title:"Hapus Komponen",message:"Yakin ingin menghapus komponen ini?",onConfirm:ae,onCancel:()=>V(null),type:"danger",confirmText:"Hapus"}),l.jsx(yn,{isOpen:!!ne,title:"Gagal Menghapus Data",message:ne||"",onConfirm:()=>B(null),onCancel:()=>B(null),type:"info",singleButton:!0,confirmText:"Mengerti"}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[l.jsxs("div",{className:"relative w-full sm:w-72",children:[l.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"text",placeholder:"Cari komponen...",value:y,onChange:D=>w(D.target.value),className:"w-full pl-10 pr-4 py-3 md:py-2 rounded-xl border border-slate-200 dark:border-dark-border bg-white dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-purple-500/50 transition-all shadow-sm"})]}),l.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[l.jsxs("button",{onClick:Ee,className:"flex-1 sm:flex-none flex justify-center items-center gap-2 px-4 py-3 md:py-2 bg-slate-800 text-white dark:bg-slate-100 dark:text-slate-900 rounded-xl hover:bg-slate-900 dark:hover:bg-slate-200 shadow-lg shadow-slate-800/20 transition-all font-medium text-sm",children:[l.jsx(Hr,{size:18})," Ekspor PDF"]}),(a==null?void 0:a.role)==="ADMIN"&&l.jsxs("button",{onClick:()=>re(),className:"flex-1 sm:flex-none flex justify-center items-center gap-2 px-4 py-3 md:py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700 shadow-lg shadow-purple-600/30 transition-all font-medium text-sm",children:[l.jsx(Ei,{size:18})," Tambah"]})]})]}),o?l.jsx("div",{className:"p-12 flex justify-center",children:l.jsx(kt,{className:"animate-spin text-purple-500",size:40})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"hidden md:block bg-white dark:bg-dark-card rounded-2xl border border-slate-200 dark:border-dark-border overflow-hidden shadow-sm",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-dark-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 font-semibold text-slate-500 text-xs uppercase tracking-wider",children:"ID"}),l.jsx("th",{className:"px-6 py-4 font-semibold text-slate-500 text-xs uppercase tracking-wider",children:"Nama Komponen"}),l.jsx("th",{className:"px-6 py-4 font-semibold text-slate-500 text-xs uppercase tracking-wider text-right",children:"Harga Satuan"}),(a==null?void 0:a.role)==="ADMIN"&&l.jsx("th",{className:"px-6 py-4 font-semibold text-slate-500 text-xs uppercase tracking-wider text-right",children:"Aksi"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-dark-border",children:q.map(D=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:"font-mono text-xs font-medium text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded",children:D.id})}),l.jsx("td",{className:"px-6 py-4 font-medium text-sm text-slate-800 dark:text-slate-200",children:D.name}),l.jsxs("td",{className:"px-6 py-4 text-right font-bold text-sm text-slate-700 dark:text-slate-300",children:["Rp ",D.price.toLocaleString("id-ID")]}),(a==null?void 0:a.role)==="ADMIN"&&l.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>re(D),className:"text-blue-500 hover:text-blue-600 p-2 hover:bg-blue-50 rounded-lg transition-colors",children:l.jsx(as,{size:16})}),l.jsx("button",{onClick:()=>be(D),className:"text-slate-400 hover:text-red-500 p-2 hover:bg-red-50 rounded-lg transition-colors",children:l.jsx(is,{size:16})})]})]},D.id))})]})}),l.jsx("div",{className:"md:hidden space-y-2",children:q.map(D=>l.jsxs("div",{className:"bg-white dark:bg-dark-card p-3 rounded-xl shadow-sm border border-slate-200 dark:border-dark-border",children:[l.jsxs("div",{className:"flex justify-between items-start gap-3",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 text-sm truncate",children:D.name}),l.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded mt-0.5 inline-block",children:D.id})]}),l.jsx("div",{className:"text-right whitespace-nowrap",children:l.jsxs("span",{className:"font-bold text-purple-600 dark:text-purple-400 text-sm",children:["Rp ",D.price.toLocaleString("id-ID")]})})]}),(a==null?void 0:a.role)==="ADMIN"&&l.jsxs("div",{className:"flex justify-end gap-2 border-t border-slate-50 dark:border-slate-800 pt-1.5 mt-1.5",children:[l.jsx("button",{onClick:()=>re(D),className:"flex items-center gap-1 text-[10px] font-bold text-blue-600 bg-blue-50 dark:bg-blue-900/20 px-3 py-1.5 rounded-lg active:scale-95 transition-transform",children:"Edit"}),l.jsx("button",{onClick:()=>be(D),className:"flex items-center gap-1 text-[10px] font-bold text-red-600 bg-red-50 dark:bg-red-900/20 px-3 py-1.5 rounded-lg active:scale-95 transition-transform",children:"Hapus"})]})]},D.id))})]}),!o&&ce.length===0&&l.jsxs("div",{className:"p-12 text-center text-slate-400 flex flex-col items-center",children:[l.jsx(Ni,{size:48,className:"mb-4 opacity-20"}),l.jsx("p",{children:"Data komponen tidak ditemukan."})]}),!o&&ce.length>0&&l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-white dark:bg-dark-card rounded-2xl border border-slate-200 dark:border-dark-border shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 w-full sm:w-auto justify-between sm:justify-start",children:[l.jsx("span",{children:"Tampilkan:"}),l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:$,onChange:D=>z(Number(D.target.value)),className:"appearance-none bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg pl-3 pr-8 py-1.5 focus:outline-none focus:ring-2 focus:ring-purple-500 font-medium text-slate-800 dark:text-slate-200",children:[l.jsx("option",{value:10,children:"10 Baris"}),l.jsx("option",{value:25,children:"25 Baris"}),l.jsx("option",{value:50,children:"50 Baris"}),l.jsx("option",{value:100,children:"100 Baris"})]}),l.jsx(Wr,{size:14,className:"absolute right-2.5 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500"})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto",children:[l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[L+1," - ",fe," dari ",G," data"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>O(D=>Math.max(1,D-1)),disabled:E===1,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Si,{size:16})," ",l.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),l.jsxs("button",{onClick:()=>O(D=>Math.min(ye,D+1)),disabled:E===ye,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx("span",{className:"hidden sm:inline",children:"Selanjutnya"})," ",l.jsx(ta,{size:16})]})]})]})]}),(a==null?void 0:a.role)==="ADMIN"&&d&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-white dark:bg-dark-card w-full max-w-md rounded-2xl p-6 shadow-2xl border border-slate-100 dark:border-dark-border",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:p?"Edit Harga Komponen":"Komponen Baru"}),l.jsx("button",{onClick:()=>f(!1),className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-full text-slate-500",children:l.jsx(ar,{size:20})})]}),l.jsxs("form",{onSubmit:ve,className:"space-y-4 pb-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-500 block mb-1",children:"ID Komponen"}),l.jsx("input",{type:"text",value:_.id,readOnly:!0,className:"w-full px-4 py-3 md:py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-500 cursor-not-allowed font-mono"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Nama Komponen"}),l.jsx("input",{type:"text",required:!0,value:_.name,onChange:D=>j({..._,name:D.target.value}),className:"w-full px-4 py-3 md:py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Contoh: Bodi Depan X"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Harga Satuan (Rp)"}),l.jsx("input",{type:"number",required:!0,min:"1",value:_.price,onChange:D=>j({..._,price:Number(D.target.value)}),className:"w-full px-4 py-3 md:py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-purple-500 font-bold text-lg"})]}),l.jsxs("div",{className:"flex gap-3 mt-8 pt-4 border-t border-slate-100 dark:border-slate-800",children:[l.jsx("button",{type:"button",onClick:()=>f(!1),className:"flex-1 px-4 py-3 text-slate-600 hover:bg-slate-100 dark:text-slate-400 rounded-xl transition-colors border border-slate-200 dark:border-slate-700 font-medium",children:"Batal"}),l.jsxs("button",{type:"submit",className:"flex-1 flex justify-center items-center gap-2 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-medium transition-all shadow-lg shadow-purple-600/20",children:[l.jsx(ss,{size:18})," Simpan"]})]})]})]})})]})},ry=()=>{const{user:a}=xn(),[r,s]=A.useState([]),[o,u]=A.useState([]),[d,f]=A.useState([]),[p,g]=A.useState(!0),[y,w]=A.useState(""),[_,j]=A.useState(""),[C,P]=A.useState(""),[E,O]=A.useState(""),[$,z]=A.useState(!1),[M,V]=A.useState(1),[ne,B]=A.useState(10),[X,re]=A.useState(!1),[ve,be]=A.useState(!1),[ae,Ee]=A.useState({id:"",date:"",employeeId:"",componentId:"",qty:0}),[ce,G]=A.useState(null),[ye,L]=A.useState(!1),[fe,q]=A.useState(!1),[D,U]=A.useState({start:"",end:""}),[v,I]=A.useState("COMPONENT"),[R,J]=A.useState("");A.useEffect(()=>{ee()},[a]);const ee=async()=>{g(!0);try{let Z=await Se.getProductionLogs();const Le=await Se.getEmployees(),Ot=await Se.getComponents();(a==null?void 0:a.role)==="USER"&&a.employeeId&&(Z=Z.filter(Vt=>Vt.employeeId===a.employeeId),P(a.employeeId)),s(Z),u(Le),f(Ot)}catch(Z){console.error(Z)}finally{g(!1)}const F=new Date,Pe=new Date(F.getFullYear(),F.getMonth(),1).toLocaleDateString("en-CA"),Ke=new Date(F.getFullYear(),F.getMonth()+1,0).toLocaleDateString("en-CA");U({start:Pe,end:Ke})};A.useEffect(()=>{V(1)},[y,_,C,E,ne]);const he=F=>{if(F)Ee({...F}),be(!0);else{const Pe=new Date().toLocaleDateString("en-CA");Ee({id:Date.now().toString(),date:Pe,employeeId:"",componentId:"",qty:0}),be(!1)}re(!0)},je=async F=>{if(F.preventDefault(),!ae.employeeId||!ae.componentId||ae.qty<=0)return;const Pe=d.find(Z=>Z.id===ae.componentId);if(!Pe)return;const Ke={...ae,priceSnapshot:Pe.price,total:ae.qty*Pe.price};try{await Se.saveProductionLog(Ke),re(!1),ee()}catch{alert("Gagal menyimpan data produksi.")}},ke=async()=>{ce&&(await Se.deleteProductionLog(ce),ee(),G(null))},Te=()=>{w(""),j(""),(a==null?void 0:a.role)==="ADMIN"&&P(""),O("")},ze=F=>{var Pe;return((Pe=o.find(Ke=>Ke.id===F))==null?void 0:Pe.name)||F},_t=F=>{var Pe;return((Pe=d.find(Ke=>Ke.id===F))==null?void 0:Pe.name)||F},hr=()=>{var Pe;return(((Pe=d.find(Ke=>Ke.id===ae.componentId))==null?void 0:Pe.price)||0)*ae.qty},Wt=F=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(F),De=(()=>{if(!ae.employeeId||!ae.date)return null;const F=r.filter(Z=>Z.employeeId===ae.employeeId&&Z.date===ae.date&&Z.id!==ae.id),Pe=F.reduce((Z,Le)=>Z+Le.total,0),Ke=F.length;return{totalDaily:Pe,countItems:Ke}})(),we=r.filter(F=>{const Pe=y?F.date>=y:!0,Ke=_?F.date<=_:!0,Z=C?F.employeeId===C:!0,Le=E?F.componentId===E:!0;return Pe&&Ke&&Z&&Le}).sort((F,Pe)=>new Date(Pe.date).getTime()-new Date(F.date).getTime()),Ie=we.length,Ht=Math.ceil(Ie/ne),ir=(M-1)*ne,fr=Math.min(ir+ne,Ie),Pt=we.slice(ir,ir+ne),Gr=async()=>{const F=window;if(!F.jspdf){alert("Library PDF sedang dimuat.");return}let Pe=R;if((a==null?void 0:a.role)==="USER"&&(Pe=a.employeeId||""),v==="EMPLOYEE"&&!Pe){alert("Silakan pilih karyawan terlebih dahulu.");return}L(!0),q(!1);try{const{jsPDF:Ke}=F.jspdf,Z=new Ke("p","mm","a4"),Le=new Date(D.start).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),Ot=new Date(D.end).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});let Vt=await Se.getProductionLogs();if(Vt=Vt.filter(lt=>lt.date>=D.start&&lt.date<=D.end),v==="COMPONENT"){Z.setFontSize(16),Z.setFont("helvetica","bold"),Z.text("PT. REDONE BERKAH MANDIRI UTAMA",14,15),Z.setFontSize(12),Z.setFont("helvetica","normal"),Z.text("REKAPITULASI PRODUKSI PER KOMPONEN",14,21),Z.setFontSize(10),Z.text(`Periode: ${Le} s/d ${Ot}`,14,27),(a==null?void 0:a.role)==="USER"&&Z.text(`Karyawan: ${ze(a.employeeId||"")}`,14,32),Z.line(14,35,196,35),(a==null?void 0:a.role)==="USER"&&a.employeeId&&(Vt=Vt.filter(Me=>Me.employeeId===a.employeeId));const lt=new Map;Vt.forEach(Me=>{lt.has(Me.componentId)||lt.set(Me.componentId,{compName:_t(Me.componentId),totalQty:0,totalAmount:0});const pt=lt.get(Me.componentId);pt.totalQty+=Me.qty,pt.totalAmount+=Me.total});const ft=Array.from(lt.values()).sort((Me,pt)=>Me.compName.localeCompare(pt.compName)),os=["No","Nama Komponen","Total Qty","Total Upah"],Gt=[];ft.forEach((Me,pt)=>{Gt.push([pt+1,Me.compName,Me.totalQty,Wt(Me.totalAmount)])});const Jr=ft.reduce((Me,pt)=>Me+pt.totalAmount,0),ls=ft.reduce((Me,pt)=>Me+pt.totalQty,0);Gt.push([{content:"TOTAL GRAND",colSpan:2,styles:{halign:"right",fontStyle:"bold"}},{content:ls,styles:{fontStyle:"bold"}},{content:Wt(Jr),styles:{fontStyle:"bold",fillColor:[240,253,244]}}]),Z.autoTable({head:[os],body:Gt,startY:40,theme:"grid",headStyles:{fillColor:[22,163,74],textColor:255,fontStyle:"bold",halign:"center"},columnStyles:{0:{cellWidth:10,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:30,halign:"center"},3:{cellWidth:40,halign:"right",fontStyle:"bold"}}}),Z.save(`Rekap_Komponen_${D.start}.pdf`)}else{const lt=ze(Pe);Z.setFont("helvetica","bold"),Z.setFontSize(16),Z.text("PT. REDONE BERKAH MANDIRI UTAMA",105,15,{align:"center"}),Z.setFontSize(12),Z.text("SLIP GAJI BORONGAN",105,22,{align:"center"}),Z.setLineWidth(.5),Z.line(15,26,195,26),Z.setLineWidth(.1),Z.setFontSize(10),Z.setFont("helvetica","normal");const ft=35;Z.text("Nama Karyawan",15,ft),Z.text(":",45,ft),Z.setFont("helvetica","bold"),Z.text(lt.toUpperCase(),48,ft),Z.setFont("helvetica","normal"),Z.text("Periode",15,ft+5),Z.text(":",45,ft+5),Z.text(`${Le} - ${Ot}`,48,ft+5);const os=Vt.filter(Qe=>Qe.employeeId===Pe),Gt=new Map;os.forEach(Qe=>{Gt.has(Qe.componentId)||Gt.set(Qe.componentId,{compName:_t(Qe.componentId),totalQty:0,totalAmount:0});const vt=Gt.get(Qe.componentId);vt.totalQty+=Qe.qty,vt.totalAmount+=Qe.total});const Jr=Array.from(Gt.values()).sort((Qe,vt)=>Qe.compName.localeCompare(vt.compName)),ls=["No","Nama Pekerjaan / Komponen","Qty","Subtotal"],Me=[];Jr.forEach((Qe,vt)=>{Me.push([vt+1,Qe.compName,Qe.totalQty,Wt(Qe.totalAmount)])});const pt=Jr.reduce((Qe,vt)=>Qe+vt.totalAmount,0);Z.autoTable({head:[ls],body:Me,startY:45,theme:"plain",headStyles:{fillColor:[243,244,246],textColor:33,fontStyle:"bold",lineWidth:.1,lineColor:200,halign:"left"},bodyStyles:{lineColor:229,lineWidth:.1,textColor:50},styles:{fontSize:10,cellPadding:3,valign:"middle"},columnStyles:{0:{cellWidth:15,halign:"center"},1:{cellWidth:"auto"},2:{cellWidth:25,halign:"center"},3:{cellWidth:45,halign:"right"}}});const _r=Z.lastAutoTable.finalY+5;Z.setFillColor(243,244,246),Z.rect(125,_r,70,12,"F"),Z.setFontSize(11),Z.setFont("helvetica","bold"),Z.setTextColor(33,33,33),Z.text("TOTAL TERIMA:",130,_r+8),Z.text(Wt(pt),190,_r+8,{align:"right"});const jr=_r+35;Z.setFontSize(10),Z.setFont("helvetica","normal"),Z.text("Penerima,",40,jr,{align:"center"}),Z.text(`(${lt})`,40,jr+25,{align:"center"}),Z.text("Admin Keuangan,",160,jr,{align:"center"}),Z.text("(____________________)",160,jr+25,{align:"center"}),Z.save(`Slip_Gaji_${lt.replace(/\s+/g,"_")}_${D.start}.pdf`)}}catch(Ke){console.error(Ke),alert("Gagal membuat PDF.")}finally{L(!1)}};return l.jsxs("div",{className:"space-y-4 md:space-y-6 relative animate-fade-in",children:[ye&&l.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/80 flex flex-col items-center justify-center text-white backdrop-blur-sm",children:[l.jsx(kt,{size:48,className:"animate-spin mb-4 text-green-500"}),l.jsx("p",{className:"text-lg font-bold",children:"Sedang Mengolah Data & Membuat PDF..."})]}),l.jsx(yn,{isOpen:!!ce,title:"Hapus Data Hasil Kerja",message:"Yakin ingin menghapus data ini?",onConfirm:ke,onCancel:()=>G(null),type:"danger",confirmText:"Hapus"}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Hasil Kerja Harian"}),l.jsx("p",{className:"text-sm text-slate-500",children:(a==null?void 0:a.role)==="ADMIN"?"Rekapitulasi output produksi":"Riwayat pekerjaan Anda"})]}),l.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[l.jsxs("button",{onClick:()=>q(!0),className:"flex-1 sm:flex-none flex justify-center items-center gap-2 px-4 py-2.5 bg-slate-800 text-white dark:bg-slate-100 dark:text-slate-900 rounded-xl hover:bg-slate-900 dark:hover:bg-slate-200 shadow-lg shadow-slate-800/20 transition-all font-medium text-sm",children:[l.jsx(Hr,{size:18})," Ekspor PDF"]}),(a==null?void 0:a.role)==="ADMIN"&&l.jsxs("button",{onClick:()=>he(),className:"flex-1 sm:flex-none flex justify-center items-center gap-2 px-4 py-2.5 bg-green-600 text-white rounded-xl hover:bg-green-700 shadow-lg shadow-green-600/30 transition-all font-medium text-sm",children:[l.jsx(Ei,{size:18})," Input Hasil"]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-2xl border border-slate-200 dark:border-dark-border shadow-sm overflow-hidden",children:[l.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer bg-slate-50/50 dark:bg-slate-800/20",onClick:()=>z(!$),children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 font-semibold",children:[l.jsx(Zs,{size:18,className:"text-slate-500"}),l.jsx("h3",{children:"Filter & Cari Data"})]}),$?l.jsx(Hl,{size:20,className:"text-slate-400"}):l.jsx(Wr,{size:20,className:"text-slate-400"})]}),$&&l.jsx("div",{className:"p-5 border-t border-slate-100 dark:border-dark-border animate-fade-in",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{className:"text-xs text-slate-500 font-bold mb-1 block uppercase",children:"Dari Tanggal"}),l.jsx("input",{type:"date",value:y,onChange:F=>w(F.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{className:"text-xs text-slate-500 font-bold mb-1 block uppercase",children:"Sampai Tanggal"}),l.jsx("input",{type:"date",value:_,onChange:F=>j(F.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"})]}),(a==null?void 0:a.role)==="ADMIN"&&l.jsxs("div",{className:"relative",children:[l.jsx("label",{className:"text-xs text-slate-500 font-bold mb-1 block uppercase",children:"Karyawan"}),l.jsxs("select",{value:C,onChange:F=>P(F.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm appearance-none",children:[l.jsx("option",{value:"",children:"Semua Karyawan"}),o.map(F=>l.jsx("option",{value:F.id,children:F.name},F.id))]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{className:"text-xs text-slate-500 font-bold mb-1 block uppercase",children:"Komponen"}),l.jsxs("select",{value:E,onChange:F=>O(F.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm appearance-none",children:[l.jsx("option",{value:"",children:"Semua Komponen"}),d.map(F=>l.jsx("option",{value:F.id,children:F.name},F.id))]})]}),l.jsx("div",{className:"flex items-end",children:l.jsxs("button",{onClick:Te,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors text-sm font-medium h-[38px]",children:[l.jsx(Vl,{size:16})," Reset"]})})]})})]}),p?l.jsx("div",{className:"p-12 flex justify-center",children:l.jsx(kt,{className:"animate-spin text-green-500",size:40})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"hidden md:block bg-white dark:bg-dark-card rounded-2xl border border-slate-200 dark:border-dark-border overflow-hidden shadow-sm",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-dark-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Tanggal"}),l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Karyawan"}),l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Komponen"}),l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right",children:"Qty"}),l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right",children:"Total Upah"}),(a==null?void 0:a.role)==="ADMIN"&&l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right",children:"Aksi"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-dark-border",children:Pt.map(F=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4 text-xs text-slate-600 dark:text-slate-300 whitespace-nowrap",children:new Date(F.date).toLocaleDateString("id-ID")}),l.jsx("td",{className:"px-6 py-4 text-xs font-medium text-slate-800 dark:text-slate-200",children:ze(F.employeeId)}),l.jsx("td",{className:"px-6 py-4 text-xs text-slate-600 dark:text-slate-400",children:_t(F.componentId)}),l.jsx("td",{className:"px-6 py-4 text-xs text-right font-mono",children:F.qty}),l.jsxs("td",{className:"px-6 py-4 text-xs text-right font-bold text-green-600 dark:text-green-400",children:["Rp ",F.total.toLocaleString("id-ID")]}),(a==null?void 0:a.role)==="ADMIN"&&l.jsxs("td",{className:"px-6 py-4 text-right space-x-2 whitespace-nowrap",children:[l.jsx("button",{onClick:()=>he(F),className:"text-blue-500 hover:text-blue-600 p-2 hover:bg-blue-50 rounded-lg transition-colors",children:l.jsx(as,{size:16})}),l.jsx("button",{onClick:()=>G(F.id),className:"text-slate-400 hover:text-red-500 p-2 hover:bg-red-50 rounded-lg transition-colors",children:l.jsx(is,{size:16})})]})]},F.id))})]})})}),l.jsx("div",{className:"md:hidden space-y-4",children:Pt.map(F=>l.jsxs("div",{className:"bg-white dark:bg-dark-card p-4 rounded-xl shadow-sm border border-slate-200 dark:border-dark-border",children:[l.jsxs("div",{className:"flex justify-between items-start gap-3 mb-3",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-100 text-base truncate flex-1",children:ze(F.employeeId)}),l.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400 text-base shrink-0",children:["Rp ",F.total.toLocaleString("id-ID")]})]}),l.jsxs("div",{className:"flex justify-between items-center text-sm mb-4 text-slate-500 dark:text-slate-400",children:[l.jsx("span",{className:"truncate pr-2",children:_t(F.componentId)}),l.jsxs("span",{className:"font-mono bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded text-slate-600 dark:text-slate-300 text-xs font-bold",children:["x",F.qty]})]}),l.jsxs("div",{className:`flex justify-between items-center pt-3 border-t border-slate-100 dark:border-slate-800 ${(a==null?void 0:a.role)!=="ADMIN"?"justify-end":""}`,children:[l.jsxs("div",{className:"flex items-center text-xs text-slate-400 font-medium mr-auto",children:[l.jsx($l,{size:12,className:"mr-1.5"}),new Date(F.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})]}),(a==null?void 0:a.role)==="ADMIN"&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>he(F),className:"flex items-center gap-1.5 text-xs font-bold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-3 py-1.5 rounded-lg active:scale-95 transition-transform",children:"Edit"}),l.jsx("button",{onClick:()=>G(F.id),className:"flex items-center gap-1.5 text-xs font-bold text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-3 py-1.5 rounded-lg active:scale-95 transition-transform",children:"Hapus"})]})]})]},F.id))})]}),!p&&we.length===0&&l.jsxs("div",{className:"p-12 text-center flex flex-col items-center justify-center text-slate-500 bg-white dark:bg-dark-card rounded-2xl border border-dashed border-slate-200 dark:border-slate-700",children:[l.jsx(ra,{size:48,className:"text-slate-200 dark:text-slate-700 mb-4"}),l.jsx("p",{className:"font-medium",children:"Data tidak ditemukan"}),l.jsx("p",{className:"text-sm",children:"Coba sesuaikan filter pencarian Anda."})]}),!p&&we.length>0&&l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-white dark:bg-dark-card rounded-2xl border border-slate-200 dark:border-dark-border shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 w-full sm:w-auto justify-between sm:justify-start",children:[l.jsx("span",{children:"Tampilkan:"}),l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:ne,onChange:F=>B(Number(F.target.value)),className:"appearance-none bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg pl-3 pr-8 py-1.5 focus:outline-none focus:ring-2 focus:ring-green-500 font-medium text-slate-800 dark:text-slate-200",children:[l.jsx("option",{value:10,children:"10 Baris"}),l.jsx("option",{value:20,children:"20 Baris"}),l.jsx("option",{value:50,children:"50 Baris"}),l.jsx("option",{value:100,children:"100 Baris"})]}),l.jsx(Wr,{size:14,className:"absolute right-2.5 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500"})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto",children:[l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[ir+1," - ",Math.min(fr,Ie)," dari ",Ie," data"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>V(F=>Math.max(1,F-1)),disabled:M===1,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Si,{size:16})," ",l.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),l.jsxs("button",{onClick:()=>V(F=>Math.min(Ht,F+1)),disabled:M===Ht,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx("span",{className:"hidden sm:inline",children:"Selanjutnya"})," ",l.jsx(ta,{size:16})]})]})]})]}),fe&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-white dark:bg-dark-card w-full max-w-sm rounded-2xl p-6 shadow-2xl border border-slate-100 dark:border-dark-border",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Hr,{className:"text-slate-500",size:20}),l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Ekspor Laporan PDF"})]}),l.jsx("button",{onClick:()=>q(!1),className:"p-1.5 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400",children:l.jsx(ar,{size:18})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsxs("button",{onClick:()=>I("COMPONENT"),className:`flex flex-col items-center justify-center p-3 rounded-xl border transition-all ${v==="COMPONENT"?"border-green-500 bg-green-50 dark:bg-green-900/20 text-green-700":"border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[l.jsx(Ni,{size:24,className:"mb-2"}),l.jsx("span",{className:"text-xs font-bold",children:"Per Komponen"})]}),l.jsxs("button",{onClick:()=>I("EMPLOYEE"),className:`flex flex-col items-center justify-center p-3 rounded-xl border transition-all ${v==="EMPLOYEE"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700":"border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[l.jsx(Ul,{size:24,className:"mb-2"}),l.jsx("span",{className:"text-xs font-bold",children:"Per Karyawan"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1.5 block uppercase",children:"Dari Tanggal"}),l.jsx("input",{type:"date",value:D.start,onChange:F=>U({...D,start:F.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm font-medium"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1.5 block uppercase",children:"Sampai Tanggal"}),l.jsx("input",{type:"date",value:D.end,onChange:F=>U({...D,end:F.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm font-medium"})]}),v==="EMPLOYEE"&&(a==null?void 0:a.role)==="ADMIN"&&l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1.5 block uppercase",children:"Pilih Karyawan"}),l.jsxs("select",{value:R,onChange:F=>J(F.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-900 border border-blue-200 dark:border-blue-900 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm font-medium",children:[l.jsx("option",{value:"",children:"-- Pilih Nama Karyawan --"}),o.map(F=>l.jsx("option",{value:F.id,children:F.name},F.id))]})]})]})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{onClick:()=>q(!1),className:"flex-1 py-2.5 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl font-medium transition-colors border border-slate-200 dark:border-slate-700",children:"Batal"}),l.jsx("button",{onClick:Gr,className:"flex-1 py-2.5 bg-slate-800 text-white dark:bg-slate-100 dark:text-slate-900 rounded-xl font-bold transition-all shadow-lg shadow-slate-800/20",children:"Cetak PDF"})]})]})}),(a==null?void 0:a.role)==="ADMIN"&&X&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-white dark:bg-dark-card w-full max-w-lg rounded-2xl p-6 shadow-2xl border border-slate-100 dark:border-dark-border max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-white dark:bg-dark-card z-10 pb-2 border-b border-slate-50 dark:border-slate-800",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:ve?"Edit Hasil Kerja":"Input Hasil Baru"}),l.jsx("button",{onClick:()=>re(!1),className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-full text-slate-500",children:l.jsx(ar,{size:20})})]}),l.jsxs("form",{onSubmit:je,className:"space-y-4 pb-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Tanggal Pengerjaan"}),l.jsx("input",{type:"date",required:!0,value:ae.date,onChange:F=>Ee({...ae,date:F.target.value}),className:"w-full px-4 py-3 md:py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-green-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Nama Karyawan"}),l.jsxs("select",{required:!0,value:ae.employeeId,onChange:F=>Ee({...ae,employeeId:F.target.value}),className:"w-full px-4 py-3 md:py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-green-500",children:[l.jsx("option",{value:"",children:"-- Pilih Karyawan --"}),o.map(F=>l.jsx("option",{value:F.id,children:F.name},F.id))]})]}),De&&De.countItems>0&&l.jsxs("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800 rounded-xl flex items-start gap-3",children:[l.jsx(Yh,{size:16,className:"text-amber-600 dark:text-amber-400 mt-0.5 shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"block text-xs font-bold text-amber-800 dark:text-amber-300 uppercase tracking-wide",children:"Info Harian"}),l.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-400 mt-0.5",children:["Karyawan ini sudah memiliki ",l.jsxs("b",{children:[De.countItems," input"]})," pada tanggal ini dengan total upah ",l.jsxs("b",{children:["Rp ",De.totalDaily.toLocaleString("id-ID")]}),"."]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Komponen / Item"}),l.jsxs("select",{required:!0,value:ae.componentId,onChange:F=>Ee({...ae,componentId:F.target.value}),className:"w-full px-4 py-3 md:py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-green-500",children:[l.jsx("option",{value:"",children:"-- Pilih Komponen --"}),d.map(F=>l.jsxs("option",{value:F.id,children:[F.name," - Rp ",F.price]},F.id))]})]}),l.jsxs("div",{className:"flex gap-4 items-end bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Quantity (Pcs)"}),l.jsx("input",{type:"number",required:!0,min:"1",value:ae.qty,onChange:F=>Ee({...ae,qty:Number(F.target.value)}),className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-green-500 font-bold text-lg"})]}),l.jsxs("div",{className:"text-right pl-4 border-l border-slate-200 dark:border-slate-700",children:[l.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wide block mb-1",children:"Estimasi Upah"}),l.jsxs("span",{className:"font-bold text-green-600 text-xl block",children:["Rp ",hr().toLocaleString("id-ID")]})]})]}),l.jsxs("div",{className:"flex gap-3 mt-8 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>re(!1),className:"flex-1 px-4 py-3 text-slate-600 hover:bg-slate-100 dark:text-slate-400 rounded-xl transition-colors border border-slate-200 dark:border-slate-700 font-medium",children:"Batal"}),l.jsxs("button",{type:"submit",className:"flex-1 flex justify-center items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold transition-all shadow-lg shadow-green-600/20",children:[l.jsx(ss,{size:18})," Simpan"]})]})]})]})})]})},ny=()=>{const{user:a}=xn(),[r,s]=A.useState([]),[o,u]=A.useState([]),[d,f]=A.useState([]),[p,g]=A.useState(!0),[y,w]=A.useState(!1),[_,j]=A.useState(!1),[C,P]=A.useState(!1),[E,O]=A.useState({start:"",end:""}),[$,z]=A.useState(""),[M,V]=A.useState(""),[ne,B]=A.useState(!1),[X,re]=A.useState("ALL"),[ve,be]=A.useState(1),[ae,Ee]=A.useState(20),[ce,G]=A.useState({id:"",date:"",employeeId:"",amount:0,type:"KASBON",note:""}),[ye,L]=A.useState(null),[fe,q]=A.useState(!1);A.useEffect(()=>{D();const Q=new Date,De=new Date(Q.getFullYear(),Q.getMonth(),1).toLocaleDateString("en-CA"),we=new Date(Q.getFullYear(),Q.getMonth()+1,0).toLocaleDateString("en-CA");O({start:De,end:we})},[a]),A.useEffect(()=>{be(1)},[$,M,X,ae]);const D=async()=>{g(!0);try{let Q=await Se.getPayments(),De=await Se.getProductionLogs();const we=await Se.getEmployees();(a==null?void 0:a.role)==="USER"&&a.employeeId&&(Q=Q.filter(Ie=>Ie.employeeId===a.employeeId),De=De.filter(Ie=>Ie.employeeId===a.employeeId)),s(Q),u(we),f(De)}catch(Q){console.error(Q)}finally{g(!1)}},U=Q=>{if(Q)G({...Q}),j(!0);else{const De=new Date().toLocaleDateString("en-CA");G({id:Date.now().toString(),date:De,employeeId:"",amount:0,type:"KASBON",note:""}),j(!1)}w(!0)},v=async Q=>{if(Q.preventDefault(),!(!ce.employeeId||ce.amount<=0))try{await Se.savePayment(ce),w(!1),D()}catch{alert("Gagal menyimpan data pembayaran")}},I=async()=>{ye&&(await Se.deletePayment(ye),D(),L(null))},R=()=>{z(""),V(""),re("ALL")},J=Q=>{var De;return((De=o.find(we=>we.id===Q))==null?void 0:De.name)||Q},ee=r.filter(Q=>{const De=X==="ALL"||Q.type===X,we=$?Q.date>=$:!0,Ie=M?Q.date<=M:!0;return De&&we&&Ie}),he=ee.length,je=Math.ceil(he/ae),ke=(ve-1)*ae,Te=Math.min(ke+ae,he),ze=ee.slice(ke,ke+ae),hr=(Q=>{if(!Q)return 0;const De=d.filter(Ie=>Ie.employeeId===Q).reduce((Ie,Ht)=>Ie+Ht.total,0),we=r.filter(Ie=>Ie.employeeId===Q&&Ie.id!==ce.id).reduce((Ie,Ht)=>Ie+Ht.amount,0);return De-we})(ce.employeeId),Wt=async()=>{const Q=window;if(!Q.jspdf){alert("Library PDF sedang dimuat.");return}q(!0),P(!1);try{const{jsPDF:De}=Q.jspdf,we=new De("p","mm","a4");let Ie=r.filter(Le=>Le.date>=E.start&&Le.date<=E.end);X!=="ALL"&&(Ie=Ie.filter(Le=>Le.type===X)),Ie.sort((Le,Ot)=>new Date(Ot.date).getTime()-new Date(Le.date).getTime()),we.setFontSize(14),we.setFont("helvetica","bold"),we.text("PT. REDONE BERKAH MANDIRI UTAMA",14,15),we.setFontSize(11),we.setFont("helvetica","normal"),we.text("DATA PEMBAYARAN & KASBON",14,20),we.setFontSize(9);const Ht=new Date(E.start).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),ir=new Date(E.end).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}),fr=X==="ALL"?"Semua Transaksi":X==="KASBON"?"Kasbon":"Pembayaran Gaji";we.text(`Periode: ${Ht} s/d ${ir}`,14,25),we.text(`Kategori: ${fr}`,14,29),(a==null?void 0:a.role)==="USER"&&we.text(`Karyawan: ${J(a.employeeId||"")}`,14,33);const Pt=(a==null?void 0:a.role)==="USER"?36:32;we.setLineWidth(.5),we.line(14,Pt,196,Pt);const Gr=["Tanggal","Karyawan","Tipe","Catatan","Nominal"],F=Ie.map(Le=>[new Date(Le.date).toLocaleDateString("id-ID"),J(Le.employeeId),Le.type==="KASBON"?"Kasbon":"Gaji",Le.note||"-",new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(Le.amount)]),Pe=Ie.reduce((Le,Ot)=>Le+Ot.amount,0);F.push([{content:"TOTAL",colSpan:4,styles:{halign:"right",fontStyle:"bold"}},{content:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(Pe),styles:{fontStyle:"bold"}}]),we.autoTable({head:[Gr],body:F,startY:Pt+5,theme:"grid",headStyles:{fillColor:[30,64,175],textColor:255,fontStyle:"bold",halign:"center",cellPadding:3},styles:{fontSize:9,cellPadding:3,textColor:20,lineColor:[200,200,200],lineWidth:.1},columnStyles:{0:{cellWidth:30},1:{cellWidth:50},2:{cellWidth:25},3:{cellWidth:"auto"},4:{cellWidth:40,halign:"right",fontStyle:"bold"}}});const Ke=we.lastAutoTable.finalY+20;Ke>250&&we.addPage();const Z=Ke>250?40:Ke;we.setFont("helvetica","normal"),we.setFontSize(10),we.setTextColor(0,0,0),we.text("Dibuat Oleh,",40,Z,{align:"center"}),we.text("Admin Keuangan",40,Z+5,{align:"center"}),we.text("(________________________)",40,Z+30,{align:"center"}),we.text("Disetujui Oleh,",150,Z,{align:"center"}),we.text("Manager Keuangan",150,Z+5,{align:"center"}),we.text("(________________________)",150,Z+30,{align:"center"}),we.save(`Data_Pembayaran_${E.start}.pdf`)}catch(De){console.error(De),alert("Gagal membuat PDF.")}finally{q(!1)}};return l.jsxs("div",{className:"space-y-4 md:space-y-6 relative animate-fade-in",children:[fe&&l.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/80 flex flex-col items-center justify-center text-white backdrop-blur-sm",children:[l.jsx(kt,{size:48,className:"animate-spin mb-4 text-blue-500"}),l.jsx("p",{className:"text-lg font-bold",children:"Sedang Membuat Dokumen PDF..."})]}),l.jsx(yn,{isOpen:!!ye,title:"Hapus Data Pembayaran",message:"Yakin ingin menghapus data transaksi ini?",onConfirm:I,onCancel:()=>L(null),type:"danger",confirmText:"Hapus"}),l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Pembayaran & Kasbon"}),l.jsx("p",{className:"text-sm text-slate-500",children:(a==null?void 0:a.role)==="ADMIN"?"Kelola pengeluaran untuk karyawan":"Riwayat penerimaan uang Anda"})]}),l.jsxs("div",{className:"flex w-full md:w-auto gap-2",children:[l.jsxs("button",{onClick:()=>P(!0),className:"flex-1 md:flex-none flex justify-center items-center gap-2 px-4 py-2.5 bg-slate-800 text-white dark:bg-slate-100 dark:text-slate-900 rounded-xl hover:bg-slate-900 dark:hover:bg-slate-200 shadow-lg shadow-slate-800/20 transition-all font-medium text-sm",children:[l.jsx(Hr,{size:18})," Ekspor PDF"]}),(a==null?void 0:a.role)==="ADMIN"&&l.jsxs("button",{onClick:()=>U(),className:"flex-1 md:flex-none flex justify-center items-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 shadow-lg shadow-blue-600/30 transition-all font-medium text-sm",children:[l.jsx(Ei,{size:18})," Input Transaksi"]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-2xl border border-slate-200 dark:border-dark-border shadow-sm overflow-hidden",children:[l.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer bg-slate-50/50 dark:bg-slate-800/20",onClick:()=>B(!ne),children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 font-semibold",children:[l.jsx(Zs,{size:18,className:"text-slate-500"}),l.jsx("h3",{children:"Filter Data"})]}),ne?l.jsx(Hl,{size:20,className:"text-slate-400"}):l.jsx(Wr,{size:20,className:"text-slate-400"})]}),ne&&l.jsx("div",{className:"p-5 border-t border-slate-100 dark:border-dark-border animate-fade-in",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{className:"text-xs text-slate-500 font-bold mb-1 block uppercase",children:"Dari Tanggal"}),l.jsx("input",{type:"date",value:$,onChange:Q=>z(Q.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{className:"text-xs text-slate-500 font-bold mb-1 block uppercase",children:"Sampai Tanggal"}),l.jsx("input",{type:"date",value:M,onChange:Q=>V(Q.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})]}),l.jsx("div",{className:"flex items-end",children:l.jsxs("button",{onClick:R,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors text-sm font-medium h-[38px]",children:[l.jsx(Vl,{size:16})," Reset"]})})]})})]}),l.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 md:pb-0 hide-scrollbar",children:[{id:"ALL",label:"Semua"},{id:"KASBON",label:"Kasbon"},{id:"SALARY",label:"Pembayaran Gaji"}].map(Q=>l.jsx("button",{onClick:()=>re(Q.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${X===Q.id?"bg-slate-800 text-white dark:bg-slate-100 dark:text-slate-900":"bg-white text-slate-600 dark:bg-dark-card dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:Q.label},Q.id))}),p?l.jsx("div",{className:"p-12 flex justify-center",children:l.jsx(kt,{className:"animate-spin text-blue-500",size:40})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"hidden md:block bg-white dark:bg-dark-card rounded-2xl border border-slate-200 dark:border-dark-border overflow-hidden shadow-sm",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-dark-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Tanggal"}),l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Karyawan"}),l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Jenis Transaksi"}),l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Catatan"}),l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right",children:"Nominal"}),(a==null?void 0:a.role)==="ADMIN"&&l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right",children:"Aksi"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-dark-border",children:ze.map(Q=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-300 whitespace-nowrap",children:new Date(Q.date).toLocaleDateString("id-ID")}),l.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-800 dark:text-slate-200",children:J(Q.employeeId)}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-bold uppercase tracking-wide ${Q.type==="KASBON"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:Q.type==="KASBON"?"Kasbon":"Bayar Gaji"})}),l.jsx("td",{className:"px-6 py-4 text-sm text-slate-500 dark:text-slate-400 italic truncate max-w-[150px]",children:Q.note||"-"}),l.jsxs("td",{className:"px-6 py-4 text-sm text-right font-bold text-slate-700 dark:text-slate-200",children:["Rp ",Q.amount.toLocaleString("id-ID")]}),(a==null?void 0:a.role)==="ADMIN"&&l.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>U(Q),className:"text-blue-500 hover:text-blue-600 p-2 hover:bg-blue-50 rounded-lg transition-colors",children:l.jsx(as,{size:16})}),l.jsx("button",{onClick:()=>L(Q.id),className:"text-slate-400 hover:text-red-500 p-2 hover:bg-red-50 rounded-lg transition-colors",children:l.jsx(is,{size:16})})]})]},Q.id))})]})}),l.jsx("div",{className:"md:hidden space-y-3",children:ze.map(Q=>l.jsxs("div",{className:"bg-white dark:bg-dark-card p-3.5 rounded-xl shadow-sm border border-slate-200 dark:border-dark-border",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg shrink-0 ${Q.type==="KASBON"?"bg-orange-50 text-orange-600":"bg-green-50 text-green-600"}`,children:Q.type==="KASBON"?l.jsx(bi,{size:18}):l.jsx(ph,{size:18})}),l.jsxs("div",{children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-100 block text-sm",children:J(Q.employeeId)}),l.jsx("span",{className:"text-xs text-slate-500",children:new Date(Q.date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})})]})]}),l.jsx("div",{className:"text-right",children:l.jsxs("span",{className:`block font-bold text-base ${Q.type==="KASBON"?"text-orange-600":"text-green-600"}`,children:["Rp ",Q.amount.toLocaleString("id-ID")]})})]}),l.jsxs("div",{className:`flex justify-between items-center pt-2 border-t border-slate-50 dark:border-slate-800 ${(a==null?void 0:a.role)!=="ADMIN"?"justify-end":""}`,children:[l.jsx("div",{className:"text-xs text-slate-500 italic max-w-[60%] truncate mr-auto",children:Q.note?Q.note:Q.type==="KASBON"?"Pinjaman Karyawan":"Pembayaran Gaji"}),(a==null?void 0:a.role)==="ADMIN"&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>U(Q),className:"p-1.5 text-blue-500 bg-blue-50 dark:bg-blue-900/20 rounded-lg active:scale-95 transition-transform",children:l.jsx(as,{size:16})}),l.jsx("button",{onClick:()=>L(Q.id),className:"p-1.5 text-red-500 bg-red-50 dark:bg-red-900/20 rounded-lg active:scale-95 transition-transform",children:l.jsx(is,{size:16})})]})]})]},Q.id))})]}),!p&&ee.length===0&&l.jsxs("div",{className:"p-12 text-center text-slate-500 border-2 border-dashed border-slate-200 dark:border-slate-800 rounded-2xl",children:[l.jsx(Zs,{size:32,className:"mx-auto mb-2 opacity-30"}),l.jsx("p",{children:"Belum ada data transaksi."})]}),!p&&ee.length>0&&l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-white dark:bg-dark-card rounded-2xl border border-slate-200 dark:border-dark-border shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 w-full sm:w-auto justify-between sm:justify-start",children:[l.jsx("span",{children:"Tampilkan:"}),l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:ae,onChange:Q=>Ee(Number(Q.target.value)),className:"appearance-none bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg pl-3 pr-8 py-1.5 focus:outline-none focus:ring-2 focus:ring-blue-500 font-medium text-slate-800 dark:text-slate-200",children:[l.jsx("option",{value:10,children:"10 Baris"}),l.jsx("option",{value:20,children:"20 Baris"}),l.jsx("option",{value:50,children:"50 Baris"}),l.jsx("option",{value:100,children:"100 Baris"})]}),l.jsx(Wr,{size:14,className:"absolute right-2.5 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500"})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto",children:[l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[ke+1," - ",Te," dari ",he," data"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>be(Q=>Math.max(1,Q-1)),disabled:ve===1,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Si,{size:16})," ",l.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),l.jsxs("button",{onClick:()=>be(Q=>Math.min(je,Q+1)),disabled:ve===je,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx("span",{className:"hidden sm:inline",children:"Selanjutnya"})," ",l.jsx(ta,{size:16})]})]})]})]}),C&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-white dark:bg-dark-card w-full max-w-sm rounded-2xl p-6 shadow-2xl border border-slate-100 dark:border-dark-border",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Hr,{className:"text-slate-500",size:20}),l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Ekspor Laporan PDF"})]}),l.jsx("button",{onClick:()=>P(!1),className:"p-1.5 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400",children:l.jsx(ar,{size:18})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded-xl text-sm mb-4 flex items-start gap-2",children:[l.jsx(wi,{size:16,className:"mt-0.5 shrink-0"}),l.jsxs("p",{children:["Filter periode akan diterapkan pada kategori ",l.jsx("b",{children:X==="ALL"?"Semua Transaksi":X==="KASBON"?"Kasbon":"Pembayaran Gaji"}),"."]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1.5 block uppercase",children:"Dari Tanggal"}),l.jsx("input",{type:"date",value:E.start,onChange:Q=>O({...E,start:Q.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm font-medium"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1.5 block uppercase",children:"Sampai Tanggal"}),l.jsx("input",{type:"date",value:E.end,onChange:Q=>O({...E,end:Q.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm font-medium"})]})]})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{onClick:()=>P(!1),className:"flex-1 py-2.5 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl font-medium transition-colors border border-slate-200 dark:border-slate-700",children:"Batal"}),l.jsx("button",{onClick:Wt,className:"flex-1 py-2.5 bg-slate-800 text-white dark:bg-slate-100 dark:text-slate-900 rounded-xl font-bold transition-all shadow-lg shadow-slate-800/20",children:"Cetak PDF"})]})]})}),(a==null?void 0:a.role)==="ADMIN"&&y&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-white dark:bg-dark-card w-full max-w-md rounded-2xl p-6 shadow-2xl border border-slate-100 dark:border-dark-border",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:_?"Edit Transaksi":"Transaksi Baru"}),l.jsx("button",{onClick:()=>w(!1),className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-full text-slate-500",children:l.jsx(ar,{size:20})})]}),l.jsxs("form",{onSubmit:v,className:"space-y-4 pb-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsxs("label",{className:`cursor-pointer border rounded-xl p-3 flex flex-col items-center justify-center gap-2 transition-all ${ce.type==="KASBON"?"border-orange-500 bg-orange-50 dark:bg-orange-900/20 text-orange-700":"border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[l.jsx("input",{type:"radio",name:"type",value:"KASBON",checked:ce.type==="KASBON",onChange:()=>G({...ce,type:"KASBON"}),className:"hidden"}),l.jsx(bi,{size:24}),l.jsx("span",{className:"font-bold text-sm",children:"Kasbon"})]}),l.jsxs("label",{className:`cursor-pointer border rounded-xl p-3 flex flex-col items-center justify-center gap-2 transition-all ${ce.type==="SALARY"?"border-green-500 bg-green-50 dark:bg-green-900/20 text-green-700":"border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[l.jsx("input",{type:"radio",name:"type",value:"SALARY",checked:ce.type==="SALARY",onChange:()=>G({...ce,type:"SALARY"}),className:"hidden"}),l.jsx(ph,{size:24}),l.jsx("span",{className:"font-bold text-sm",children:"Bayar Gaji"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Tanggal"}),l.jsx("input",{type:"date",required:!0,value:ce.date,onChange:Q=>G({...ce,date:Q.target.value}),className:"w-full px-4 py-3 md:py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Karyawan"}),l.jsxs("select",{required:!0,value:ce.employeeId,onChange:Q=>G({...ce,employeeId:Q.target.value}),className:"w-full px-4 py-3 md:py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"",children:"-- Pilih Karyawan --"}),o.map(Q=>l.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),ce.employeeId&&l.jsxs("div",{className:`p-3 rounded-xl border flex items-start gap-3 transition-colors ${hr>=0?"bg-blue-50 dark:bg-blue-900/20 border-blue-100 dark:border-blue-900 text-blue-800 dark:text-blue-300":"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 text-red-800 dark:text-red-300"}`,children:[l.jsx("div",{className:"p-1 bg-white dark:bg-dark-card rounded-full shadow-sm shrink-0",children:l.jsx(wi,{size:16})}),l.jsxs("div",{children:[l.jsx("span",{className:"block text-xs font-bold uppercase tracking-wide opacity-70",children:"Sisa Gaji Tersimpan"}),l.jsxs("span",{className:"block text-lg font-bold",children:["Rp ",hr.toLocaleString("id-ID")]}),ce.type==="SALARY"&&l.jsx("div",{className:"mt-1 flex gap-2",children:l.jsxs("button",{type:"button",onClick:()=>G({...ce,amount:hr>0?hr:0}),className:"text-xs bg-white dark:bg-dark-card border border-blue-200 dark:border-blue-800 px-2 py-1 rounded shadow-sm hover:bg-blue-50 dark:hover:bg-blue-900/50 flex items-center gap-1",children:[l.jsx(Mg,{size:10})," Bayar Semua"]})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Nominal (Rp)"}),l.jsx("input",{type:"number",required:!0,min:"1",value:ce.amount,onChange:Q=>G({...ce,amount:Number(Q.target.value)}),className:"w-full px-4 py-3 md:py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-blue-500 font-bold text-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Catatan (Opsional)"}),l.jsx("input",{type:"text",value:ce.note||"",onChange:Q=>G({...ce,note:Q.target.value}),placeholder:"Contoh: Cicilan ke-1",className:"w-full px-4 py-3 md:py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{className:"flex gap-3 mt-8 pt-4 border-t border-slate-100 dark:border-slate-800",children:[l.jsx("button",{type:"button",onClick:()=>w(!1),className:"flex-1 px-4 py-3 text-slate-600 hover:bg-slate-100 dark:text-slate-400 rounded-xl transition-colors border border-slate-200 dark:border-slate-700 font-medium",children:"Batal"}),l.jsxs("button",{type:"submit",className:"flex-1 flex justify-center items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-all shadow-lg shadow-blue-600/20",children:[l.jsx(ss,{size:18})," Simpan"]})]})]})]})})]})},sy=()=>{const[a,r]=A.useState([]),[s,o]=A.useState([]),[u,d]=A.useState(""),[f,p]=A.useState(""),[g,y]=A.useState(""),[w,_]=A.useState(!1),[j,C]=A.useState(!1),[P,E]=A.useState(!0),[O,$]=A.useState(1),[z,M]=A.useState(20);A.useEffect(()=>{V()},[]),A.useEffect(()=>{$(1)},[u,f,g,z]);const V=async()=>{E(!0);try{const G=await Se.getEmployees();o(G);const ye=await Se.getProductionLogs(),L=await Se.getPayments(),fe=await Se.getComponents();let q=[];ye.forEach(U=>{const v=G.find(R=>R.id===U.employeeId),I=fe.find(R=>R.id===U.componentId);q.push({id:U.id,date:U.date,employeeId:U.employeeId,employeeName:(v==null?void 0:v.name)||"Unknown",description:`Hasil Kerja (${U.qty}x ${(I==null?void 0:I.name)||"Item"})`,type:"IN",amount:U.total,balance:0})}),L.forEach(U=>{const v=G.find(I=>I.id===U.employeeId);q.push({id:U.id,date:U.date,employeeId:U.employeeId,employeeName:(v==null?void 0:v.name)||"Unknown",description:U.type==="KASBON"?"KASBON (Pinjaman)":"PEMBAYARAN GAJI",type:"OUT",amount:U.amount,balance:0})}),q.sort((U,v)=>{const I=new Date(U.date).getTime(),R=new Date(v.date).getTime();return I!==R?I-R:U.type==="IN"?-1:1});let D=0;q=q.map(U=>(U.type==="IN"?D+=U.amount:D-=U.amount,{...U,balance:D})),r(q.reverse())}catch(G){console.error(G)}finally{E(!1)}},ne=G=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(G),B=()=>{d(""),p(""),y("")},X=a.filter(G=>{const ye=u?G.date>=u:!0,L=f?G.date<=f:!0,fe=g?G.employeeId===g:!0;return ye&&L&&fe}),re=X.length,ve=Math.ceil(re/z),be=(O-1)*z,ae=Math.min(be+z,re),Ee=X.slice(be,be+z),ce=()=>{const G=window;if(!G.jspdf){alert("Library PDF sedang dimuat.");return}C(!0);try{const{jsPDF:ye}=G.jspdf,L=new ye("landscape","mm","a4");L.setFontSize(16),L.setFont("helvetica","bold"),L.text("PT. REDONE BERKAH MANDIRI UTAMA",14,15),L.setFontSize(12),L.setFont("helvetica","normal"),L.text("LAPORAN KEUANGAN & MUTASI GAJI",14,21);const fe=u?new Date(u).toLocaleDateString("id-ID"):"Awal",q=f?new Date(f).toLocaleDateString("id-ID"):"Sekarang";L.setFontSize(10),L.text(`Periode: ${fe} s/d ${q}`,14,27),L.line(14,30,283,30);const D=["Tanggal","Karyawan","Keterangan","Masuk","Keluar","Saldo"],U=[];X.forEach(R=>{const J=[new Date(R.date).toLocaleDateString("id-ID"),R.employeeName,R.description,R.type==="IN"?ne(R.amount):"-",R.type==="OUT"?ne(R.amount):"-",ne(R.balance)];U.push(J)}),L.autoTable({head:[D],body:U,startY:35,theme:"grid",headStyles:{fillColor:[30,41,59],textColor:255,fontStyle:"bold",halign:"center"},styles:{fontSize:9,cellPadding:2,textColor:20},columnStyles:{0:{cellWidth:25},1:{cellWidth:40},2:{cellWidth:"auto"},3:{halign:"right",font:"courier",textColor:[22,163,74]},4:{halign:"right",font:"courier",textColor:[234,88,12]},5:{halign:"right",font:"courier",fontStyle:"bold"}}});const v=L.lastAutoTable.finalY+20;v>170&&L.addPage();const I=v>170?40:v;L.setFont("helvetica","normal"),L.setFontSize(10),L.setTextColor(0,0,0),L.text("Disiapkan Oleh,",40,I,{align:"center"}),L.text("Admin Keuangan",40,I+5,{align:"center"}),L.text("(________________________)",40,I+30,{align:"center"}),L.text("Disetujui Oleh,",240,I,{align:"center"}),L.text("Manager Operasional",240,I+5,{align:"center"}),L.text("(________________________)",240,I+30,{align:"center"}),L.save(`Laporan_Keuangan_${fe}_${q}.pdf`)}catch(ye){console.error(ye),alert("Gagal membuat PDF.")}finally{C(!1)}};return l.jsxs("div",{className:"space-y-4 md:space-y-6 relative animate-fade-in",children:[j&&l.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/80 flex flex-col items-center justify-center text-white backdrop-blur-sm",children:[l.jsx(kt,{size:48,className:"animate-spin mb-4 text-primary-500"}),l.jsx("p",{className:"text-lg font-bold",children:"Sedang Membuat Dokumen PDF..."})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 no-print",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Data Keuangan"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Mutasi Saldo Hutang Gaji"})]}),l.jsxs("button",{onClick:ce,className:"w-full sm:w-auto flex justify-center items-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-900 text-white dark:bg-slate-100 dark:hover:bg-slate-200 dark:text-slate-900 rounded-xl transition-all shadow-sm font-medium",children:[l.jsx(Hr,{size:18})," Ekspor Data (PDF)"]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-2xl border border-slate-200 dark:border-dark-border shadow-sm overflow-hidden no-print",children:[l.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer bg-slate-50/50 dark:bg-slate-800/20",onClick:()=>_(!w),children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 font-semibold",children:[l.jsx(Zs,{size:18,className:"text-slate-500"}),l.jsx("h3",{children:"Filter Transaksi"})]}),w?l.jsx(Hl,{size:20,className:"text-slate-400"}):l.jsx(Wr,{size:20,className:"text-slate-400"})]}),w&&l.jsx("div",{className:"p-5 border-t border-slate-100 dark:border-dark-border animate-fade-in",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-500 font-bold mb-1 block uppercase",children:"Dari Tanggal"}),l.jsx("input",{type:"date",value:u,onChange:G=>d(G.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-500 font-bold mb-1 block uppercase",children:"Sampai Tanggal"}),l.jsx("input",{type:"date",value:f,onChange:G=>p(G.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-slate-500 font-bold mb-1 block uppercase",children:"Karyawan"}),l.jsxs("select",{value:g,onChange:G=>y(G.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm appearance-none",children:[l.jsx("option",{value:"",children:"Semua Karyawan"}),s.map(G=>l.jsx("option",{value:G.id,children:G.name},G.id))]})]}),l.jsx("div",{className:"flex items-end",children:l.jsxs("button",{onClick:B,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors text-sm font-medium h-[38px]",children:[l.jsx(Vl,{size:16})," Reset"]})})]})})]}),P?l.jsx("div",{className:"p-12 flex justify-center",children:l.jsx(kt,{className:"animate-spin text-blue-500",size:40})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-2xl border border-slate-200 dark:border-dark-border overflow-hidden shadow-sm",children:[l.jsx("div",{className:"hidden md:block overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-dark-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Tanggal"}),l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Karyawan"}),l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Keterangan"}),l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right text-green-600",children:"Masuk"}),l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right text-orange-600",children:"Keluar"}),l.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right",children:"Saldo"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-dark-border",children:Ee.map((G,ye)=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-600 dark:text-slate-300",children:new Date(G.date).toLocaleDateString("id-ID")}),l.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-800 dark:text-slate-200",children:G.employeeName}),l.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:G.description}),l.jsx("td",{className:"px-6 py-4 text-sm text-right font-medium text-green-600 dark:text-green-400",children:G.type==="IN"?ne(G.amount):"-"}),l.jsx("td",{className:"px-6 py-4 text-sm text-right font-medium text-orange-600 dark:text-orange-400",children:G.type==="OUT"?ne(G.amount):"-"}),l.jsx("td",{className:"px-6 py-4 text-sm text-right font-bold text-slate-800 dark:text-slate-100",children:ne(G.balance)})]},`${G.id}-${ye}`))})]})}),l.jsx("div",{className:"md:hidden no-print space-y-3",children:Ee.map((G,ye)=>l.jsx("div",{className:"bg-white dark:bg-dark-card p-3.5 rounded-xl shadow-sm border border-slate-200 dark:border-dark-border",children:l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`p-2 rounded-lg ${G.type==="IN"?"bg-green-50 text-green-600":"bg-orange-50 text-orange-600"}`,children:G.type==="IN"?l.jsx(zg,{size:18}):l.jsx(Jh,{size:18})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100 text-sm",children:G.employeeName}),l.jsx("span",{className:"text-xs text-slate-400",children:new Date(G.date).toLocaleDateString("id-ID",{day:"numeric",month:"long"})})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("span",{className:`block font-bold text-sm ${G.type==="IN"?"text-green-600":"text-orange-600"}`,children:[G.type==="IN"?"+":"-"," ",ne(G.amount)]}),l.jsxs("span",{className:"text-[10px] text-slate-400",children:["Saldo: ",ne(G.balance)]})]})]})},`${G.id}-${ye}`))}),X.length===0&&l.jsxs("div",{className:"p-12 text-center flex flex-col items-center justify-center text-slate-500",children:[l.jsx(ra,{size:48,className:"text-slate-200 dark:text-slate-700 mb-4"}),l.jsx("p",{className:"font-medium",children:"Data transaksi tidak ditemukan"})]})]}),X.length>0&&l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-white dark:bg-dark-card rounded-2xl border border-slate-200 dark:border-dark-border shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 w-full sm:w-auto justify-between sm:justify-start",children:[l.jsx("span",{children:"Tampilkan:"}),l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:z,onChange:G=>M(Number(G.target.value)),className:"appearance-none bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg pl-3 pr-8 py-1.5 focus:outline-none focus:ring-2 focus:ring-primary-500 font-medium text-slate-800 dark:text-slate-200",children:[l.jsx("option",{value:10,children:"10 Baris"}),l.jsx("option",{value:20,children:"20 Baris"}),l.jsx("option",{value:50,children:"50 Baris"}),l.jsx("option",{value:100,children:"100 Baris"})]}),l.jsx(Wr,{size:14,className:"absolute right-2.5 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500"})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto",children:[l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[be+1," - ",ae," dari ",re," data"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>$(G=>Math.max(1,G-1)),disabled:O===1,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Si,{size:16})," ",l.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"})]}),l.jsxs("button",{onClick:()=>$(G=>Math.min(ve,G+1)),disabled:O===ve,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx("span",{className:"hidden sm:inline",children:"Selanjutnya"})," ",l.jsx(ta,{size:16})]})]})]})]})]})]})},ay=()=>{const[a,r]=A.useState([]),[s,o]=A.useState(!0),[u,d]=A.useState(""),[f,p]=A.useState(""),[g,y]=A.useState("-"),[w,_]=A.useState(!1),[j,C]=A.useState(!1);A.useEffect(()=>{const B=new Date().toLocaleDateString("en-CA");d(B),p(B)},[]);const P=async()=>{C(!0);try{const B=await Se.getEmployees(),X=await Se.getProductionLogs(),re=await Se.getPayments(),ve=B.map(ae=>{const Ee=X.filter(L=>L.employeeId===ae.id&&L.date>=u&&L.date<=f),ce=re.filter(L=>L.employeeId===ae.id&&L.date>=u&&L.date<=f),G=Ee.reduce((L,fe)=>L+fe.total,0),ye=ce.reduce((L,fe)=>L+fe.amount,0);return{employeeId:ae.id,name:ae.name,totalUpah:G,totalDibayar:ye,saldo:G-ye}}).filter(ae=>ae.totalUpah>0||ae.totalDibayar>0);r(ve);const be=ae=>new Date(ae).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"});y(`${be(u)} s/d ${be(f)}`)}catch(B){console.error("Error calc rekap",B)}finally{C(!1)}},E=B=>{B.preventDefault(),P(),o(!1)},O=B=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(B),$=()=>{const B=window;if(!B.jspdf){alert("Library PDF sedang dimuat, coba sesaat lagi.");return}_(!0);try{const{jsPDF:X}=B.jspdf,re=new X("landscape","mm","a4");re.setFontSize(16),re.setFont("helvetica","bold"),re.text("PT. REDONE BERKAH MANDIRI UTAMA",14,15),re.setFontSize(12),re.setFont("helvetica","normal"),re.text("REKAPITULASI UPAH BORONGAN",14,21),re.setFontSize(10),re.text(`Periode: ${g}`,14,27),re.line(14,30,283,30);const ve=["ID Karyawan","Nama Karyawan","Total Upah (+)","Total Dibayar (-)","Sisa Saldo (=)"],be=[];a.forEach(L=>{const fe=[L.employeeId,L.name,O(L.totalUpah),O(L.totalDibayar),O(L.saldo)];be.push(fe)});const ae=a.reduce((L,fe)=>L+fe.totalUpah,0),Ee=a.reduce((L,fe)=>L+fe.totalDibayar,0),ce=a.reduce((L,fe)=>L+fe.saldo,0);be.push([{content:"TOTAL PERIODE",colSpan:2,styles:{halign:"right",fontStyle:"bold"}},{content:O(ae),styles:{fontStyle:"bold"}},{content:O(Ee),styles:{fontStyle:"bold"}},{content:O(ce),styles:{fontStyle:"bold",fillColor:[240,240,240]}}]),re.autoTable({head:[ve],body:be,startY:35,theme:"grid",headStyles:{fillColor:[22,163,74],textColor:255,fontStyle:"bold",halign:"center"},styles:{fontSize:10,cellPadding:3,textColor:20},columnStyles:{0:{halign:"left",cellWidth:30},1:{halign:"left"},2:{halign:"right",font:"courier"},3:{halign:"right",font:"courier"},4:{halign:"right",font:"courier",fontStyle:"bold"}},didDrawPage:L=>{}});const G=re.lastAutoTable.finalY+20;G>170&&re.addPage();const ye=G>170?40:G;re.setFont("helvetica","normal"),re.setFontSize(10),re.text("Mengetahui,",40,ye,{align:"center"}),re.text("Manager",40,ye+5,{align:"center"}),re.text("(________________________)",40,ye+30,{align:"center"}),re.text("Dibuat Oleh,",240,ye,{align:"center"}),re.text("Admin Keuangan",240,ye+5,{align:"center"}),re.text("(________________________)",240,ye+30,{align:"center"}),re.save(`Rekap_Borongan_${u}_sd_${f}.pdf`)}catch(X){console.error(X),alert("Gagal membuat PDF. Pastikan browser mendukung.")}finally{_(!1)}},z=a.reduce((B,X)=>B+X.totalUpah,0),M=a.reduce((B,X)=>B+X.totalDibayar,0),V=a.reduce((B,X)=>B+X.saldo,0),ne=({title:B,value:X,icon:re,colorClass:ve,textClass:be})=>l.jsxs("div",{className:"bg-white dark:bg-dark-card p-3.5 md:p-4 rounded-xl border border-slate-100 dark:border-dark-border shadow-sm flex items-center justify-between no-print",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-slate-500 font-medium mb-1",children:B}),l.jsx("h3",{className:`text-lg font-bold ${be}`,children:O(X)})]}),l.jsx("div",{className:`p-2 rounded-lg ${ve}`,children:l.jsx(re,{size:20})})]});return l.jsxs("div",{className:"space-y-4 md:space-y-6 relative animate-fade-in",children:[w&&l.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/80 flex flex-col items-center justify-center text-white backdrop-blur-sm",children:[l.jsx(kt,{size:48,className:"animate-spin mb-4 text-primary-500"}),l.jsx("p",{className:"text-lg font-bold",children:"Sedang Membuat Dokumen PDF..."})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 no-print",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Rekapitulasi Hasil"}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mt-0.5",children:[l.jsx($l,{size:14}),l.jsxs("span",{children:["Periode: ",l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:g})]})]})]}),l.jsxs("div",{className:"flex w-full sm:w-auto gap-2",children:[l.jsxs("button",{onClick:()=>o(!0),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-white dark:bg-dark-card border border-slate-200 dark:border-dark-border text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition-all text-sm font-medium",children:[l.jsx(Zs,{size:16})," Ganti Periode"]}),l.jsxs("button",{onClick:$,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-slate-800 text-white dark:bg-slate-100 dark:text-slate-900 rounded-xl hover:bg-slate-900 dark:hover:bg-white shadow-lg shadow-slate-800/20 transition-all text-sm font-medium",children:[l.jsx(Hr,{size:16})," Print / PDF"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 no-print",children:[l.jsx(ne,{title:"Total Hasil Kerja (Upah)",value:z,icon:Jg,colorClass:"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400",textClass:"text-green-600 dark:text-green-400"}),l.jsx(ne,{title:"Total Telah Dibayar",value:M,icon:Jh,colorClass:"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400",textClass:"text-orange-600 dark:text-orange-400"}),l.jsx(ne,{title:"Sisa Saldo Gaji",value:V,icon:bi,colorClass:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",textClass:"text-blue-600 dark:text-blue-400"})]}),j?l.jsx("div",{className:"p-12 flex justify-center",children:l.jsx(kt,{className:"animate-spin text-green-500",size:40})}):l.jsx(l.Fragment,{children:l.jsxs("div",{className:"bg-white dark:bg-dark-card rounded-2xl border border-slate-200 dark:border-dark-border shadow-sm overflow-hidden",children:[l.jsx("div",{className:"hidden md:block overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-dark-border",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Nama Karyawan"}),l.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider text-right text-green-600",children:"Total Upah (+)"}),l.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider text-right text-orange-600",children:"Total Dibayar (-)"}),l.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider text-right text-blue-600",children:"Sisa Saldo (=)"})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-dark-border",children:[a.map(B=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[l.jsxs("td",{className:"px-6 py-3 text-sm font-medium text-slate-800 dark:text-slate-200",children:[B.name," ",l.jsxs("span",{className:"text-[10px] text-slate-400 ml-1 font-mono no-print",children:["#",B.employeeId]})]}),l.jsx("td",{className:"px-6 py-3 text-sm text-right font-medium text-green-600 dark:text-green-400 font-mono",children:O(B.totalUpah)}),l.jsx("td",{className:"px-6 py-3 text-sm text-right font-medium text-orange-600 dark:text-orange-400 font-mono",children:O(B.totalDibayar)}),l.jsx("td",{className:"px-6 py-3 text-sm text-right font-bold text-slate-800 dark:text-slate-100 font-mono bg-slate-50/50 dark:bg-slate-800/50",children:O(B.saldo)})]},B.employeeId)),a.length===0&&l.jsx("tr",{children:l.jsxs("td",{colSpan:4,className:"px-6 py-12 text-center text-slate-500 italic",children:[l.jsx(ra,{size:32,className:"mx-auto mb-2 opacity-20"}),"Tidak ada data transaksi pada periode ini."]})})]}),l.jsx("tfoot",{className:"bg-slate-50 dark:bg-slate-800 border-t-2 border-slate-200 dark:border-dark-border font-bold",children:l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-3 text-right uppercase text-xs text-slate-500",children:"Total Periode"}),l.jsx("td",{className:"px-6 py-3 text-right text-green-700 dark:text-green-400 text-sm",children:O(z)}),l.jsx("td",{className:"px-6 py-3 text-right text-orange-700 dark:text-orange-400 text-sm",children:O(M)}),l.jsx("td",{className:"px-6 py-3 text-right text-slate-900 dark:text-slate-100 text-base",children:O(V)})]})})]})}),l.jsx("div",{className:"md:hidden no-print",children:a.map(B=>l.jsxs("div",{className:"p-3.5 border-b border-slate-100 dark:border-dark-border last:border-0",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100",children:B.name}),l.jsx("span",{className:`text-sm font-bold px-2 py-0.5 rounded ${B.saldo>=0?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":"bg-red-50 text-red-700"}`,children:O(B.saldo)})]}),l.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("span",{className:"block text-slate-400 mb-0.5",children:"Total Upah"}),l.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:O(B.totalUpah)})]}),l.jsx("div",{className:"w-px h-8 bg-slate-100 dark:bg-slate-800"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("span",{className:"block text-slate-400 mb-0.5",children:"Dibayar"}),l.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:O(B.totalDibayar)})]})]})]},B.employeeId))})]})}),s&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fade-in no-print",children:l.jsxs("div",{className:"bg-white dark:bg-dark-card w-full max-w-md rounded-2xl shadow-2xl border border-slate-100 dark:border-dark-border overflow-hidden transform transition-all",children:[l.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 dark:border-dark-border flex justify-between items-center bg-slate-50/50 dark:bg-slate-800/50",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 rounded-lg",children:l.jsx($l,{size:18})}),l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100",children:"Filter Periode"})]}),l.jsx("button",{onClick:()=>o(!1),className:"p-1 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-400 transition-colors",children:l.jsx(ar,{size:20})})]}),l.jsx("div",{className:"p-6",children:l.jsxs("form",{onSubmit:E,children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1.5 block",children:"Dari Tanggal"}),l.jsx("input",{type:"date",required:!0,value:u,onChange:B=>d(B.target.value),className:"w-full px-3 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm font-medium"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1.5 block",children:"Sampai Tanggal"}),l.jsx("input",{type:"date",required:!0,value:f,onChange:B=>p(B.target.value),className:"w-full px-3 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm font-medium"})]})]}),l.jsxs("div",{className:"flex gap-3 border-t border-slate-100 dark:border-dark-border pt-4",children:[l.jsx("button",{type:"button",onClick:()=>o(!1),className:"flex-1 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors",children:"Batal"}),l.jsx("button",{type:"submit",className:"flex-1 py-2.5 text-sm font-bold text-white bg-primary-600 hover:bg-primary-700 rounded-xl shadow-lg shadow-primary-600/20 transition-all",children:"Terapkan"})]})]})})]})})]})},iy=({view:a,icon:r,label:s,isActive:o,onClick:u})=>l.jsxs("button",{onClick:u,className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 group ${o?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-dark-border"}`,children:[l.jsx(r,{size:20,className:o?"text-white":"text-slate-500 group-hover:text-primary-600 dark:text-slate-400"}),l.jsx("span",{className:"font-medium",children:s})]}),oy=()=>{var ye;const{user:a,logout:r}=xn(),[s,o]=A.useState(Ze.DASHBOARD),[u,d]=A.useState(!0),[f,p]=A.useState(!0),[g,y]=A.useState(0),[w,_]=A.useState(!1),[j,C]=A.useState(!1),P=A.useRef(null),[E,O]=A.useState(!1),[$,z]=A.useState({old:"",new:"",confirm:""}),[M,V]=A.useState(""),[ne,B]=A.useState("");A.useEffect(()=>{window.innerWidth<768&&d(!1)},[]),A.useEffect(()=>{f?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[f]);const X=()=>p(!f),ve=[{view:Ze.DASHBOARD,icon:qg,label:"Home",roles:["ADMIN","USER"]},{view:Ze.PRODUCTION,icon:Kg,label:"Produksi",roles:["ADMIN","USER"]},{view:Ze.PAYMENTS,icon:bi,label:"Pembayaran",roles:["ADMIN","USER"]},{view:Ze.EMPLOYEES,icon:Xh,label:"Karyawan",roles:["ADMIN"]},{view:Ze.COMPONENTS,icon:Ni,label:"Komponen",roles:["ADMIN","USER"]},{view:Ze.REKAP,icon:Fg,label:"Rekap",roles:["ADMIN"]}].filter(L=>L.roles.includes((a==null?void 0:a.role)||"USER")),be=L=>{o(L),window.innerWidth<768&&d(!1)},ae=()=>{C(!1),_(!0)},Ee=()=>{r(),_(!1)},ce=()=>{z({old:"",new:"",confirm:""}),V(""),B(""),O(!0),C(!1)},G=async L=>{if(L.preventDefault(),V(""),B(""),$.new.length<5){V("Password baru minimal 5 karakter");return}if($.new!==$.confirm){V("Konfirmasi password tidak cocok");return}try{await Se.updatePassword((a==null?void 0:a.username)||"",$.old,$.new),B("Password berhasil diubah!"),z({old:"",new:"",confirm:""}),setTimeout(()=>{O(!1)},1500)}catch(fe){V(fe.message||"Gagal mengubah password")}};return l.jsxs("div",{className:"h-screen flex bg-slate-50 dark:bg-dark-bg text-slate-900 dark:text-slate-100 overflow-hidden print:overflow-visible print:h-auto animate-fade-in",children:[l.jsx(yn,{isOpen:w,title:"Konfirmasi Logout",message:"Apakah Anda yakin ingin keluar dari aplikasi?",onConfirm:Ee,onCancel:()=>_(!1),confirmText:"Logout",cancelText:"Batal",type:"danger"}),E&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",children:l.jsxs("div",{className:"bg-white dark:bg-dark-card w-full max-w-md rounded-2xl p-6 shadow-2xl border border-slate-100 dark:border-dark-border",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[l.jsx(Wg,{size:20,className:"text-primary-500"})," Ganti Password"]}),l.jsx("button",{onClick:()=>O(!1),className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-full text-slate-500",children:l.jsx(ar,{size:20})})]}),M&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-xl font-medium",children:M}),ne&&l.jsxs("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 text-sm rounded-xl font-medium flex items-center gap-2",children:[l.jsx(ss,{size:16})," ",ne]}),l.jsxs("form",{onSubmit:G,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Password Lama"}),l.jsx("input",{type:"password",required:!0,value:$.old,onChange:L=>z({...$,old:L.target.value}),className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ketik password lama"})]}),l.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-800 my-2 pt-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Password Baru"}),l.jsx("input",{type:"password",required:!0,value:$.new,onChange:L=>z({...$,new:L.target.value}),className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ketik password baru"})]}),l.jsxs("div",{className:"mt-3",children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Konfirmasi Password Baru"}),l.jsx("input",{type:"password",required:!0,value:$.confirm,onChange:L=>z({...$,confirm:L.target.value}),className:"w-full px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-xl dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ulangi password baru"})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6 pt-2",children:[l.jsx("button",{type:"button",onClick:()=>O(!1),className:"flex-1 px-4 py-2.5 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl font-medium transition-colors",children:"Batal"}),l.jsxs("button",{type:"submit",className:"flex-1 flex justify-center items-center gap-2 px-6 py-2.5 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold transition-all shadow-lg shadow-primary-600/20",children:[l.jsx(ss,{size:18})," Simpan"]})]})]})]})}),u&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-[80] md:hidden backdrop-blur-sm",onClick:()=>d(!1)}),l.jsx("aside",{className:`fixed md:static inset-y-0 left-0 z-[90] w-64 bg-white dark:bg-dark-card border-r border-slate-200 dark:border-dark-border transform transition-transform duration-300 ease-in-out print:hidden flex flex-col ${u?"translate-x-0":"-translate-x-full md:translate-x-0"} md:block`,children:l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-dark-border flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center text-white font-bold",children:"R"}),l.jsxs("span",{className:"font-bold text-lg tracking-tight",children:["Redone",l.jsx("span",{className:"text-primary-600",children:"Paypro"})]})]}),l.jsx("button",{onClick:()=>d(!1),className:"md:hidden text-slate-400",children:l.jsx(ar,{size:20})})]}),l.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:[l.jsx("div",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2 px-4 pt-2",children:"Menu Utama"}),ve.map(L=>l.jsx(iy,{view:L.view,icon:L.icon,label:L.label==="Home"?"Dashboard":L.label,isActive:s===L.view,onClick:()=>be(L.view)},L.view))]}),l.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-dark-border space-y-2",children:l.jsxs("button",{onClick:ae,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[l.jsx(yh,{size:20}),l.jsx("span",{className:"font-medium",children:"Logout"})]})})]})}),l.jsxs("main",{className:"flex-1 flex flex-col h-screen overflow-hidden relative print:h-auto print:overflow-visible",children:[l.jsxs("header",{className:"h-16 bg-white/80 dark:bg-dark-card/80 backdrop-blur-md border-b border-slate-200 dark:border-dark-border flex items-center justify-between px-4 md:px-6 z-[40] relative print:hidden shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center text-white font-bold text-sm",children:"R"}),l.jsxs("span",{className:"font-bold text-lg tracking-tight",children:["Redone",l.jsx("span",{className:"text-primary-600",children:"Paypro"})]})]}),l.jsxs("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 hidden md:block",children:[(a==null?void 0:a.role)==="ADMIN"?"Administrator":"Karyawan"," Panel"]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:X,className:"p-2 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-yellow-400 hover:ring-2 ring-primary-500/50 transition-all",children:f?l.jsx(Gg,{size:18}):l.jsx(Vg,{size:18})}),l.jsxs("div",{className:"flex items-center gap-2 pl-4 border-l border-slate-200 dark:border-slate-700 relative",ref:P,children:[l.jsxs("div",{className:"flex items-center gap-3 cursor-pointer p-1.5 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",onClick:()=>C(!j),children:[l.jsxs("div",{className:"text-right hidden sm:block",children:[l.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-200 leading-none",children:a==null?void 0:a.fullName}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-none mt-1",children:a==null?void 0:a.role})]}),l.jsx("div",{className:"w-9 h-9 rounded-full bg-primary-100 dark:bg-primary-900 text-primary-600 dark:text-primary-300 flex items-center justify-center border-2 border-transparent hover:border-primary-500 transition-all",children:l.jsx(Bg,{size:22})}),l.jsx(Wr,{size:14,className:`text-slate-400 transition-transform duration-200 ${j?"rotate-180":""}`})]}),j&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-[50] bg-transparent",onClick:()=>C(!1)}),l.jsxs("div",{className:"absolute right-0 top-full mt-2 w-72 sm:w-64 bg-white dark:bg-slate-800 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 z-[60] overflow-hidden animate-fade-in origin-top-right ring-1 ring-black/5",children:[l.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 sm:hidden bg-slate-50 dark:bg-slate-900/50",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-white truncate",children:a==null?void 0:a.fullName}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 capitalize mt-0.5",children:(ye=a==null?void 0:a.role)==null?void 0:ye.toLowerCase()})]}),l.jsxs("div",{className:"p-2",children:[l.jsxs("button",{onClick:L=>{L.stopPropagation(),ce()},className:"w-full flex items-center gap-3 px-3 py-3 text-sm font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-700/50 rounded-lg transition-colors",children:[l.jsx(gi,{size:18,className:"text-slate-400 dark:text-slate-500"}),"Ganti Password"]}),l.jsxs("button",{onClick:L=>{L.stopPropagation(),ae()},className:"w-full flex items-center gap-3 px-3 py-3 text-sm font-medium text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[l.jsx(yh,{size:18}),"Logout"]})]})]})]})]})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-3 md:p-8 relative print:p-0 print:overflow-visible pb-24 md:pb-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto space-y-4 md:space-y-6 print:max-w-none print:pb-0",children:[s===Ze.DASHBOARD&&l.jsx(Zg,{onViewChange:o},g),s===Ze.EMPLOYEES&&(a==null?void 0:a.role)==="ADMIN"&&l.jsx(ey,{},g),s===Ze.COMPONENTS&&l.jsx(ty,{},g),s===Ze.PRODUCTION&&l.jsx(ry,{},g),s===Ze.PAYMENTS&&l.jsx(ny,{},g),s===Ze.FINANCE&&(a==null?void 0:a.role)==="ADMIN"&&l.jsx(sy,{},g),s===Ze.REKAP&&(a==null?void 0:a.role)==="ADMIN"&&l.jsx(ay,{},g),!ve.find(L=>L.view===s)&&l.jsx("div",{className:"p-8 text-center text-slate-500",children:"Akses tidak diizinkan untuk halaman ini."})]})}),l.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-dark-card border-t border-slate-200 dark:border-dark-border z-40 pb-safe shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)] print:hidden",children:l.jsx("div",{className:"flex items-center justify-around px-2 py-2",children:ve.filter(L=>L.view!==Ze.EMPLOYEES&&L.view!==Ze.COMPONENTS).slice(0,4).map(L=>{const fe=L.icon,q=s===L.view;return l.jsxs("button",{onClick:()=>o(L.view),className:`flex flex-col items-center justify-center w-full py-1 rounded-lg transition-all ${q?"text-primary-600 dark:text-primary-400":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:[l.jsx("div",{className:`p-1.5 rounded-2xl mb-1 transition-all duration-300 ${q?"bg-primary-100 dark:bg-primary-900/30 -translate-y-1":""}`,children:l.jsx(fe,{size:24,strokeWidth:q?2.5:2})}),l.jsx("span",{className:`text-[10px] font-medium leading-none transition-all ${q?"opacity-100 font-bold":"opacity-80"}`,children:L.label})]},L.view)})})})]})]})},ly=()=>(A.useEffect(()=>{(async()=>{await Se.init()})()},[]),l.jsx(Dg,{children:l.jsx(uy,{})})),uy=()=>{const{isAuthenticated:a}=xn();return a?l.jsx(oy,{}):l.jsx(Xg,{})},cy=s0.createRoot(document.getElementById("root"));cy.render(l.jsx(Xp.StrictMode,{children:l.jsx(ly,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(a=>{console.log("PWA Service Worker registered with scope:",a.scope)}).catch(a=>{console.error("PWA Service Worker registration failed:",a)})});
